(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[204],{87359:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GeoJsonEditMode",{enumerable:!0,get:function(){return i.GeoJsonEditMode}}),Object.defineProperty(e,"ModifyMode",{enumerable:!0,get:function(){return a.ModifyMode}}),Object.defineProperty(e,"ResizeCircleMode",{enumerable:!0,get:function(){return u.ResizeCircleMode}}),Object.defineProperty(e,"TranslateMode",{enumerable:!0,get:function(){return s.TranslateMode}}),Object.defineProperty(e,"ScaleMode",{enumerable:!0,get:function(){return c.ScaleMode}}),Object.defineProperty(e,"RotateMode",{enumerable:!0,get:function(){return l.RotateMode}}),Object.defineProperty(e,"DuplicateMode",{enumerable:!0,get:function(){return f.DuplicateMode}}),Object.defineProperty(e,"ExtendLineStringMode",{enumerable:!0,get:function(){return p.ExtendLineStringMode}}),Object.defineProperty(e,"SplitPolygonMode",{enumerable:!0,get:function(){return d.SplitPolygonMode}}),Object.defineProperty(e,"ExtrudeMode",{enumerable:!0,get:function(){return h.ExtrudeMode}}),Object.defineProperty(e,"ElevationMode",{enumerable:!0,get:function(){return y.ElevationMode}}),Object.defineProperty(e,"TransformMode",{enumerable:!0,get:function(){return g.TransformMode}}),Object.defineProperty(e,"DrawPointMode",{enumerable:!0,get:function(){return v.DrawPointMode}}),Object.defineProperty(e,"DrawLineStringMode",{enumerable:!0,get:function(){return m.DrawLineStringMode}}),Object.defineProperty(e,"DrawPolygonMode",{enumerable:!0,get:function(){return b.DrawPolygonMode}}),Object.defineProperty(e,"DrawRectangleMode",{enumerable:!0,get:function(){return E.DrawRectangleMode}}),Object.defineProperty(e,"DrawSquareMode",{enumerable:!0,get:function(){return P.DrawSquareMode}}),Object.defineProperty(e,"DrawRectangleFromCenterMode",{enumerable:!0,get:function(){return _.DrawRectangleFromCenterMode}}),Object.defineProperty(e,"DrawSquareFromCenterMode",{enumerable:!0,get:function(){return O.DrawSquareFromCenterMode}}),Object.defineProperty(e,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return S.DrawCircleByDiameterMode}}),Object.defineProperty(e,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return w.DrawCircleFromCenterMode}}),Object.defineProperty(e,"DrawEllipseByBoundingBoxMode",{enumerable:!0,get:function(){return M.DrawEllipseByBoundingBoxMode}}),Object.defineProperty(e,"DrawEllipseUsingThreePointsMode",{enumerable:!0,get:function(){return x.DrawEllipseUsingThreePointsMode}}),Object.defineProperty(e,"DrawRectangleUsingThreePointsMode",{enumerable:!0,get:function(){return j.DrawRectangleUsingThreePointsMode}}),Object.defineProperty(e,"Draw90DegreePolygonMode",{enumerable:!0,get:function(){return T.Draw90DegreePolygonMode}}),Object.defineProperty(e,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return k.DrawPolygonByDraggingMode}}),Object.defineProperty(e,"ImmutableFeatureCollection",{enumerable:!0,get:function(){return C.ImmutableFeatureCollection}}),Object.defineProperty(e,"ViewMode",{enumerable:!0,get:function(){return D.ViewMode}}),Object.defineProperty(e,"MeasureDistanceMode",{enumerable:!0,get:function(){return R.MeasureDistanceMode}}),Object.defineProperty(e,"MeasureAreaMode",{enumerable:!0,get:function(){return I.MeasureAreaMode}}),Object.defineProperty(e,"MeasureAngleMode",{enumerable:!0,get:function(){return A.MeasureAngleMode}}),Object.defineProperty(e,"CompositeMode",{enumerable:!0,get:function(){return N.CompositeMode}}),Object.defineProperty(e,"SnappableMode",{enumerable:!0,get:function(){return F.SnappableMode}}),Object.defineProperty(e,"_memoize",{enumerable:!0,get:function(){return L.default}}),e.utils=void 0;var o,i=n(32254),a=n(57366),u=n(5682),s=n(76166),c=n(45892),l=n(10083),f=n(72511),p=n(24546),d=n(6548),h=n(56601),y=n(11370),g=n(44061),v=n(65521),m=n(92116),b=n(65282),E=n(38725),P=n(42003),_=n(3301),O=n(23704),S=n(65790),w=n(76950),M=n(3199),x=n(55184),j=n(29050),T=n(51400),k=n(23039),C=n(76302),D=n(15279),R=n(20063),I=n(60244),A=n(99857),N=n(48874),F=n(93816),L=(o=n(23916))&&o.__esModule?o:{default:o},H=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=G();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=o?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}(n(70875));function G(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return G=function(){return t},t}e.utils=H},48874:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CompositeMode=void 0;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,n,l=function(){var t,e,n=s(f);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var o=s(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(t=e)&&("object"===r(t)||"function"==typeof t)?t:u(this)};function f(t){var e,n,r,o;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,f),n=u(e=l.call(this)),o=void 0,(r="_modes")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e._modes=t,e}return e=[{key:"_coalesce",value:function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0;r<this._modes.length&&(e=t(this._modes[r]),n?!n(e):!e);r++);return e}},{key:"handleClick",value:function(t,e){this._coalesce(function(n){return n.handleClick(t,e)})}},{key:"handlePointerMove",value:function(t,e){return this._coalesce(function(n){return n.handlePointerMove(t,e)})}},{key:"handleStartDragging",value:function(t,e){return this._coalesce(function(n){return n.handleStartDragging(t,e)})}},{key:"handleStopDragging",value:function(t,e){return this._coalesce(function(n){return n.handleStopDragging(t,e)})}},{key:"handleDragging",value:function(t,e){return this._coalesce(function(n){return n.handleDragging(t,e)})}},{key:"getGuides",value:function(t){var e,n=[],r=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=o(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(this._modes);try{for(r.s();!(e=r.n()).done;){var a,u=e.value;n.push.apply(n,(a=u.getGuides(t).features,function(t){if(Array.isArray(t))return i(t)}(a)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(a)||o(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}}catch(t){r.e(t)}finally{r.f()}return{type:"FeatureCollection",features:n}}}],a(f.prototype,e),n&&a(f,n),f}(n(32254).GeoJsonEditMode);e.CompositeMode=l},51400:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Draw90DegreePolygonMode=void 0;var r=c(n(93737)),o=c(n(51208)),i=c(n(73663)),a=c(n(31013)),u=n(84102),s=n(70875);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||p(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(d,t);var e,n,c=function(){var t,e,n=g(d);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=g(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===l(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function d(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,d),c.apply(this,arguments)}return e=[{key:"createTentativeFeature",value:function(t){var e,n=this.getClickSequence(),r=t.lastPointerMoveEvent.mapCoords;if(1===n.length)e=r;else{var o,i=n[n.length-2],a=n[n.length-1];e=(function(t){if(Array.isArray(t))return t}(o=(0,s.generatePointsParallelToLinePoints)(i,a,r))||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(o,1)||p(o,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]}return n.length<3?{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(f(n),[e])}}:{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(f(n),[e,n[0]])]}}}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]};if(0===this.getClickSequence().length||!t.lastPointerMoveEvent)return e;var n=this.createTentativeFeature(t);return e.features.push(n),e.features=e.features.concat((0,s.getEditHandlesForGeometry)(n.geometry,-1)),e.features=e.features.slice(0,-1),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),y(g(d.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"handleClick",value:function(t,e){var n=t.picks,r=this.getTentativeGuide(e);this.addClickSequence(t);var o=this.getClickSequence();if(r){if(3===o.length&&"LineString"===r.geometry.type){var i=r.geometry;o[o.length-1]=i.coordinates[i.coordinates.length-1]}else if(o.length>3&&"Polygon"===r.geometry.type){var a=r.geometry;o[o.length-1]=a.coordinates[0][a.coordinates[0].length-2];var u=(0,s.getPickedEditHandle)(n);if(u&&Array.isArray(u.properties.positionIndexes)&&(0===u.properties.positionIndexes[1]||u.properties.positionIndexes[1]===a.coordinates[0].length-3)){var c={type:"Polygon",coordinates:this.finalizedCoordinates(f(a.coordinates[0]))};this.resetClickSequence();var l=this.getAddFeatureOrBooleanPolygonAction(c,e);l&&e.onEdit(l)}}var p={screenCoords:[-1,-1],mapCoords:t.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:function(){},sourceEvent:null};this.handlePointerMove(p,e)}}},{key:"finalizedCoordinates",value:function(t){var e=[[].concat(f(t.slice(0,-2)),[t[0]])],n=this.getIntermediatePoint(f(t));if(n)e=[[].concat(f(t.slice(0,-2)),[n,t[0]])];else{var r=f(t);r.splice(-3,1),(n=this.getIntermediatePoint(f(r)))&&(e=[[].concat(f(t.slice(0,-3)),[n,t[0]])])}return e}},{key:"getIntermediatePoint",value:function(t){var e;if(t.length>4){var n=f(t),s=n[0],c=n[1],l=(0,o.default)(s,c),p=t[t.length-3],d=t[t.length-4],h=(0,o.default)(p,d),y={first:[],second:[]};[1,2,3].forEach(function(t){var e=l+90*t;y.first.push(e>180?e-360:e);var n=h+90*t;y.second.push(n>180?n-360:n)});var g=(0,a.default)((0,u.point)(s),(0,u.point)(p));[0,1,2].forEach(function(t){var n=(0,u.lineString)([s,(0,r.default)(s,g,y.first[t]).geometry.coordinates]);[0,1,2].forEach(function(t){var o=(0,u.lineString)([p,(0,r.default)(p,g,y.second[t]).geometry.coordinates]),a=(0,i.default)(n,o);a&&a.features.length&&(e=a.features[0].geometry.coordinates)})})}return e}}],h(d.prototype,e),n&&h(d,n),d}(n(32254).GeoJsonEditMode);e.Draw90DegreePolygonMode=m},65790:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawCircleByDiameterMode=void 0;var r=a(n(90265)),o=a(n(31013)),i=n(32254);function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,t);var e,n,a=function(){var t,e,n=c(f);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=c(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===u(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function f(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,f),a.apply(this,arguments)}return e=[{key:"getTwoClickPolygon",value:function(t,e,n){var a=(n||{}).steps,u=void 0===a?64:a,s={steps:u};u<4&&(console.warn("Minimum steps to draw a circle is 4 "),s.steps=4);var c=(0,i.getIntermediatePosition)(t,e),l=Math.max((0,o.default)(t,c),.001),f=(0,r.default)(c,l,s);return f.properties=f.properties||{},f.properties.shape="Circle",f}}],s(f.prototype,e),n&&s(f,n),f}(n(23124).TwoClickPolygonMode);e.DrawCircleByDiameterMode=f},76950:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawCircleFromCenterMode=void 0;var r=i(n(90265)),o=i(n(31013));function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(l,t);var e,n,i=function(){var t,e,n=s(l);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===a(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function l(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,l),i.apply(this,arguments)}return e=[{key:"getTwoClickPolygon",value:function(t,e,n){var i=(n||{}).steps,a=void 0===i?64:i,u={steps:a};a<4&&(console.warn("Minimum steps to draw a circle is 4 "),u.steps=4);var s=Math.max((0,o.default)(t,e),.001),c=(0,r.default)(t,s,u);return c.properties=c.properties||{},c.properties.shape="Circle",c}}],u(l.prototype,e),n&&u(l,n),l}(n(23124).TwoClickPolygonMode);e.DrawCircleFromCenterMode=l},3199:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawEllipseByBoundingBoxMode=void 0;var r=s(n(13652)),o=s(n(31013)),i=s(n(61211)),a=n(84102),u=n(32254);function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,s=function(){var t,e,n=f(d);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===c(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function d(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,d),s.apply(this,arguments)}return e=[{key:"getTwoClickPolygon",value:function(t,e,n){var s=Math.min(t[0],e[0]),c=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),f=Math.max(t[1],e[1]),p=(0,r.default)([s,c,l,f]).geometry.coordinates[0],d=(0,u.getIntermediatePosition)(t,e),h=Math.max((0,o.default)((0,a.point)(p[0]),(0,a.point)(p[1])),.001),y=Math.max((0,o.default)((0,a.point)(p[0]),(0,a.point)(p[3])),.001);return(0,i.default)(d,h,y)}}],l(d.prototype,e),n&&l(d,n),d}(n(23124).TwoClickPolygonMode);e.DrawEllipseByBoundingBoxMode=d},55184:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawEllipseUsingThreePointsMode=void 0;var r=s(n(31013)),o=s(n(61211)),i=s(n(51208)),a=n(84102),u=n(32254);function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,s=function(){var t,e,n=f(d);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===c(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function d(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,d),s.apply(this,arguments)}return e=[{key:"getThreeClickPolygon",value:function(t,e,n,s){var c=(0,u.getIntermediatePosition)(t,e),l=Math.max((0,r.default)(c,(0,a.point)(n)),.001),f=Math.max((0,r.default)(t,e),.001)/2,p={angle:(0,i.default)(t,e)};return(0,o.default)(c,l,f,p)}}],l(d.prototype,e),n&&l(d,n),d}(n(1658).ThreeClickPolygonMode);e.DrawEllipseUsingThreePointsMode=d},92116:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawLineStringMode=void 0;var r=n(70875);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(l,t);var e,n,a=function(){var t,e,n=s(l);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=s(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===o(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function l(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return e=[{key:"handleClick",value:function(t,e){var n=t.picks,o=(0,r.getPickedEditHandle)(n),a=!1;o||(this.addClickSequence(t),a=!0);var u=this.getClickSequence();if(u.length>1&&o&&Array.isArray(o.properties.positionIndexes)&&o.properties.positionIndexes[0]===u.length-1){var s={type:"LineString",coordinates:i(u)};this.resetClickSequence();var c=this.getAddFeatureAction(s,e.data);c&&e.onEdit(c)}else a&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>1){var r={type:"LineString",coordinates:i(n)};this.resetClickSequence();var o=this.getAddFeatureAction(r,e.data);o&&e.onEdit(o)}}}},{key:"getGuides",value:function(t){var e,n,r=t.lastPointerMoveEvent,o=this.getClickSequence(),a=r?[r.mapCoords]:[],u={type:"FeatureCollection",features:[]};o.length>0&&(n={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(i(o),a)}}),n&&u.features.push(n);var s=o.map(function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}});return(e=u.features).push.apply(e,i(s)),u}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}],u(l.prototype,e),n&&u(l,n),l}(n(32254).GeoJsonEditMode);e.DrawLineStringMode=l},65521:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPointMode=void 0;var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(c,t);var e,n,s=function(){var t,e,n=a(c);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var o=a(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(t=e)&&("object"===r(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function c(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return e=[{key:"createTentativeFeature",value:function(t){var e=t.lastPointerMoveEvent;return{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Point",coordinates:(e?[e.mapCoords]:[])[0]}}}},{key:"handleClick",value:function(t,e){var n=t.mapCoords;e.onEdit(this.getAddFeatureAction({type:"Point",coordinates:n},e.data))}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),i(a(c.prototype),"handlePointerMove",this).call(this,t,e)}}],o(c.prototype,e),n&&o(c,n),c}(n(32254).GeoJsonEditMode);e.DrawPointMode=s},23039:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPolygonByDraggingMode=void 0;var r,o=(r=n(93096))&&r.__esModule?r:{default:r},i=n(70875);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,r=function(){var t,e,n=l(p);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===a(t)||"function"==typeof t)?t:c(this)};function p(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,p);for(var t,e,n,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n="handleDraggingThrottled")in(e=c(t=r.call.apply(r,[this].concat(i))))?Object.defineProperty(e,n,{value:null,enumerable:!0,configurable:!0,writable:!0}):e[n]=null,t}return e=[{key:"handleClick",value:function(t,e){}},{key:"handleStartDragging",value:function(t,e){t.cancelPan(),e.modeConfig&&e.modeConfig.throttleMs?this.handleDraggingThrottled=(0,o.default)(this.handleDraggingAux,e.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}},{key:"handleStopDragging",value:function(t,e){this.addClickSequence(t);var n=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),n.length>2){var r={type:"Polygon",coordinates:[[].concat(function(t){if(Array.isArray(t))return u(t)}(n)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n[0]])]};this.resetClickSequence();var o=this.getAddFeatureOrBooleanPolygonAction(r,e);o&&e.onEdit(o)}}},{key:"handleDraggingAux",value:function(t,e){var n=t.picks;(0,i.getPickedEditHandle)(n)||this.addClickSequence(t)}},{key:"handleDragging",value:function(t,e){this.handleDraggingThrottled&&this.handleDraggingThrottled(t,e)}}],s(p.prototype,e),n&&s(p,n),p}(n(65282).DrawPolygonMode);e.DrawPolygonByDraggingMode=p},65282:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPolygonMode=void 0;var r,o=(r=n(73663))&&r.__esModule?r:{default:r},i=n(84102),a=n(70875);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(c,t);var e,n,r=function(){var t,e,n=p(c);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===u(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function c(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),r.apply(this,arguments)}return e=[{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),o=n?[n.mapCoords]:[];return 1===r.length||2===r.length?e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(s(r),o)}}:r.length>2&&(e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(s(r),o,[r[0]])]}}),e}},{key:"getGuides",value:function(t){var e,n=this.getClickSequence(),r={type:"FeatureCollection",features:[]},o=this.createTentativeFeature(t);o&&r.features.push(o);var i=n.map(function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}});return(e=r.features).push.apply(e,s(i)),r}},{key:"handleClick",value:function(t,e){var n=t.picks,r=(0,a.getPickedEditHandle)(n),u=this.getClickSequence(),c=!1;if(u.length>2&&e.modeConfig&&e.modeConfig.preventOverlappingLines){var l=(0,i.lineString)([u[u.length-1],t.mapCoords]),f=(0,i.lineString)(s(u.slice(0,u.length-1)));(0,o.default)(l,f).features.length>0&&(c=!0)}var p=!1;if(r||c||(this.addClickSequence(t),p=!0),u.length>2&&r&&Array.isArray(r.properties.positionIndexes)&&(0===r.properties.positionIndexes[0]||r.properties.positionIndexes[0]===u.length-1)){var d={type:"Polygon",coordinates:[[].concat(s(u),[u[0]])]};this.resetClickSequence();var h=this.getAddFeatureOrBooleanPolygonAction(d,e);h&&e.onEdit(h)}else p&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>2){var r={type:"Polygon",coordinates:[[].concat(s(n),[n[0]])]};this.resetClickSequence();var o=this.getAddFeatureOrBooleanPolygonAction(r,e);o&&e.onEdit(o)}}}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),f(p(c.prototype),"handlePointerMove",this).call(this,t,e)}}],l(c.prototype,e),n&&l(c,n),c}(n(32254).GeoJsonEditMode);e.DrawPolygonMode=h},3301:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleFromCenterMode=void 0;var r,o=(r=n(13652))&&r.__esModule?r:{default:r};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(c,t);var e,n,r=function(){var t,e,n=u(c);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===i(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function c(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),r.apply(this,arguments)}return e=[{key:"getTwoClickPolygon",value:function(t,e,n){var r=t[0]>e[0]?t[0]+Math.abs(t[0]-e[0]):t[0]-Math.abs(t[0]-e[0]),i=t[1]>e[1]?t[1]+Math.abs(t[1]-e[1]):t[1]-Math.abs(t[1]-e[1]),a=(0,o.default)([r,i,e[0],e[1]]);return a.properties=a.properties||{},a.properties.shape="Rectangle",a}}],a(c.prototype,e),n&&a(c,n),c}(n(23124).TwoClickPolygonMode);e.DrawRectangleFromCenterMode=c},38725:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleMode=void 0;var r,o=(r=n(13652))&&r.__esModule?r:{default:r};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(c,t);var e,n,r=function(){var t,e,n=u(c);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===i(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function c(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),r.apply(this,arguments)}return e=[{key:"getTwoClickPolygon",value:function(t,e,n){var r=(0,o.default)([t[0],t[1],e[0],e[1]]);return r.properties=r.properties||{},r.properties.shape="Rectangle",r}}],a(c.prototype,e),n&&a(c,n),c}(n(23124).TwoClickPolygonMode);e.DrawRectangleMode=c},29050:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleUsingThreePointsMode=void 0;var r=n(70875);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,t);var e,n,c=function(){var t,e,n=u(l);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===o(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function l(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,l),c.apply(this,arguments)}return e=[{key:"getThreeClickPolygon",value:function(t,e,n,o){var a,u=function(t){if(Array.isArray(t))return t}(a=(0,r.generatePointsParallelToLinePoints)(t,e,n))||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(a,2)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}}(a,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=u[0],c=u[1];return{type:"Feature",properties:{shape:"Rectangle"},geometry:{type:"Polygon",coordinates:[[t,e,s,c,t]]}}}}],a(l.prototype,e),n&&a(l,n),l}(n(1658).ThreeClickPolygonMode);e.DrawRectangleUsingThreePointsMode=c},23704:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawSquareFromCenterMode=void 0;var r=u(n(13652)),o=u(n(31013)),i=u(n(25913)),a=n(84102);function u(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,u=function(){var t,e,n=l(p);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===s(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function p(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,p),u.apply(this,arguments)}return e=[{key:"getTwoClickPolygon",value:function(t,e,n){var u=[e[0],t[1]],s=[t[0],e[1]],c=(0,o.default)((0,a.point)(u),(0,a.point)(t)),l=(0,o.default)((0,a.point)(s),(0,a.point)(t)),f=c<=l?u:s,p=(0,a.lineString)([f,e]),d=(0,i.default)(p,c<=l?c:l).geometry.coordinates,h=t[0]>d[0]?t[0]+Math.abs(t[0]-d[0]):t[0]-Math.abs(t[0]-d[0]),y=t[1]>d[1]?t[1]+Math.abs(t[1]-d[1]):t[1]-Math.abs(t[1]-d[1]),g=(0,r.default)([h,y,d[0],d[1]]);return g.properties=g.properties||{},g.properties.shape="Square",g}}],c(p.prototype,e),n&&c(p,n),p}(n(23124).TwoClickPolygonMode);e.DrawSquareFromCenterMode=p},42003:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawSquareMode=void 0;var r=u(n(13652)),o=u(n(31013)),i=u(n(25913)),a=n(84102);function u(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(p,t);var e,n,u=function(){var t,e,n=l(p);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=l(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===s(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function p(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,p),u.apply(this,arguments)}return e=[{key:"getTwoClickPolygon",value:function(t,e,n){var u=[e[0],t[1]],s=[t[0],e[1]],c=(0,o.default)((0,a.point)(u),(0,a.point)(t)),l=(0,o.default)((0,a.point)(s),(0,a.point)(t)),f=c<=l?u:s,p=(0,a.lineString)([f,e]),d=(0,i.default)(p,c<=l?c:l).geometry.coordinates,h=(0,r.default)([t[0],t[1],d[0],d[1]]);return h.properties=h.properties||{},h.properties.shape="Square",h}}],c(p.prototype,e),n&&c(p,n),p}(n(23124).TwoClickPolygonMode);e.DrawSquareMode=p},72511:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DuplicateMode=void 0;var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(c,t);var e,n,s=function(){var t,e,n=a(c);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var o=a(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(t=e)&&("object"===r(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function c(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return e=[{key:"handleStartDragging",value:function(t,e){i(a(c.prototype),"handleStartDragging",this).call(this,t,e),this._geometryBeforeTranslate&&e.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,e.data))}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("copy"):t.onUpdateCursor(null)}}],o(c.prototype,e),n&&o(c,n),c}(n(76166).TranslateMode);e.DuplicateMode=s},11370:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ElevationMode=void 0;var r=n(70875);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=t.pointerDownScreenCoords,n=t.screenCoords;return 10*(e[1]-n[1])}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(f,t);var e,n,l=function(){var t,e,n=u(f);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===o(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function f(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,f),l.apply(this,arguments)}return e=[{key:"makeElevatedEvent",value:function(t,e,n){var r=n.modeConfig||{},o=r.minElevation,i=r.maxElevation,a=r.calculateElevationChange;if(!t.pointerDownScreenCoords)return t;var u=3===e.length?e[2]:0;return u+=(void 0===a?c:a)({pointerDownScreenCoords:t.pointerDownScreenCoords,screenCoords:t.screenCoords}),u=Math.max(u=Math.min(u,void 0===i?2e4:i),void 0===o?0:o),Object.assign({},t,{mapCoords:[e[0],e[1],u]})}},{key:"handlePointerMove",value:function(t,e){var n=(0,r.getPickedEditHandle)(t.pointerDownPicks),o=n?n.geometry.coordinates:t.mapCoords;a(u(f.prototype),"handlePointerMove",this).call(this,this.makeElevatedEvent(t,o,e),e)}},{key:"handleStopDragging",value:function(t,e){var n=(0,r.getPickedEditHandle)(t.picks),o=n?n.geometry.coordinates:t.mapCoords;a(u(f.prototype),"handleStopDragging",this).call(this,this.makeElevatedEvent(t,o,e),e)}},{key:"getCursor",value:function(t){var e=a(u(f.prototype),"getCursor",this).call(this,t);return"cell"===e&&(e="ns-resize"),e}}],n=[{key:"calculateElevationChangeWithViewport",value:function(t,e){var n=e.pointerDownScreenCoords,r=e.screenCoords;return 156543.03392*Math.cos(t.latitude*Math.PI/180)/Math.pow(2,t.zoom)*(n[1]-r[1])/2}}],e&&i(f.prototype,e),n&&i(f,n),f}(n(57366).ModifyMode);e.ElevationMode=l},24546:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendLineStringMode=void 0;var r=n(32254),o=n(76302);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(c,t);var e,n,r=function(){var t,e,n=u(c);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=u(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===i(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function c(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),r.apply(this,arguments)}return e=[{key:"getSingleSelectedLineString",value:function(t){var e=this.getSelectedGeometry(t);return e&&"LineString"===e.type?e:null}},{key:"handleClick",value:function(t,e){var n=e.selectedIndexes,r=this.getSingleSelectedLineString(e);if(!r){console.warn("ExtendLineStringMode only supported for single LineString selection");return}var i=[r.coordinates.length],a=e.modeConfig;a&&a.drawAtFront&&(i=[0]);var u=n[0],s=new o.ImmutableFeatureCollection(e.data).addPosition(u,i,t.mapCoords).getObject();e.onEdit({updatedData:s,editType:"addPosition",editContext:{featureIndexes:[u],positionIndexes:i,position:t.mapCoords}})}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=this.getSingleSelectedLineString(t);if(!n)return e;var r=t.lastPointerMoveEvent&&t.lastPointerMoveEvent.mapCoords,o=null,i=t.modeConfig;return o=i&&i.drawAtFront?n.coordinates[0]:n.coordinates[n.coordinates.length-1],e.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[o,r]}}),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}],a(c.prototype,e),n&&a(c,n),c}(r.GeoJsonEditMode);e.ExtendLineStringMode=c},56601:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtrudeMode=void 0;var r,o=(r=n(51208))&&r.__esModule?r:{default:r},i=n(70875),a=n(57366),u=n(76302);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,e)||f(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(a,t);var e,n,r=function(){var t,e,n=y(a);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===s(t)||"function"==typeof t)?t:h(this)};function a(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a);for(var t,e,n,o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return(n="isPointAdded")in(e=h(t=r.call.apply(r,[this].concat(i))))?Object.defineProperty(e,n,{value:!1,enumerable:!0,configurable:!0,writable:!0}):e[n]=!1,t}return e=[{key:"handleDragging",value:function(t,e){var n=(0,i.getPickedEditHandle)(t.pointerDownPicks);if(n){var r=n.properties.featureIndex,o=n.properties.positionIndexes,a=this.coordinatesSize(o,r,e.data);o=this.isPointAdded?this.nextPositionIndexes(o,a):o;var s=this.getPointForPositionIndexes(this.prevPositionIndexes(o,a),r,e.data),c=this.getPointForPositionIndexes(o,r,e.data);if(s&&c){var f=l((0,i.generatePointsParallelToLinePoints)(s,c,t.mapCoords),2),p=f[0],d=f[1],h=new u.ImmutableFeatureCollection(e.data).replacePosition(r,this.prevPositionIndexes(o,a),d).replacePosition(r,o,p).getObject();e.onEdit({updatedData:h,editType:"extruding",editContext:{featureIndexes:[r],positionIndexes:this.nextPositionIndexes(o,a),position:p}}),t.cancelPan()}}}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,i.getPickedIntermediateEditHandle)(t.picks);if(n.length&&r){var o=r.properties,a=o.positionIndexes,s=o.featureIndex,c=this.coordinatesSize(a,s,e.data),l=this.getPointForPositionIndexes(this.prevPositionIndexes(a,c),s,e.data),f=this.getPointForPositionIndexes(a,s,e.data);if(l&&f){var p=new u.ImmutableFeatureCollection(e.data);this.isOrthogonal(a,s,c,e.data)||(p=p.addPosition(s,a,f)),this.isOrthogonal(this.prevPositionIndexes(a,c),s,c,e.data)||(p=p.addPosition(s,a,l),this.isPointAdded=!0),e.onEdit({updatedData:p.getObject(),editType:"startExtruding",editContext:{featureIndexes:[s],positionIndexes:a,position:l}})}}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,i.getPickedEditHandle)(t.pointerDownPicks);if(n.length&&r){var o=r.properties.featureIndex,a=r.properties.positionIndexes,s=this.coordinatesSize(a,o,e.data);a=this.isPointAdded?this.nextPositionIndexes(a,s):a;var c=this.getPointForPositionIndexes(this.prevPositionIndexes(a,s),o,e.data),f=this.getPointForPositionIndexes(a,o,e.data);if(c&&f){var p=l((0,i.generatePointsParallelToLinePoints)(c,f,t.mapCoords),2),d=p[0],h=p[1],y=new u.ImmutableFeatureCollection(e.data).replacePosition(o,this.prevPositionIndexes(a,s),h).replacePosition(o,a,d).getObject();e.onEdit({updatedData:y,editType:"extruded",editContext:{featureIndexes:[o],positionIndexes:a,position:d}})}}this.isPointAdded=!1}},{key:"coordinatesSize",value:function(t,e,n){var r=n.features,o=0;if(Array.isArray(t)){var i=r[e].geometry.coordinates;if(3===t.length){var a=l(t,2),u=a[0],s=a[1];i.length&&i[u].length&&(o=i[u][s].length)}else{var c=l(t,1)[0];i.length&&i[c].length&&(o=i[c].length)}}return o}},{key:"getBearing",value:function(t,e){var n=(0,o.default)(t,e);return n<0?Math.floor(360+n):Math.floor(n)}},{key:"isOrthogonal",value:function(t,e,n,r){if(!Array.isArray(t))return!1;t[t.length-1]===n-1&&(t[t.length-1]=0);var o=this.getPointForPositionIndexes(this.prevPositionIndexes(t,n),e,r),i=this.getPointForPositionIndexes(this.nextPositionIndexes(t,n),e,r),a=this.getPointForPositionIndexes(t,e,r);return[89,90,91,269,270,271].includes(Math.abs(this.getBearing(a,o)-this.getBearing(a,i)))}},{key:"nextPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=c(t);return n.length&&(n[n.length-1]=n[n.length-1]===e-1?0:n[n.length-1]+1),n}},{key:"prevPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=c(t);return n.length&&(n[n.length-1]=0===n[n.length-1]?e-2:n[n.length-1]-1),n}},{key:"getPointForPositionIndexes",value:function(t,e,n){var r,o=n.features;if(Array.isArray(t)){var i=o[e].geometry.coordinates;if(3===t.length){var a=l(t,3),u=a[0],s=a[1],c=a[2];i.length&&i[u].length&&(r=i[u][s][c])}else{var f=l(t,2),p=f[0],d=f[1];i.length&&i[p].length&&(r=i[p][d])}}return r}}],d(a.prototype,e),n&&d(a,n),a}(a.ModifyMode);e.ExtrudeMode=v},32254:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getIntermediatePosition=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},e.GeoJsonEditMode=void 0;var r=c(n(71959)),o=c(n(68727)),i=c(n(74170)),a=c(n(51138)),u=n(70875),s=n(76302);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h={type:"FeatureCollection",features:[]},y=[],g=function(){var t,e;function n(){var t,e;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),e=[],(t="_clickSequence")in this?Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):this[t]=e}return t=[{key:"getGuides",value:function(t){return h}},{key:"getTooltips",value:function(t){return y}},{key:"getSelectedFeature",value:function(t){return 1===t.selectedIndexes.length?t.data.features[t.selectedIndexes[0]]:null}},{key:"getSelectedGeometry",value:function(t){var e=this.getSelectedFeature(t);return e?e.geometry:null}},{key:"getSelectedFeaturesAsFeatureCollection",value:function(t){var e=t.data.features;return{type:"FeatureCollection",features:t.selectedIndexes.map(function(t){return e[t]})}}},{key:"getClickSequence",value:function(){return this._clickSequence}},{key:"addClickSequence",value:function(t){var e=t.mapCoords;this._clickSequence.push(e)}},{key:"resetClickSequence",value:function(){this._clickSequence=[]}},{key:"getTentativeGuide",value:function(t){return this.getGuides(t).features.find(function(t){return t.properties&&"tentative"===t.properties.guideType})}},{key:"isSelectionPicked",value:function(t,e){if(!t.length)return!1;var n=(0,u.getNonGuidePicks)(t).map(function(t){return t.index}),r=(0,u.getPickedEditHandles)(t).map(function(t){return t.properties.featureIndex}),o=new Set([].concat(l(n),l(r)));return e.selectedIndexes.some(function(t){return o.has(t)})}},{key:"rewindPolygon",value:function(t){var e=t.geometry;return"Polygon"===e.type||"MultiPolygon"===e.type?(0,a.default)(t):t}},{key:"getAddFeatureAction",value:function(t,e){var n="Feature"===t.type?t:{type:"Feature",properties:{},geometry:t},r=this.rewindPolygon(n),o=new s.ImmutableFeatureCollection(e).addFeature(r).getObject();return{updatedData:o,editType:"addFeature",editContext:{featureIndexes:[o.features.length-1]}}}},{key:"getAddManyFeaturesAction",value:function(t,e){var n,r=t.features,o=new s.ImmutableFeatureCollection(e),i=o.getObject().features.length,a=[],u=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=f(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(r);try{for(u.s();!(n=u.n()).done;){var c=n.value,l=c.properties,p=c.geometry;o=o.addFeature({type:"Feature",properties:l,geometry:p}),a.push(i+a.length)}}catch(t){u.e(t)}finally{u.f()}return{updatedData:o.getObject(),editType:"addFeature",editContext:{featureIndexes:a}}}},{key:"getAddFeatureOrBooleanPolygonAction",value:function(t,e){var n=this.getSelectedFeature(e),a=e.modeConfig;if(a&&a.booleanOperation){if(!n||"Polygon"!==n.geometry.type&&"MultiPolygon"!==n.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;var u,c="Feature"===t.type?t:{type:"Feature",geometry:t};if("union"===a.booleanOperation)u=(0,r.default)(n,c);else if("difference"===a.booleanOperation)u=(0,o.default)(n,c);else{if("intersection"!==a.booleanOperation)return console.warn("Invalid booleanOperation ".concat(a.booleanOperation)),null;u=(0,i.default)(n,c)}if(!u)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;var l=e.selectedIndexes[0];return{updatedData:new s.ImmutableFeatureCollection(e.data).replaceGeometry(l,u.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[l]}}}return this.getAddFeatureAction(t,e.data)}},{key:"createTentativeFeature",value:function(t){return null}},{key:"handleClick",value:function(t,e){}},{key:"handlePointerMove",value:function(t,e){var n=this.createTentativeFeature(e);n&&e.onEdit({updatedData:e.data,editType:"updateTentativeFeature",editContext:{feature:n}})}},{key:"handleStartDragging",value:function(t,e){}},{key:"handleStopDragging",value:function(t,e){}},{key:"handleDragging",value:function(t,e){}},{key:"handleKeyUp",value:function(t,e){"Escape"===t.key&&(this.resetClickSequence(),e.onEdit({updatedData:e.data,editType:"cancelFeature",editContext:{}}))}}],d(n.prototype,t),e&&d(n,e),n}();e.GeoJsonEditMode=g},76302:function(t,e){"use strict";function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.ImmutableFeatureCollection=void 0;var s=function(){var t,e;function r(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),u(this,"featureCollection",void 0),this.featureCollection=t}return t=[{key:"getObject",value:function(){return this.featureCollection}},{key:"replacePosition",value:function(t,e,r){var o=this.featureCollection.features[t].geometry,a="Polygon"===o.type||"MultiPolygon"===o.type,u=i({},o,{coordinates:function t(e,r,o,i){if(!r)return e;if(0===r.length)return c(o,e);if(1===r.length){var a=[].concat(n(e.slice(0,r[0])),[c(o,e[r[0]])],n(e.slice(r[0]+1)));return i&&(0===r[0]||r[0]===e.length-1)&&(a[0]=c(o,e[0]),a[e.length-1]=c(o,e[0])),a}return[].concat(n(e.slice(0,r[0])),[t(e[r[0]],r.slice(1,r.length),o,i)],n(e.slice(r[0]+1)))}(o.coordinates,e,r,a)});return this.replaceGeometry(t,u)}},{key:"removePosition",value:function(t,e){var r=this.featureCollection.features[t].geometry;if("Point"===r.type)throw Error("Can't remove a position from a Point or there'd be nothing left");if("MultiPoint"===r.type&&r.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if("LineString"===r.type&&r.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if("Polygon"===r.type&&r.coordinates[0].length<5&&Array.isArray(e)&&0===e[0])throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if("MultiLineString"===r.type&&1===r.coordinates.length&&r.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if("MultiPolygon"===r.type&&1===r.coordinates.length&&r.coordinates[0][0].length<5&&Array.isArray(e)&&0===e[0]&&0===e[1])throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");var o="Polygon"===r.type||"MultiPolygon"===r.type,a=i({},r,{coordinates:function t(e,r,o){if(!r)return e;if(0===r.length)throw Error("Must specify the index of the position to remove");if(1===r.length){var i=[].concat(n(e.slice(0,r[0])),n(e.slice(r[0]+1)));return o&&(0===r[0]||r[0]===e.length-1)&&(0===r[0]?i[i.length-1]=i[0]:r[0]===e.length-1&&(i[0]=i[i.length-1])),i}return[].concat(n(e.slice(0,r[0])),[t(e[r[0]],r.slice(1,r.length),o)],n(e.slice(r[0]+1)))}(r.coordinates,e,o)});return function(t){switch(t.type){case"Polygon":(function(t){for(var e=t.coordinates,n=1;n<e.length;n++)l(e,n)&&n--})(t);break;case"MultiLineString":(function(t){for(var e=0;e<t.coordinates.length;e++)1===t.coordinates[e].length&&(t.coordinates.splice(e,1),e--)})(t);break;case"MultiPolygon":(function(t){for(var e=0;e<t.coordinates.length;e++){var n=t.coordinates[e];n[0].length<=3&&(t.coordinates.splice(e,1),e--);for(var r=1;r<n.length;r++)l(n,r)&&r--}})(t)}}(a),this.replaceGeometry(t,a)}},{key:"addPosition",value:function(t,e,r){var o=this.featureCollection.features[t].geometry;if("Point"===o.type)throw Error("Unable to add a position to a Point feature");var a="Polygon"===o.type||"MultiPolygon"===o.type,u=i({},o,{coordinates:function t(e,r,o,i){if(!r)return e;if(0===r.length)throw Error("Must specify the index of the position to remove");return 1===r.length?[].concat(n(e.slice(0,r[0])),[o],n(e.slice(r[0]))):[].concat(n(e.slice(0,r[0])),[t(e[r[0]],r.slice(1,r.length),o,i)],n(e.slice(r[0]+1)))}(o.coordinates,e,r,a)});return this.replaceGeometry(t,u)}},{key:"replaceGeometry",value:function(t,e){var o=i({},this.featureCollection.features[t],{geometry:e}),a=i({},this.featureCollection,{features:[].concat(n(this.featureCollection.features.slice(0,t)),[o],n(this.featureCollection.features.slice(t+1)))});return new r(a)}},{key:"addFeature",value:function(t){return this.addFeatures([t])}},{key:"addFeatures",value:function(t){var e=i({},this.featureCollection,{features:[].concat(n(this.featureCollection.features),n(t))});return new r(e)}},{key:"deleteFeature",value:function(t){return this.deleteFeatures([t])}},{key:"deleteFeatures",value:function(t){var e=n(this.featureCollection.features);t.sort();for(var o=t.length-1;o>=0;o--){var a=t[o];a>=0&&a<e.length&&e.splice(a,1)}var u=i({},this.featureCollection,{features:e});return new r(u)}}],a(r.prototype,t),e&&a(r,e),r}();function c(t,e){if(2===t.length&&3===e.length){var n=e[2];return[t[0],t[1],n]}return t}function l(t,e){return t[e].length<=3&&(t.splice(e,1),!0)}e.ImmutableFeatureCollection=s},99857:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureAngleMode=void 0;var r=u(n(51208)),o=u(n(78230)),i=u(n(23916)),a=n(32254);function u(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=[],y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(u,t);var e,n,a=function(){var t,e,n=p(u);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===s(t)||"function"==typeof t)?t:f(this)};function u(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,u);for(var t,e,n,s,c=arguments.length,l=Array(c),p=0;p<c;p++)l[p]=arguments[p];return e=f(t=a.call.apply(a,[this].concat(l))),n="_getTooltips",s=(0,i.default)(function(t){var e=t.modeConfig,n=t.vertex,i=t.point1,a=t.point2,u=h;if(n&&i&&a){var s,c=e||{},l=c.formatTooltip,f=c.measurementCallback,p=Math.abs((0,r.default)(n,i)-(0,r.default)(n,a));p>180&&(p=360-p),s=l?l(p):"".concat(parseFloat(p).toFixed(2)," ").concat("deg"),f&&f(p),u=[{position:(0,o.default)({type:"FeatureCollection",features:[i,a].map(function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t}}})}).geometry.coordinates,text:s}]}return u}),n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,t}return e=[{key:"handleClick",value:function(t,e){this.getClickSequence().length>=3&&this.resetClickSequence(),this.addClickSequence(t)}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"getPoints",value:function(t){var e=this.getClickSequence(),n=function(t){if(Array.isArray(t))return c(t)}(e)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return e.length<3&&t.lastPointerMoveEvent&&n.push(t.lastPointerMoveEvent.mapCoords),n}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=e.features,r=this.getPoints(t);return r.length>2?n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0],r[2]]}}):r.length>1&&n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0]]}}),e}},{key:"getTooltips",value:function(t){var e=this.getPoints(t);return this._getTooltips({modeConfig:t.modeConfig,vertex:e[0],point1:e[1],point2:e[2]})}}],l(u.prototype,e),n&&l(u,n),u}(a.GeoJsonEditMode);e.MeasureAngleMode=y},60244:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureAreaMode=void 0;var r=a(n(41070)),o=a(n(66338)),i=n(65282);function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=[],h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,i=function(){var t,e,n=f(a);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===u(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function a(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=[{key:"handleClick",value:function(t,e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){var r;r=n[e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{onEdit:function(){}});l(f(a.prototype),"handleClick",this).call(this,t,n)}},{key:"getTooltips",value:function(t){var e=this.getTentativeGuide(t);if(e&&"Polygon"===e.geometry.type){var n,i=t.modeConfig||{},a=i.formatTooltip,u=i.measurementCallback,s=(0,o.default)(e),c=(0,r.default)(e);return n=a?a(c):"".concat(parseFloat(c).toFixed(2)," ").concat("sq. m"),u&&u(c),[{position:s.geometry.coordinates,text:n}]}return d}}],c(a.prototype,e),n&&c(a,n),a}(i.DrawPolygonMode);e.MeasureAreaMode=h},20063:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureDistanceMode=void 0;var r=a(n(31013)),o=a(n(99034)),i=n(70875);function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(c,t);var e,n,a=function(){var t,e,n=p(c);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===u(t)||"function"==typeof t)?t:f(this)};function c(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return h(f(t=a.call.apply(a,[this].concat(n))),"_isMeasuringSessionFinished",!1),h(f(t),"_currentTooltips",[]),h(f(t),"_currentDistance",0),h(f(t),"_calculateDistanceForTooltip",function(t){var e=t.positionA,n=t.positionB,o=t.modeConfig||{},i=o.turfOptions,a=o.measurementCallback,u=(0,r.default)(e,n,i);return a&&a(u),u}),t}return e=[{key:"_formatTooltip",value:function(t,e){var n=e||{},r=n.formatTooltip,o=n.turfOptions,i=o&&o.units||"kilometers";return r?r(t):"".concat(parseFloat(t).toFixed(2)," ").concat(i)}},{key:"handleClick",value:function(t,e){var n=e.modeConfig,r=e.data,a=e.onEdit,u=(n||{}).centerTooltipsOnLine;this._isMeasuringSessionFinished&&(this._isMeasuringSessionFinished=!1,this.resetClickSequence(),this._currentTooltips=[],this._currentDistance=0);var s=t.picks,c=(0,i.getPickedEditHandle)(s),l=!1;c||(this.addClickSequence(t),l=!0);var f=this.getClickSequence();if(f.length>1&&c&&Array.isArray(c.properties.positionIndexes)&&c.properties.positionIndexes[0]===f.length-1)this._isMeasuringSessionFinished=!0;else if(l){if(f.length>1){this._currentDistance+=this._calculateDistanceForTooltip({positionA:f[f.length-2],positionB:f[f.length-1],modeConfig:n});var p=void 0!==u&&u?(0,o.default)(f[f.length-2],f[f.length-1]).geometry.coordinates:t.mapCoords;this._currentTooltips.push({position:p,text:this._formatTooltip(this._currentDistance,n)})}a({updatedData:r,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}}},{key:"handleKeyUp",value:function(t,e){if(!this._isMeasuringSessionFinished){t.stopPropagation();var n=t.key,r=this.getClickSequence().length;switch(n){case"Escape":this._isMeasuringSessionFinished=!0,1===r&&(this.resetClickSequence(),this._currentTooltips=[]),e.onUpdateCursor("cell");break;case"Enter":this.handleClick(e.lastPointerMoveEvent,e),this._isMeasuringSessionFinished=!0}}}},{key:"getGuides",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),o=n&&!this._isMeasuringSessionFinished?[n.mapCoords]:[],i={type:"FeatureCollection",features:[]};r.length>0&&i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(s(r),o)}});var a=r.map(function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}});return(e=i.features).push.apply(e,s(a)),i}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"getTooltips",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=(n||{}).centerTooltipsOnLine,i=this.getClickSequence();if(i.length>0&&e&&!this._isMeasuringSessionFinished){var a=this._calculateDistanceForTooltip({positionA:i[i.length-1],positionB:e.mapCoords,modeConfig:t.modeConfig}),u=void 0!==r&&r?(0,o.default)(i[i.length-1],e.mapCoords).geometry.coordinates:e.mapCoords;return[].concat(s(this._currentTooltips),[{position:u,text:this._formatTooltip(this._currentDistance+a,n)}])}return this._currentTooltips}}],l(c.prototype,e),n&&l(c,n),c}(n(32254).GeoJsonEditMode);e.MeasureDistanceMode=y},57366:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ModifyMode=void 0;var r=n(84102),o=n(70875),i=n(32254),a=n(76302);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||c(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(l,t);var e,n,i=function(){var t,e,n=p(l);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=p(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===u(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function l(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,l),i.apply(this,arguments)}return e=[{key:"getGuides",value:function(t){var e,n=this,i=[],a=t.data,u=t.lastPointerMoveEvent,l=a.features,f=u&&u.picks,p=u&&u.mapCoords,d=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=c(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}(t.selectedIndexes);try{for(d.s();!(e=d.n()).done;){var h=e.value;if(h<l.length){var y=l[h].geometry;i.push.apply(i,s((0,o.getEditHandlesForGeometry)(y,h)))}else console.warn("selectedFeatureIndexes out of range ".concat(h))}}catch(t){d.e(t)}finally{d.f()}if(f&&f.length&&p){var g,v=!(0,o.getPickedExistingEditHandle)(f)&&f.find(function(t){return!t.isGuide});if(v&&!v.object.geometry.type.includes("Point")&&!((null===(g=t.modeConfig)||void 0===g?void 0:g.lockRectangles)&&"Rectangle"===v.object.properties.shape)&&t.selectedIndexes.includes(v.index)){var m=null,b=[],E=(0,r.point)(p);if((0,o.recursivelyTraverseNestedArrays)(v.object.geometry.coordinates,[],function(e,o){var i=(0,r.lineString)(e),a=n.getNearestPoint(i,E,t.modeConfig&&t.modeConfig.viewport);(!m||a.properties.dist<m.properties.dist)&&(m=a,b=o)}),m){var P=m,_=P.geometry.coordinates,O=P.properties.index;i.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:v.index,positionIndexes:[].concat(s(b),[O+1])},geometry:{type:"Point",coordinates:_}})}}}return{type:"FeatureCollection",features:i}}},{key:"getNearestPoint",value:function(t,e,n){if(t.geometry.coordinates.some(function(t){return t.length>2})){if(n)return(0,o.nearestPointOnProjectedLine)(t,e,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,o.nearestPointOnLine)(t,e,n)}},{key:"handleClick",value:function(t,e){var n=(0,o.getPickedExistingEditHandle)(t.picks),r=(0,o.getPickedIntermediateEditHandle)(t.picks);if(n){var i,u=n.properties,s=u.featureIndex,c=u.positionIndexes;try{i=new a.ImmutableFeatureCollection(e.data).removePosition(s,c).getObject()}catch(t){}i&&e.onEdit({updatedData:i,editType:"removePosition",editContext:{featureIndexes:[s],positionIndexes:c,position:n.geometry.coordinates}})}else if(r){var l,f=r.properties,p=f.featureIndex,d=f.positionIndexes,h=e.data.features[p];if(!((null===(l=e.modeConfig)||void 0===l?void 0:l.lockRectangles)&&(null==h?void 0:h.properties.shape)==="Rectangle")){var y=new a.ImmutableFeatureCollection(e.data).addPosition(p,d,r.geometry.coordinates).getObject();y&&e.onEdit({updatedData:y,editType:"addPosition",editContext:{featureIndexes:[p],positionIndexes:d,position:r.geometry.coordinates}})}}}},{key:"handleDragging",value:function(t,e){var n=(0,o.getPickedEditHandle)(t.pointerDownPicks);n&&(t.cancelPan(),this._dragEditHandle("movePosition",e,n,t))}},{key:"_dragEditHandle",value:function(t,e,n,r){var i,u,s=n.properties,c=e.data.features[s.featureIndex];if((null===(i=e.modeConfig)||void 0===i?void 0:i.lockRectangles)&&"Rectangle"===c.properties.shape){var l=(0,o.updateRectanglePosition)(c,s.positionIndexes[1],r.mapCoords);u=new a.ImmutableFeatureCollection(e.data).replaceGeometry(s.featureIndex,{coordinates:l,type:"Polygon"}).getObject()}else u=new a.ImmutableFeatureCollection(e.data).replacePosition(s.featureIndex,s.positionIndexes,r.mapCoords).getObject();e.onEdit({updatedData:u,editType:t,editContext:{featureIndexes:[s.featureIndex],positionIndexes:s.positionIndexes,position:r.mapCoords}})}},{key:"handlePointerMove",value:function(t,e){var n=this.getCursor(t);e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,o.getPickedIntermediateEditHandle)(t.picks);if(n.length&&r){var i=r.properties,u=new a.ImmutableFeatureCollection(e.data).addPosition(i.featureIndex,i.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:u,editType:"addPosition",editContext:{featureIndexes:[i.featureIndex],positionIndexes:i.positionIndexes,position:t.mapCoords}})}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,o.getPickedEditHandle)(t.picks);n.length&&r&&this._dragEditHandle("finishMovePosition",e,r,t)}},{key:"getCursor",value:function(t){var e=t&&t.picks||[];return(0,o.getPickedEditHandles)(e).length?"cell":null}}],f(l.prototype,e),n&&f(l,n),l}(i.GeoJsonEditMode);e.ModifyMode=h},5682:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResizeCircleMode=void 0;var r=f(n(13807)),o=n(84102),i=f(n(90265)),a=f(n(31013)),u=f(n(78230)),s=n(70875),c=n(32254),l=n(76302);function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(f,t);var e,n,c=function(){var t,e,n=g(f);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=g(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===p(t)||"function"==typeof t)?t:y(this)};function f(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return m(y(t=c.call.apply(c,[this].concat(n))),"_selectedEditHandle",void 0),m(y(t),"_isResizing",!1),t}return e=[{key:"getGuides",value:function(t){var e=this,n=[],r=t.selectedIndexes,i=t.lastPointerMoveEvent,a=i&&i.picks,u=i&&i.mapCoords;if(a&&a.length&&u&&1===r.length&&!this._isResizing){var c=a.find(function(t){return!t.isGuide});if(c&&c.object.properties.shape&&c.object.properties.shape.includes("Circle")&&t.selectedIndexes.includes(c.index)){var l=null,f=[],p=(0,o.point)(u);if((0,s.recursivelyTraverseNestedArrays)(c.object.geometry.coordinates,[],function(n,r){var i=(0,o.lineString)(n),a=e.getNearestPoint(i,p,t.modeConfig&&t.modeConfig.viewport);(!l||a.properties.dist<l.properties.dist)&&(l=a,f=r)}),l){var h,y=l,g=y.geometry.coordinates,v=y.properties.index;n.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:c.index,positionIndexes:[].concat(function(t){if(Array.isArray(t))return d(t)}(h=f)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(h)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}}(h)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[v+1])},geometry:{type:"Point",coordinates:g}})}}}return{type:"FeatureCollection",features:n}}},{key:"getNearestPoint",value:function(t,e,n){if(t.geometry.coordinates.some(function(t){return t.length>2})){if(n)return(0,s.nearestPointOnProjectedLine)(t,e,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,r.default)(t,e)}},{key:"handleDragging",value:function(t,e){var n=(0,s.getPickedEditHandle)(t.pointerDownPicks);if(n){t.cancelPan();var r=n.properties,o=this.getSelectedFeature(e),c=(0,u.default)(o).geometry.coordinates,f=Object.entries(o.geometry.coordinates[0]).length-1,p=Math.max((0,a.default)(c,t.mapCoords),.001),d={}.steps,h=(0,i.default)(c,p,{steps:void 0===d?f:d}).geometry,y=new l.ImmutableFeatureCollection(e.data).replaceGeometry(r.featureIndex,h).getObject();e.onEdit({updatedData:y,editType:"unionGeometry",editContext:{featureIndexes:[r.featureIndex]}})}}},{key:"handlePointerMove",value:function(t,e){if(!this._isResizing){var n=(0,s.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"intermediate"===n.properties.editHandleType?n:null}var r=this.getCursor(t);e.onUpdateCursor(r)}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isResizing=!0)}},{key:"handleStopDragging",value:function(t,e){this._isResizing&&(this._selectedEditHandle=null,this._isResizing=!1)}},{key:"getCursor",value:function(t){var e=t&&t.picks||[];return(0,s.getPickedEditHandles)(e).length?"cell":null}}],h(f.prototype,e),n&&h(f,n),f}(c.GeoJsonEditMode);e.ResizeCircleMode=b},10083:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RotateMode=void 0;var r=g(n(9705)),o=g(n(66338)),i=g(n(51208)),a=g(n(13652)),u=g(n(31013)),s=n(31540),c=n(10611),l=n(84102),f=g(n(90067)),p=g(n(97383)),d=n(70875),h=n(32254),y=n(76302);function g(t){return t&&t.__esModule?t:{default:t}}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(O,t);var e,n,g=function(){var t,e,n=E(O);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=E(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===v(t)||"function"==typeof t)?t:b(this)};function O(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,O);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return _(b(t=g.call.apply(g,[this].concat(n))),"_selectedEditHandle",void 0),_(b(t),"_geometryBeingRotated",void 0),_(b(t),"_isRotating",!1),_(b(t),"_isSinglePointGeometrySelected",function(t){var e=(t||{}).features;return!!Array.isArray(e)&&1===e.length&&"Point"===(0,c.getGeom)(e[0]).type}),_(b(t),"getIsRotating",function(){return t._isRotating}),t}return e=[{key:"getGuides",value:function(t){var e=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};if(this._isRotating)return(0,l.featureCollection)([(0,o.default)(e)]);var n=(0,a.default)((0,r.default)(e)),i=null,c=null,f=0;(0,s.coordEach)(n,function(t){if(i){var e=(0,h.getIntermediatePosition)(t,i);(!c||e[1]>c[1])&&(c=e),f=Math.max(f,(0,u.default)(t,i))}i=t});var d=c&&[c[0],c[1]+f/1e3],y=(0,l.lineString)([c,d]),g=(0,l.point)(d,{guideType:"editHandle",editHandleType:"rotate"});return(0,l.featureCollection)([(0,p.default)(n),g,y])}},{key:"handleDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotating",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){if(!this._isRotating){var n=(0,d.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"rotate"===n.properties.editHandleType?n:null}this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotated",e);n&&e.onEdit(n),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}},{key:"updateCursor",value:function(t){this._selectedEditHandle?t.onUpdateCursor("crosshair"):t.onUpdateCursor(null)}},{key:"getRotateAction",value:function(t,e,n,r){if(!this._geometryBeingRotated)return null;for(var a,u=(0,o.default)(this._geometryBeingRotated),s=(a=(0,i.default)(u,t),(0,i.default)(u,e)-a),c=(0,f.default)(this._geometryBeingRotated,s,{pivot:u}),l=new y.ImmutableFeatureCollection(r.data),p=r.selectedIndexes,d=0;d<p.length;d++){var h=p[d],g=c.features[d];l=l.replaceGeometry(h,g.geometry)}return{updatedData:l.getObject(),editType:n,editContext:{featureIndexes:p}}}}],m(O.prototype,e),n&&m(O,n),O}(h.GeoJsonEditMode);e.RotateMode=O},45892:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScaleMode=void 0;var r=g(n(9705)),o=g(n(66338)),i=g(n(51208)),a=g(n(13652)),u=n(84102),s=g(n(97383)),c=n(31540),l=g(n(31013)),f=g(n(67517)),p=n(10611),d=n(70875),h=n(32254),y=n(76302);function g(t){return t&&t.__esModule?t:{default:t}}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(g,t);var e,n,h=function(){var t,e,n=P(g);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=P(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===v(t)||"function"==typeof t)?t:E(this)};function g(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,g);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return O(E(t=h.call.apply(h,[this].concat(n))),"_geometryBeingScaled",void 0),O(E(t),"_selectedEditHandle",void 0),O(E(t),"_cornerGuidePoints",void 0),O(E(t),"_cursor",void 0),O(E(t),"_isScaling",!1),O(E(t),"_isSinglePointGeometrySelected",function(t){var e=(t||{}).features;return!!Array.isArray(e)&&1===e.length&&"Point"===(0,p.getGeom)(e[0]).type}),O(E(t),"_getOppositeScaleHandle",function(e){var n=e&&e.properties&&Array.isArray(e.properties.positionIndexes)&&e.properties.positionIndexes[0];if("number"!=typeof n)return null;var r=t._cornerGuidePoints.length,o=(n+r/2)%r;return t._cornerGuidePoints.find(function(t){return!!Array.isArray(t.properties.positionIndexes)&&t.properties.positionIndexes[0]===o})}),O(E(t),"_getUpdatedData",function(t,e){for(var n=new y.ImmutableFeatureCollection(t.data),r=t.selectedIndexes,o=0;o<r.length;o++){var i=r[o],a=e.features[o];n=n.replaceGeometry(i,a.geometry)}return n.getObject()}),O(E(t),"isEditHandleSelected",function(){return!!t._selectedEditHandle}),O(E(t),"getScaleAction",function(e,n,r,o){if(!t._selectedEditHandle)return null;var i,a=t._getOppositeScaleHandle(t._selectedEditHandle),u=(0,p.getCoord)(a),s=(i=(0,l.default)(u,e),(0,l.default)(u,n)/i),c=(0,f.default)(t._geometryBeingScaled,s,{origin:u});return{updatedData:t._getUpdatedData(o,c),editType:r,editContext:{featureIndexes:o.selectedIndexes}}}),O(E(t),"updateCursor",function(e){if(t._selectedEditHandle){t._cursor&&e.onUpdateCursor(t._cursor);var n=t.getSelectedFeaturesAsFeatureCollection(e),r=(0,o.default)(n),a=(0,i.default)(r,t._selectedEditHandle),u=a<0?a+180:a;u>=0&&u<=90||u>=180&&u<=270?(t._cursor="nesw-resize",e.onUpdateCursor("nesw-resize")):(t._cursor="nwse-resize",e.onUpdateCursor("nwse-resize"))}else e.onUpdateCursor(null),t._cursor=null}),t}return e=[{key:"handlePointerMove",value:function(t,e){if(!this._isScaling){var n=(0,d.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"scale"===n.properties.editHandleType?n:null,this.updateCursor(e)}}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleDragging",value:function(t,e){if(this._isScaling){e.onUpdateCursor(this._cursor);var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaling",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handleStopDragging",value:function(t,e){if(this._isScaling){var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaled",e);n&&e.onEdit(n),e.onUpdateCursor(null),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}},{key:"getGuides",value:function(t){this._cornerGuidePoints=[];var e,n=this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(n))return{type:"FeatureCollection",features:[]};var o=(0,a.default)((0,r.default)(n));o.properties.mode="scale";var i=[];return(0,c.coordEach)(o,function(t,e){if(e<4){var n=(0,u.point)(t,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[e]});i.push(n)}}),this._cornerGuidePoints=i,(0,u.featureCollection)([(0,s.default)(o)].concat(function(t){if(Array.isArray(t))return m(t)}(e=this._cornerGuidePoints)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}}],b(g.prototype,e),n&&b(g,n),g}(h.GeoJsonEditMode);e.ScaleMode=S},93816:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SnappableMode=void 0;var r=n(70875);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(h,t);var e,n,u=function(){var t,e,n=f(h);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===o(t)||"function"==typeof t)?t:l(this)};function h(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,h),d(l(e=u.call(this)),"_handler",void 0),e._handler=t,e}return e=[{key:"_getSnappedMouseEvent",value:function(t,e,n){return Object.assign(t,{mapCoords:n.geometry.coordinates,pointerDownMapCoords:e&&e.geometry.coordinates})}},{key:"_getPickedSnapTarget",value:function(t){return(0,r.getPickedEditHandles)(t).find(function(t){return"snap-target"===t.properties.editHandleType})}},{key:"_getPickedSnapSource",value:function(t){return(0,r.getPickedSnapSourceEditHandle)(t)}},{key:"_getUpdatedSnapSourceHandle",value:function(t,e){var n=t.properties,r=n.featureIndex,o=n.positionIndexes;if(!Array.isArray(o))return t;var i=e.features[r];return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){d(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t,{geometry:{type:"Point",coordinates:o.reduce(function(t,e){return t[e]},i.geometry.coordinates)}})}},{key:"_getSnapTargets",value:function(t){var e=(t.modeConfig||{}).additionalSnapTargets;return e=e||[],[].concat(i(t.data.features),i(e))}},{key:"_getSnapTargetHandles",value:function(t){for(var e=[],n=this._getSnapTargets(t),o=0;o<n.length;o++)if(!t.selectedIndexes.includes(o)){var a=n[o].geometry;e.push.apply(e,i((0,r.getEditHandlesForGeometry)(a,o,"snap-target")))}return e}},{key:"getGuides",value:function(t){var e=t.modeConfig,n=t.lastPointerMoveEvent,o=(e||{}).enableSnapping,u={type:"FeatureCollection",features:i(this._handler.getGuides(t).features)};if(!o)return u;var s=n&&this._getPickedSnapSource(n.pointerDownPicks);if(s)return(c=u.features).push.apply(c,i(this._getSnapTargetHandles(t)).concat([this._getUpdatedSnapSourceHandle(s,t.data)])),u;var c,l,f=t.data.features,p=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}(t.selectedIndexes);try{for(p.s();!(l=p.n()).done;){var d=l.value;if(d<f.length){var h,y=f[d].geometry;(h=u.features).push.apply(h,i((0,r.getEditHandlesForGeometry)(y,d,"snap-source")))}}}catch(t){p.e(t)}finally{p.f()}return u}},{key:"_getSnapAwareEvent",value:function(t,e){var n=this._getPickedSnapSource(e.lastPointerMoveEvent.pointerDownPicks),r=this._getPickedSnapTarget(t.picks);return n&&r?this._getSnappedMouseEvent(t,n,r):t}},{key:"handleStartDragging",value:function(t,e){this._handler.handleStartDragging(t,e)}},{key:"handleStopDragging",value:function(t,e){this._handler.handleStopDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handleDragging",value:function(t,e){this._handler.handleDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handlePointerMove",value:function(t,e){this._handler.handlePointerMove(this._getSnapAwareEvent(t,e),e)}}],c(h.prototype,e),n&&c(h,n),h}(n(32254).GeoJsonEditMode);e.SnappableMode=h},6548:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SplitPolygonMode=void 0;var r=g(n(88147)),o=g(n(68727)),i=g(n(35419)),a=g(n(73663)),u=n(84102),s=g(n(51208)),c=g(n(31013)),l=g(n(93737)),f=g(n(97383)),p=g(n(13807)),d=n(70875),h=n(32254),y=n(76302);function g(t){return t&&t.__esModule?t:{default:t}}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(g,t);var e,n,h=function(){var t,e,n=P(g);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=P(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===v(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function g(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,g),h.apply(this,arguments)}return e=[{key:"calculateMapCoords",value:function(t,e,n){var r,o=n.modeConfig;if(!o||!o.lock90Degree||!t.length)return e;if(1===t.length){var i=t[0],a=this.getSelectedGeometry(n),h=(0,f.default)(a),y="FeatureCollection"===h.type?h.features:[h],g=Number.MAX_SAFE_INTEGER,v=null;if(y.forEach(function(t){var e=(0,p.default)(t,i),n=(0,c.default)(e,i);g>n&&(g=n,v=e)}),v){var b=(0,s.default)(i,v),E=(0,c.default)(i,e,{units:"meters"});return(0,l.default)(i,E,b,{units:"meters"}).geometry.coordinates}return e}var P=t[t.length-1],_=(function(t){if(Array.isArray(t))return t}(r=(0,d.generatePointsParallelToLinePoints)(t[t.length-2],P,e))||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(r,1)||m(r,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,p.default)((0,u.lineString)([P,_]),e).geometry.coordinates}},{key:"getGuides",value:function(t){var e=this.getClickSequence(),n={type:"FeatureCollection",features:[]};if(0===e.length||!t.lastPointerMoveEvent)return n;var r=t.lastPointerMoveEvent.mapCoords;return n.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(function(t){if(Array.isArray(t))return b(t)}(e)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(e)||m(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[this.calculateMapCoords(e,r,t)])}}),n}},{key:"handleClick",value:function(t,e){var n=this.getTentativeGuide(e),o=this.getSelectedGeometry(e);if(!o){console.warn("A polygon must be selected for splitting");return}var i=this.getClickSequence();n&&"LineString"===n.geometry.type?i.push(n.geometry.coordinates[n.geometry.coordinates.length-1]):this.addClickSequence(t);var u={type:"Point",coordinates:i[i.length-1]},s=(0,r.default)(u,o);if(i.length>1&&n&&!s){if(this.resetClickSequence(),0===(0,a.default)(n,o).features.length)return;var c=this.splitPolygon(n,e);c&&e.onEdit(c)}}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"splitPolygon",value:function(t,e){var n=this.getSelectedGeometry(e),r=e.selectedIndexes[0],a=e.modeConfig||{},u=a.gap,s=void 0===u?.1:u,c=a.units,l=void 0===c?"centimeters":c;0===s&&(s=.1,l="centimeters");var f=(0,i.default)(t,s,{units:l}),p=(0,o.default)(n,f);if(!p)return console.warn("Canceling edit. Split Polygon erased"),null;var d=p.geometry,h=d.type,g=d.coordinates,v=[];return v="Polygon"===h?g.map(function(t){return[t]}):g.reduce(function(t,e){return e.forEach(function(e){t.push([e])}),t},[]),{updatedData:new y.ImmutableFeatureCollection(e.data).replaceGeometry(r,{type:"MultiPolygon",coordinates:v}).getObject(),editType:"split",editContext:{featureIndexes:[r]}}}}],E(g.prototype,e),n&&E(g,n),g}(h.GeoJsonEditMode);e.SplitPolygonMode=O},1658:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ThreeClickPolygonMode=void 0;var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(c,t);var e,n,s=function(){var t,e,n=a(c);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var o=a(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(t=e)&&("object"===r(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function c(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return e=[{key:"handleClick",value:function(t,e){this.addClickSequence(t);var n=this.getClickSequence(),r=this.getTentativeGuide(e);if(n.length>2&&r&&"Polygon"===r.geometry.type){var o=this.getAddFeatureOrBooleanPolygonAction(r.geometry,e);this.resetClickSequence(),o&&e.onEdit(o)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),o={type:"FeatureCollection",features:[]};if(0===r.length)return o;var i=e.mapCoords;if(1===r.length)o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[0],i]}});else{var a=this.getThreeClickPolygon(r[0],r[1],i,n);a&&o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:a.geometry})}return o}},{key:"getThreeClickPolygon",value:function(t,e,n,r){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),i(a(c.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),o=n?[n.mapCoords]:[];return 2===r.length&&(e=this.getThreeClickPolygon(r[0],r[1],o[0],t.modeConfig)),e}}],o(c.prototype,e),n&&o(c,n),c}(n(32254).GeoJsonEditMode);e.ThreeClickPolygonMode=s},44061:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransformMode=void 0;var r=n(84102),o=n(76166),i=n(45892),a=n(10083);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(h,t);var e,n,d=function(){var t,e,n=f(h);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===u(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function h(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,h),d.call(this,[new o.TranslateMode,new i.ScaleMode,new a.RotateMode])}return e=[{key:"handlePointerMove",value:function(t,e){var n=null;l(f(h.prototype),"handlePointerMove",this).call(this,t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){var r;r=n[e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{onUpdateCursor:function(t){n=t||n}})),e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=null,r=null,a=[];this._modes.forEach(function(t){t instanceof o.TranslateMode?r=t:(t instanceof i.ScaleMode&&(n=t),a.push(t))}),n instanceof i.ScaleMode&&!n.isEditHandleSelected()&&a.push(r),a.filter(Boolean).forEach(function(n){return n.handleStartDragging(t,e)})}},{key:"getGuides",value:function(t){var e=l(f(h.prototype),"getGuides",this).call(this,t),n=(this._modes||[]).find(function(t){return t instanceof a.RotateMode});if(n instanceof a.RotateMode){var o=e.features.filter(function(t){var e=t.properties||{},r=e.editHandleType,o=[e.mode];return n.getIsRotating()&&o.push(r),!o.includes("scale")});e=(0,r.featureCollection)(o)}return e}}],c(h.prototype,e),n&&c(h,n),h}(n(48874).CompositeMode);e.TransformMode=d},76166:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TranslateMode=void 0;var r=f(n(51208)),o=f(n(31013)),i=f(n(92418)),a=n(84102),u=f(n(19319)),s=n(70875),c=n(32254),l=n(76302);function f(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(f,t);var e,n,c=function(){var t,e,n=y(f);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=y(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===p(t)||"function"==typeof t)?t:h(this)};function f(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,f);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return v(h(t=c.call.apply(c,[this].concat(n))),"_geometryBeforeTranslate",void 0),v(h(t),"_isTranslatable",void 0),t}return e=[{key:"handleDragging",value:function(t,e){if(this._isTranslatable){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translating",e);n&&e.onEdit(n)}t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){this._isTranslatable=this.isSelectionPicked(t.pointerDownPicks||t.picks,e),this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translated",e);n&&e.onEdit(n),this._geometryBeforeTranslate=null}}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("move"):t.onUpdateCursor(null)}},{key:"getTranslateAction",value:function(t,e,n,c){var f=this;if(!this._geometryBeforeTranslate)return null;var p=new l.ImmutableFeatureCollection(c.data),d=c.selectedIndexes,h=c.modeConfig||{},y=h.viewport,g=h.screenSpace;if(y&&g)!function(){for(var n=y.project?y:new u.default(y),r=n.project(t),o=n.project(e),i=o[0]-r[0],a=o[1]-r[1],c=0;c<d.length;c++){var l=d[c],h=f._geometryBeforeTranslate.features[c],g=h.geometry.coordinates;g&&(g=(0,s.mapCoords)(g,function(t){var e=n.project(t);return e?(e[0]+=i,e[1]+=a,n.unproject(e)):null}),p=p.replaceGeometry(l,{type:h.geometry.type,coordinates:g}))}}();else for(var v=(0,a.point)(t),m=(0,a.point)(e),b=(0,o.default)(v,m),E=(0,r.default)(v,m),P=(0,i.default)(this._geometryBeforeTranslate,b,E),_=0;_<d.length;_++){var O=d[_],S=P.features[_];p=p.replaceGeometry(O,S.geometry)}return{updatedData:p.getObject(),editType:n,editContext:{featureIndexes:d}}}}],d(f.prototype,e),n&&d(f,n),f}(c.GeoJsonEditMode);e.TranslateMode=m},23124:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TwoClickPolygonMode=void 0;var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(c,t);var e,n,s=function(){var t,e,n=a(c);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var o=a(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return(t=e)&&("object"===r(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function c(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,c),s.apply(this,arguments)}return e=[{key:"handleClick",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw||(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"handleStartDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),t.cancelPan())}},{key:"handleStopDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"checkAndFinishPolygon",value:function(t){var e=this.getClickSequence(),n=this.getTentativeGuide(t);if(e.length>1&&n&&"Polygon"===n.geometry.type){var r={type:"Feature",properties:{shape:n.properties.shape},geometry:{type:"Polygon",coordinates:n.geometry.coordinates}},o=this.getAddFeatureOrBooleanPolygonAction(r,t);this.resetClickSequence(),o&&t.onEdit(o)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),o={type:"FeatureCollection",features:[]};if(0===r.length)return o;var i=r[0],a=e.mapCoords,u=this.getTwoClickPolygon(i,a,n);return u&&o.features.push({type:"Feature",properties:{shape:u.properties&&u.properties.shape,guideType:"tentative"},geometry:u.geometry}),o}},{key:"getTwoClickPolygon",value:function(t,e,n){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),i(a(c.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),o=n?[n.mapCoords]:[];return 1===r.length&&(e=this.getTwoClickPolygon(r[0],o[0],t.modeConfig)),e}}],o(c.prototype,e),n&&o(c,n),c}(n(32254).GeoJsonEditMode);e.TwoClickPolygonMode=s},15279:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ViewMode=void 0;var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(n,t);var e=function(){var t,e,i=o(n);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var a=o(this).constructor;e=Reflect.construct(i,arguments,a)}else e=i.apply(this,arguments);return(t=e)&&("object"===r(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function n(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),e.apply(this,arguments)}return n}(n(32254).GeoJsonEditMode);e.ViewMode=a},23916:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n={};return function(r){for(var o in r)if(!function(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}(r[o],n[o])){e=t(r),n=r;break}return e}}},70875:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];return Array.isArray(t)?[255*t[0],255*t[1],255*t[2],255*t[3]]:e},e.recursivelyTraverseNestedArrays=function t(e,n,r){if(!Array.isArray(e[0]))return!0;for(var o=0;o<e.length;o++)if(t(e[o],[].concat(p(n),[o]),r)){r(e,n);break}return!1},e.generatePointsParallelToLinePoints=function(t,e,n){var a=(0,u.point)(n),s=(0,i.default)(a,{type:"LineString",coordinates:[t,e]}),c=(0,o.default)(t,e),l=(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])<0?c-90:c-270,f=(0,r.default)(e,s,l),p=(0,r.default)(t,s,l);return[f.geometry.coordinates,p.geometry.coordinates]},e.distance2d=y,e.mix=g,e.nearestPointOnProjectedLine=function(t,e,n){var r=new c.default(n),o=t.geometry.coordinates.map(function(t){var e=f(t,3),n=e[0],o=e[1],i=e[2],a=void 0===i?0:i;return r.project([n,o,a])}),i=f(r.project(e.geometry.coordinates),2),a=i[0],u=i[1],s=1/0,l={};o.forEach(function(t,e){var n=f(t,2),r=n[0],i=n[1];if(0!==e){var c=f(o[e-1],2),p=c[0],d=c[1],h=d-i,y=r-p,g=p*i-r*d,v=h*h+y*y,m=Math.abs(h*a+y*u+g)/Math.sqrt(v);m<s&&(s=m,l={index:e,x0:(y*(y*a-h*u)-h*g)/v,y0:(h*(-y*a+h*u)-y*g)/v})}});var p=l,d=p.index,h=p.x0,v=p.y0,m=f(o[d-1],3),b=m[0],E=m[1],P=m[2],_=f(o[d],3),O=_[0],S=_[1],w=_[2],M=y(b,E,O,S),x=g(void 0===P?0:P,void 0===w?0:w,y(b,E,h,v)/M);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([h,v,x])},properties:{dist:s,index:d-1}}},e.nearestPointOnLine=function(t,e,n){n&&(i=new c.default(n));var r,o,i,l=(0,u.point)([1/0,1/0],{dist:1/0});return(null===(r=t.geometry)||void 0===r?void 0:r.coordinates.length)&&!((null===(o=t.geometry)||void 0===o?void 0:o.coordinates.length)<2)&&(0,a.flattenEach)(t,function(t){var n=(0,s.getCoords)(t),r=(0,s.getCoords)(e);if(n.length>1&&r.length){i?(y=n.map(function(t){return i.project(t)}),g=i.project(r)):(y=n,g=r);for(var o,a,c,f,p,d,h,y,g,v=1;v<y.length;v++){if(y[v][0]!==y[v-1][0]){var m=(y[v][1]-y[v-1][1])/(y[v][0]-y[v-1][0]),b=y[v][1]-m*y[v][0];h=Math.abs(m*g[0]+b-g[1])/Math.sqrt(m*m+1)}else h=Math.abs(g[0]-y[v][0]);var E=Math.pow(y[v][1]-y[v-1][1],2)+Math.pow(y[v][0]-y[v-1][0],2),P=Math.pow(y[v][1]-g[1],2)+Math.pow(y[v][0]-g[0],2),_=Math.pow(y[v-1][1]-g[1],2)+Math.pow(y[v-1][0]-g[0],2),O=Math.pow(h,2),S=P-O+_-O;S>E&&(h=Math.sqrt(Math.min(P,_))),(null==o||o>h)&&(S>E?_<P?(a=0,c=1):(c=0,a=1):(a=Math.sqrt(_-O)/Math.sqrt(E),c=Math.sqrt(P-O)/Math.sqrt(E)),o=h,d=v)}var w=y[d-1][0]-y[d][0],M=y[d-1][1]-y[d][1];f=y[d-1][0]-w*a,p=y[d-1][1]-M*a}var x={x:f,y:p,idx:d-1,to:a,from:c};if(i){var j=i.unproject([x.x,x.y]);x={x:j[0],y:j[1],idx:d-1,to:a,from:c}}l=(0,u.point)([x.x,x.y],{dist:Math.abs(x.from-x.to),index:x.idx})}),l},e.getPickedEditHandle=function(t){var e=v(t);return e.length?e[0]:null},e.getPickedSnapSourceEditHandle=function(t){return v(t).find(function(t){return"snap-source"===t.properties.editHandleType})},e.getNonGuidePicks=function(t){return t&&t.filter(function(t){return!t.isGuide})},e.getPickedExistingEditHandle=function(t){return v(t).find(function(t){var e=t.properties;return e.featureIndex>=0&&"existing"===e.editHandleType})},e.getPickedIntermediateEditHandle=function(t){return v(t).find(function(t){var e=t.properties;return e.featureIndex>=0&&"intermediate"===e.editHandleType})},e.getPickedEditHandles=v,e.getEditHandlesForGeometry=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"existing",r=[];switch(t.type){case"Point":r=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:n,positionIndexes:[],featureIndex:e},geometry:{type:"Point",coordinates:t.coordinates}}];break;case"MultiPoint":case"LineString":r=r.concat(m(t.coordinates,[],e,n));break;case"Polygon":case"MultiLineString":for(var o=0;o<t.coordinates.length;o++)r=r.concat(m(t.coordinates[o],[o],e,n)),"Polygon"===t.type&&(r=r.slice(0,-1));break;case"MultiPolygon":for(var i=0;i<t.coordinates.length;i++)for(var a=0;a<t.coordinates[i].length;a++)r=(r=r.concat(m(t.coordinates[i][a],[i,a],e,n))).slice(0,-1);break;default:throw Error("Unhandled geometry type: ".concat(t.type))}return r},e.updateRectanglePosition=function(t,e,n){var r=t.geometry.coordinates;if(!r)return null;var o=r[0].slice(0,4);o[e%4]=n;var i=o[(e+2)%4],a=o[e%4];return o[(e+1)%4]=[a[0],i[1]],o[(e+3)%4]=[i[0],a[1]],[[].concat(p(o),[o[0]])]},e.mapCoords=function t(e,n){return"number"==typeof e[0]?!isNaN(e[0])&&isFinite(e[0])?n(e):e:e.map(function(e){return t(e,n)}).filter(Boolean)};var r=l(n(93737)),o=l(n(51208)),i=l(n(63892)),a=n(31540),u=n(84102),s=n(10611),c=l(n(19319));function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,e)||d(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||d(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e,n,r){var o=t-n,i=e-r;return Math.sqrt(o*o+i*i)}function g(t,e,n){return e*n+t*(1-n)}function v(t){return t&&t.filter(function(t){return t.isGuide&&"editHandle"===t.object.properties.guideType}).map(function(t){return t.object})||[]}function m(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"existing",o=[],i=0;i<t.length;i++){var a=t[i];o.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[].concat(p(e),[i]),featureIndex:n,editHandleType:r},geometry:{type:"Point",coordinates:a}})}return o}},25913:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(51208)),i=r(n(93737)),a=r(n(31013)),u=n(84102),s=n(10611);e.default=function(t,e,n){void 0===n&&(n={});for(var r=s.getGeom(t).coordinates,c=0,l=0;l<r.length&&(!(e>=c)||l!==r.length-1);l++){if(c>=e){var f=e-c;if(!f)return u.point(r[l]);var p=o.default(r[l],r[l-1])-180;return i.default(r[l],f,p,n)}c+=a.default(r[l],r[l+1],n)}return u.point(r[r.length-1])}},41070:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31540);function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(i(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(i(t[n]))}return e}function i(t){var e,n,r,o,i,u,s=0,c=t.length;if(c>2){for(u=0;u<c;u++)u===c-2?(r=c-2,o=c-1,i=0):u===c-1?(r=c-1,o=0,i=1):(r=u,o=u+1,i=u+2),e=t[r],n=t[o],s+=(a(t[i][0])-a(e[0]))*Math.sin(a(n[1]));s=40680631590769*s/2}return s}function a(t){return t*Math.PI/180}e.default=function(t){return r.geomReduce(t,function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return o(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=o(t.coordinates[e]);return n}return 0}(e)},0)}},13652:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102);e.default=function(t,e){void 0===e&&(e={});var n=Number(t[0]),o=Number(t[1]),i=Number(t[2]),a=Number(t[3]);if(6===t.length)throw Error("@turf/bbox-polygon does not support BBox with 6 positions");var u=[n,o],s=[n,a],c=[i,a],l=[i,o];return r.polygon([[u,l,c,s,u]],e.properties,{bbox:t,id:e.id})}},9705:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31540);function o(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}o.default=o,e.default=o},51208:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611);e.default=function t(e,n,i){if(void 0===i&&(i={}),!0===i.final)return(t(n,e)+180)%360;var a=o.getCoord(e),u=o.getCoord(n),s=r.degreesToRadians(a[0]),c=r.degreesToRadians(u[0]),l=r.degreesToRadians(a[1]),f=r.degreesToRadians(u[1]),p=Math.sin(c-s)*Math.cos(f),d=Math.cos(l)*Math.sin(f)-Math.sin(l)*Math.cos(f)*Math.cos(c-s);return r.radiansToDegrees(Math.atan2(p,d))}},3809:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10611);e.default=function(t){for(var e,n,o=r.getCoords(t),i=0,a=1;a<o.length;)e=n||o[0],i+=((n=o[a])[0]-e[0])*(n[1]+e[1]),a++;return i>0}},88147:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10611);function o(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,i=e.length-1;o<e.length;i=o++){var a=e[o][0],u=e[o][1],s=e[i][0],c=e[i][1];if(t[1]*(a-s)+u*(s-t[0])+c*(t[0]-a)==0&&(a-t[0])*(s-t[0])<=0&&(u-t[1])*(c-t[1])<=0)return!n;u>t[1]!=c>t[1]&&t[0]<(s-a)*(t[1]-u)/(c-u)+a&&(r=!r)}return r}e.default=function(t,e,n){if(void 0===n&&(n={}),!t)throw Error("point is required");if(!e)throw Error("polygon is required");var i=r.getCoord(t),a=r.getGeom(e),u=a.type,s=e.bbox,c=a.coordinates;if(s&&!1==(s[0]<=i[0]&&s[1]<=i[1]&&s[2]>=i[0]&&s[3]>=i[1]))return!1;"Polygon"===u&&(c=[c]);for(var l=!1,f=0;f<c.length&&!l;f++)if(o(i,c[f][0],n.ignoreBoundary)){for(var p=!1,d=1;d<c[f].length&&!p;)o(i,c[f][d],!n.ignoreBoundary)&&(p=!0),d++;p||(l=!0)}return l}},35419:function(t,e,n){"use strict";var r=n(78230),o=n(20675),i=n(31540),a=n(2167),u=n(84102),s=r&&"object"==typeof r&&"default"in r?r:{default:r};function c(t,e,n){var r=(n=n||{}).units||"kilometers",o=n.steps||8;if(!t)throw Error("geojson is required");if("object"!=typeof n)throw Error("options must be an object");if("number"!=typeof o)throw Error("steps must be an number");if(void 0===e)throw Error("radius is required");if(o<=0)throw Error("steps must be greater than 0");var a=[];switch(t.type){case"GeometryCollection":return i.geomEach(t,function(t){var n=l(t,e,r,o);n&&a.push(n)}),u.featureCollection(a);case"FeatureCollection":return i.featureEach(t,function(t){var n=l(t,e,r,o);n&&i.featureEach(n,function(t){t&&a.push(t)})}),u.featureCollection(a)}return l(t,e,r,o)}function l(t,e,n,r){var c,f,p=t.properties||{},d="Feature"===t.type?t.geometry:t;if("GeometryCollection"===d.type){var h=[];return i.geomEach(t,function(t){var o=l(t,e,n,r);o&&h.push(o)}),u.featureCollection(h)}var y=(f=[-(c=s.default(d).geometry.coordinates)[0],-c[1]],a.geoAzimuthalEquidistant().rotate(f).scale(u.earthRadius)),g={type:d.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n(e):e.map(function(e){return t(e,n)})}(d.coordinates,y)},v=new o.GeoJSONReader().read(g),m=u.radiansToLength(u.lengthToRadians(e,n),"meters"),b=o.BufferOp.bufferOp(v,m,r);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((b=new o.GeoJSONWriter().write(b)).coordinates)){var E={type:b.type,coordinates:function t(e,n){return"object"!=typeof e[0]?n.invert(e):e.map(function(e){return t(e,n)})}(b.coordinates,y)};return u.feature(E,p)}}t.exports=c,t.exports.default=c},78230:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(9705)),i=n(84102);e.default=function(t,e){void 0===e&&(e={});var n=o.default(t),r=(n[0]+n[2])/2,a=(n[1]+n[3])/2;return i.point([r,a],e.properties,e)}},66338:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31540),o=n(84102);e.default=function(t,e){void 0===e&&(e={});var n=0,i=0,a=0;return r.coordEach(t,function(t){n+=t[0],i+=t[1],a++},!0),o.point([n/a,i/a],e.properties)}},90265:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(93737)),i=n(84102);e.default=function(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,a=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},u=[],s=0;s<r;s++)u.push(o.default(t,e,-360*s/r,n).geometry.coordinates);return u.push(u[0]),i.polygon([u],a)}},76565:function(t,e){"use strict";function n(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=function t(e){var n={};return e&&Object.keys(e).forEach(function(r){var o=e[r];"object"==typeof o?null===o?n[r]=null:Array.isArray(o)?n[r]=o.map(function(t){return t}):n[r]=t(o):n[r]=o}),n}(t.properties),e.geometry=r(t.geometry),e}function r(t){var e={type:t.type};return(t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type)?(e.geometries=t.geometries.map(function(t){return r(t)}),e):(e.coordinates=function t(e){return"object"!=typeof e[0]?e.slice():e.map(function(e){return t(e)})}(t.coordinates),e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t)throw Error("geojson is required");switch(t.type){case"Feature":return n(t);case"FeatureCollection":var e;return e={type:"FeatureCollection"},Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return n(t)}),e;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return r(t);default:throw Error("unknown GeoJSON type")}}},93737:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611);e.default=function(t,e,n,i){void 0===i&&(i={});var a=o.getCoord(t),u=r.degreesToRadians(a[0]),s=r.degreesToRadians(a[1]),c=r.degreesToRadians(n),l=r.lengthToRadians(e,i.units),f=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(c)),p=u+Math.atan2(Math.sin(c)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(f)),d=r.radiansToDegrees(p),h=r.radiansToDegrees(f);return r.point([d,h],i.properties)}},68727:function(t,e,n){"use strict";var r=n(32676),o=n(84102),i=n(10611),a=r&&"object"==typeof r&&"default"in r?r:{default:r};function u(t,e){var n=i.getGeom(t),r=i.getGeom(e),u=t.properties||{},s=a.default.difference(n.coordinates,r.coordinates);return 0===s.length?null:1===s.length?o.polygon(s[0],u):o.multiPolygon(s,u)}t.exports=u,t.exports.default=u},31013:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10611),o=n(84102);e.default=function(t,e,n){void 0===n&&(n={});var i=r.getCoord(t),a=r.getCoord(e),u=Math.pow(Math.sin(o.degreesToRadians(a[1]-i[1])/2),2)+Math.pow(Math.sin(o.degreesToRadians(a[0]-i[0])/2),2)*Math.cos(o.degreesToRadians(i[1]))*Math.cos(o.degreesToRadians(a[1]));return o.radiansToLength(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),n.units)}},61211:function(t,e,n){"use strict";var r=n(84102),o=n(62054),i=n(90067),a=n(10611);function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=u(o),c=u(i);function l(t,e,n,o){var i=(o=o||{}).steps||64,u=o.units||"kilometers",l=o.angle||0,p=o.pivot||t,d=o.properties||t.properties||{};if(!t)throw Error("center is required");if(!e)throw Error("xSemiAxis is required");if(!n)throw Error("ySemiAxis is required");if(!r.isObject(o))throw Error("options must be an object");if(!r.isNumber(i))throw Error("steps must be a number");if(!r.isNumber(l))throw Error("angle must be a number");var h=a.getCoord(t);if("degrees"===u)var y=r.degreesToRadians(l);else e=s.default(t,e,90,{units:u}),n=s.default(t,n,0,{units:u}),e=a.getCoord(e)[0]-h[0],n=a.getCoord(n)[1]-h[1];for(var g=[],v=0;v<i;v+=1){var m=-360*v/i,b=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(f(m),2)),E=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(f(m),2));if(m<-90&&m>=-270&&(b=-b),m<-180&&m>=-360&&(E=-E),"degrees"===u){var P=b*Math.cos(y)+E*Math.sin(y),_=E*Math.cos(y)-b*Math.sin(y);b=P,E=_}g.push([b+h[0],E+h[1]])}return(g.push(g[0]),"degrees"===u)?r.polygon([g],d):c.default(r.polygon([g],d),l,{pivot:p})}function f(t){return Math.tan(t*Math.PI/180)}t.exports=l,t.exports.default=l},84102:function(t,e){"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw Error("coordinates is required");if(!Array.isArray(t))throw Error("coordinates must be an Array");if(t.length<2)throw Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function o(t,e,r){void 0===r&&(r={});for(var o=0;o<t.length;o++){var i=t[o];if(i.length<4)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function i(t,e,r){if(void 0===r&&(r={}),t.length<2)throw Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function l(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw Error(n+" units is invalid");return t*r}function f(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw Error(n+" units is invalid");return t/r}function p(t){return 180*(t%(2*Math.PI))/Math.PI}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return i(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return s(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map(function(t){return r(t,e)}),n)},e.polygon=o,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map(function(t){return o(t,e)}),n)},e.lineString=i,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map(function(t){return i(t,e)}),n)},e.featureCollection=a,e.multiLineString=u,e.multiPoint=s,e.multiPolygon=c,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=l,e.lengthToRadians=f,e.lengthToDegrees=function(t,e){return p(f(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=p,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw Error("length must be a positive number");return l(f(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw Error("area must be a positive number");var o=e.areaFactors[n];if(!o)throw Error("invalid original units");var i=e.areaFactors[r];if(!i)throw Error("invalid final units");return t/o*i},e.isNumber=d,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw Error("bbox is required");if(!Array.isArray(t))throw Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!d(t))throw Error("bbox must only contain numbers")})},e.validateId=function(t){if(!t)throw Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw Error("id must be a number or a string")}},74170:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(84102),i=n(10611),a=r(n(32676));e.default=function(t,e,n){void 0===n&&(n={});var r=i.getGeom(t),u=i.getGeom(e),s=a.default.intersection(r.coordinates,u.coordinates);return 0===s.length?null:1===s.length?o.polygon(s[0],n.properties):o.multiPolygon(s,n.properties)}},10611:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102);e.getCoord=function(t){if(!t)throw Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw Error("type and name required");if(!t||t.type!==e)throw Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw Error("No feature passed");if(!n)throw Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw Error("No featureCollection passed");if(!n)throw Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,o=t.features;r<o.length;r++){var i=o[r];if(!i||"Feature"!==i.type||!i.geometry)throw Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},73663:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(84102),i=n(10611),a=r(n(54590)),u=n(31540),s=r(n(51787));function c(t,e){var n=i.getCoords(t),r=i.getCoords(e);if(2!==n.length)throw Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw Error("<intersects> line2 must only contain 2 coordinates");var a=n[0][0],u=n[0][1],s=n[1][0],c=n[1][1],l=r[0][0],f=r[0][1],p=r[1][0],d=r[1][1],h=(d-f)*(s-a)-(p-l)*(c-u),y=(p-l)*(u-f)-(d-f)*(a-l),g=(s-a)*(u-f)-(c-u)*(a-l);if(0===h)return null;var v=y/h,m=g/h;return v>=0&&v<=1&&m>=0&&m<=1?o.point([a+v*(s-a),u+v*(c-u)]):null}e.default=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=o.feature(t)),"LineString"===e.type&&(e=o.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var l=c(t,e);return l&&r.push(l),o.featureCollection(r)}var f=s.default();return f.load(a.default(e)),u.featureEach(a.default(t),function(t){u.featureEach(f.search(t),function(e){var o=c(t,e);if(o){var a=i.getCoords(o).join(",");n[a]||(n[a]=!0,r.push(o))}})}),o.featureCollection(r)}},54590:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611),i=n(31540);e.default=function(t){if(!t)throw Error("geojson is required");var e=[];return i.flattenEach(t,function(t){(function(t,e){var n=[],i=t.geometry;if(null!==i){switch(i.type){case"Polygon":n=o.getCoords(i);break;case"LineString":n=[o.getCoords(i)]}n.forEach(function(n){var o,i;(o=t.properties,i=[],n.reduce(function(t,e){var n,a,u,s,c=r.lineString([t,e],o);return c.bbox=(n=t[0],a=t[1],u=e[0],[n<u?n:u,a<(s=e[1])?a:s,n>u?n:u,a>s?a:s]),i.push(c),e}),i).forEach(function(t){t.id=e.length,e.push(t)})})}})(t,e)}),r.featureCollection(e)}},31540:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102);function o(t,e,n){if(null!==t)for(var r,i,a,u,s,c,l,f,p=0,d=0,h=t.type,y="FeatureCollection"===h,g="Feature"===h,v=y?t.features.length:1,m=0;m<v;m++){s=(f=!!(l=y?t.features[m].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var b=0;b<s;b++){var E=0,P=0;if(null!==(u=f?l.geometries[b]:l)){c=u.coordinates;var _=u.type;switch(p=n&&("Polygon"===_||"MultiPolygon"===_)?1:0,_){case null:break;case"Point":if(!1===e(c,d,m,E,P))return!1;d++,E++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],d,m,E,P))return!1;d++,"MultiPoint"===_&&E++}"LineString"===_&&E++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(i=0;i<c[r].length-p;i++){if(!1===e(c[r][i],d,m,E,P))return!1;d++}"MultiLineString"===_&&E++,"Polygon"===_&&P++}"Polygon"===_&&E++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(i=0,P=0;i<c[r].length;i++){for(a=0;a<c[r][i].length-p;a++){if(!1===e(c[r][i][a],d,m,E,P))return!1;d++}P++}E++}break;case"GeometryCollection":for(r=0;r<u.geometries.length;r++)if(!1===o(u.geometries[r],e,n))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function i(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function u(t,e){var n,r,o,i,a,u,s,c,l,f,p=0,d="FeatureCollection"===t.type,h="Feature"===t.type,y=d?t.features.length:1;for(n=0;n<y;n++){for(o=0,u=d?t.features[n].geometry:h?t.geometry:t,c=d?t.features[n].properties:h?t.properties:{},l=d?t.features[n].bbox:h?t.bbox:void 0,f=d?t.features[n].id:h?t.id:void 0,a=(s=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1;o<a;o++){if(null===(i=s?u.geometries[o]:u)){if(!1===e(null,p,c,l,f))return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,p,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<i.geometries.length;r++)if(!1===e(i.geometries[r],p,c,l,f))return!1;break;default:throw Error("Unknown Geometry Type")}}p++}}function s(t,e){u(t,function(t,n,o,i,a){var u,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":if(!1===e(r.feature(t,o,{bbox:i,id:a}),n,0))return!1;return}switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l={type:u,coordinates:t.coordinates[c]};if(!1===e(r.feature(l,o),n,c))return!1}})}function c(t,e){s(t,function(t,n,i){var a,u=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var c=0,l=0,f=0;if(!1===o(t,function(o,s,p,d,h){if(void 0===a||n>c||d>l||h>f){a=o,c=n,l=d,f=h,u=0;return}if(!1===e(r.lineString([a,o],t.properties),n,i,h,u))return!1;u++,a=o}))return!1}}})}function l(t,e){if(!t)throw Error("geojson is required");s(t,function(t,n,o){if(null!==t.geometry){var i=t.geometry.type,a=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,o,0,0))return!1;break;case"Polygon":for(var u=0;u<a.length;u++)if(!1===e(r.lineString(a[u],t.properties),n,o,u))return!1}}})}e.coordAll=function(t){var e=[];return o(t,function(t){e.push(t)}),e},e.coordEach=o,e.coordReduce=function(t,e,n,r){var i=n;return o(t,function(t,r,o,a,u){i=0===r&&void 0===n?t:e(i,t,r,o,a,u)},r),i},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,function(t,o){r=0===o&&void 0===n?t:e(r,t,o)}),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw Error("options is invalid");var n,o=e.featureIndex||0,i=e.multiFeatureIndex||0,a=e.geometryIndex||0,u=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),s=s||t.features[o].properties,n=t.features[o].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return r.point(c,s,e);case"MultiPoint":return i<0&&(i=c.length+i),r.point(c[i],s,e);case"LineString":return u<0&&(u=c.length+u),r.point(c[u],s,e);case"Polygon":return a<0&&(a=c.length+a),u<0&&(u=c[a].length+u),r.point(c[a][u],s,e);case"MultiLineString":return i<0&&(i=c.length+i),u<0&&(u=c[i].length+u),r.point(c[i][u],s,e);case"MultiPolygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),u<0&&(u=c[i][a].length-u),r.point(c[i][a][u],s,e)}throw Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw Error("options is invalid");var n,o=e.featureIndex||0,i=e.multiFeatureIndex||0,a=e.geometryIndex||0,u=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),s=s||t.features[o].properties,n=t.features[o].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=c.length+u-1),r.lineString([c[u],c[u+1]],s,e);case"Polygon":return a<0&&(a=c.length+a),u<0&&(u=c[a].length+u-1),r.lineString([c[a][u],c[a][u+1]],s,e);case"MultiLineString":return i<0&&(i=c.length+i),u<0&&(u=c[i].length+u-1),r.lineString([c[i][u],c[i][u+1]],s,e);case"MultiPolygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),u<0&&(u=c[i][a].length-u-1),r.lineString([c[i][a][u],c[i][a][u+1]],s,e)}throw Error("geojson is invalid")},e.flattenEach=s,e.flattenReduce=function(t,e,n){var r=n;return s(t,function(t,o,i){r=0===o&&0===i&&void 0===n?t:e(r,t,o,i)}),r},e.geomEach=u,e.geomReduce=function(t,e,n){var r=n;return u(t,function(t,o,i,a,u){r=0===o&&void 0===n?t:e(r,t,o,i,a,u)}),r},e.lineEach=l,e.lineReduce=function(t,e,n){var r=n;return l(t,function(t,o,i,a){r=0===o&&void 0===n?t:e(r,t,o,i,a)}),r},e.propEach=i,e.propReduce=function(t,e,n){var r=n;return i(t,function(t,o){r=0===o&&void 0===n?t:e(r,t,o)}),r},e.segmentEach=c,e.segmentReduce=function(t,e,n){var r=n,o=!1;return c(t,function(t,i,a,u,s){r=!1===o&&void 0===n?t:e(r,t,i,a,u,s),o=!0}),r}},99034:function(t,e,n){"use strict";var r=n(51208),o=n(93737),i=n(31013);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=a(r),s=a(o),c=a(i);function l(t,e){var n=c.default(t,e),r=u.default(t,e);return s.default(t,n/2,r)}t.exports=l,t.exports.default=l},13807:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(51208)),i=r(n(31013)),a=r(n(93737)),u=r(n(73663)),s=n(31540),c=n(84102),l=n(10611);e.default=function(t,e,n){void 0===n&&(n={});var r=c.point([1/0,1/0],{dist:1/0}),f=0;return s.flattenEach(t,function(t){for(var s=l.getCoords(t),p=0;p<s.length-1;p++){var d=c.point(s[p]);d.properties.dist=i.default(e,d,n);var h=c.point(s[p+1]);h.properties.dist=i.default(e,h,n);var y=i.default(d,h,n),g=Math.max(d.properties.dist,h.properties.dist),v=o.default(d,h),m=a.default(e,g,v+90,n),b=a.default(e,g,v-90,n),E=u.default(c.lineString([m.geometry.coordinates,b.geometry.coordinates]),c.lineString([d.geometry.coordinates,h.geometry.coordinates])),P=null;E.features.length>0&&((P=E.features[0]).properties.dist=i.default(e,P,n),P.properties.location=f+i.default(d,P,n)),d.properties.dist<r.properties.dist&&((r=d).properties.index=p,r.properties.location=f),h.properties.dist<r.properties.dist&&((r=h).properties.index=p+1,r.properties.location=f+y),P&&P.properties.dist<r.properties.dist&&((r=P).properties.index=p),f+=y}}),r}},63892:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(31013)),i=n(84102),a=n(10611),u=n(31540),s=r(n(6213));function c(t,e){return t[0]*e[0]+t[1]*e[1]}function l(t,e,n){return"planar"===n.method?s.default(t,e,n):o.default(t,e,n)}e.default=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw Error("pt is required");if(Array.isArray(t)?t=i.point(t):"Point"===t.type?t=i.feature(t):a.featureOf(t,"Point","point"),!e)throw Error("line is required");Array.isArray(e)?e=i.lineString(e):"LineString"===e.type?e=i.feature(e):a.featureOf(e,"LineString","line");var r=1/0,o=t.geometry.coordinates;return u.segmentEach(e,function(t){var e=function(t,e,n,r){var o=[n[0]-e[0],n[1]-e[1]],i=c([t[0]-e[0],t[1]-e[1]],o);if(i<=0)return l(t,e,{method:r.method,units:"degrees"});var a=c(o,o);if(a<=i)return l(t,n,{method:r.method,units:"degrees"});var u=i/a;return l(t,[e[0]+u*o[0],e[1]+u*o[1]],{method:r.method,units:"degrees"})}(o,t.geometry.coordinates[0],t.geometry.coordinates[1],n);e<r&&(r=e)}),i.convertLength(r,"degrees",n.units)}},97383:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611);function i(t,e){return void 0===e&&(e={}),u(o.getGeom(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function a(t,e){void 0===e&&(e={});var n=o.getGeom(t).coordinates,i=e.properties?e.properties:"Feature"===t.type?t.properties:{},a=[];return n.forEach(function(t){a.push(u(t,i))}),r.featureCollection(a)}function u(t,e){return t.length>1?r.multiLineString(t,e):r.lineString(t[0],e)}e.default=function(t,e){void 0===e&&(e={});var n=o.getGeom(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return i(n,e);case"MultiPolygon":return a(n,e);default:throw Error("invalid poly")}},e.polygonToLine=i,e.multiPolygonToLine=a,e.coordsToLine=u},51138:function(t,e,n){"use strict";var r=n(76565),o=n(3809),i=n(31540),a=n(10611),u=n(84102);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c=s(r),l=s(o);function f(t,e){if(e=e||{},!u.isObject(e))throw Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw Error("<geojson> is required");if("boolean"!=typeof n)throw Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw Error("<mutate> must be a boolean");!1===r&&(t=c.default(t));var o=[];switch(t.type){case"GeometryCollection":return i.geomEach(t,function(t){p(t,n)}),t;case"FeatureCollection":return i.featureEach(t,function(t){i.featureEach(p(t,n),function(t){o.push(t)})}),u.featureCollection(o)}return p(t,n)}function p(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return i.geomEach(t,function(t){p(t,e)}),t;case"LineString":return d(a.getCoords(t),e),t;case"Polygon":return h(a.getCoords(t),e),t;case"MultiLineString":return a.getCoords(t).forEach(function(t){d(t,e)}),t;case"MultiPolygon":return a.getCoords(t).forEach(function(t){h(t,e)}),t;case"Point":case"MultiPoint":return t}}function d(t,e){l.default(t)===e&&t.reverse()}function h(t,e){l.default(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)l.default(t[n])===e&&t[n].reverse()}t.exports=f,t.exports.default=f},16912:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611);function i(t,e){var n=r.degreesToRadians(t[1]),o=r.degreesToRadians(e[1]),i=r.degreesToRadians(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var a=Math.atan2(i,Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)));return(r.radiansToDegrees(a)+360)%360}e.default=function(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?i(o.getCoord(e),o.getCoord(t)):i(o.getCoord(t),o.getCoord(e)))>180?-(360-r):r}},62054:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611);e.default=function(t,e,n,i){void 0===i&&(i={});var a,u,s,c,l,f,p,d,h=r.convertLength(Math.abs(e),i.units,"meters");e<0&&(h=-Math.abs(h));var y=o.getCoord(t),g=(u=h/(a=void 0===a?r.earthRadius:Number(a)),s=y[0]*Math.PI/180,c=r.degreesToRadians(y[1]),Math.abs(p=c+(f=u*Math.cos(l=r.degreesToRadians(n))))>Math.PI/2&&(p=p>0?Math.PI-p:-Math.PI-p),[(180*(s+u*Math.sin(l)/(Math.abs(d=Math.log(Math.tan(p/2+Math.PI/4)/Math.tan(c/2+Math.PI/4)))>1e-11?f/d:Math.cos(c)))/Math.PI+540)%360-180,180*p/Math.PI]);return g[0]+=g[0]-y[0]>180?-360:y[0]-g[0]>180?360:0,r.point(g,i.properties)}},6213:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84102),o=n(10611);e.default=function(t,e,n){void 0===n&&(n={});var i,a,u,s,c,l,f,p,d=o.getCoord(t),h=o.getCoord(e);h[0]+=h[0]-d[0]>180?-360:d[0]-h[0]>180?360:0;var y=(a=i=void 0===i?r.earthRadius:Number(i),u=d[1]*Math.PI/180,c=(s=h[1]*Math.PI/180)-u,(l=Math.abs(h[0]-d[0])*Math.PI/180)>Math.PI&&(l-=2*Math.PI),p=Math.abs(f=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(u/2+Math.PI/4)))>1e-11?c/f:Math.cos(u),Math.sqrt(c*c+p*p*l*l)*a);return r.convertLength(y,"meters",n.units)}},90067:function(t,e,n){"use strict";var r=n(66338),o=n(16912),i=n(6213),a=n(62054),u=n(76565),s=n(31540),c=n(10611),l=n(84102);function f(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var p=f(r),d=f(o),h=f(i),y=f(a),g=f(u);function v(t,e,n){if(n=n||{},!l.isObject(n))throw Error("options is invalid");var r=n.pivot,o=n.mutate;if(!t)throw Error("geojson is required");if(null==e||isNaN(e))throw Error("angle is required");return 0===e||(r||(r=p.default(t)),(!1===o||void 0===o)&&(t=g.default(t)),s.coordEach(t,function(t){var n=d.default(r,t),o=h.default(r,t),i=c.getCoords(y.default(r,o,n+e));t[0]=i[0],t[1]=i[1]})),t}t.exports=v,t.exports.default=v},67517:function(t,e,n){"use strict";var r=n(76565),o=n(78230),i=n(66338),a=n(9705),u=n(16912),s=n(6213),c=n(62054),l=n(31540),f=n(84102),p=n(10611);function d(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var h=d(r),y=d(o),g=d(i),v=d(a),m=d(u),b=d(s),E=d(c);function P(t,e,n){if(n=n||{},!f.isObject(n))throw Error("options is invalid");var r=n.origin,o=n.mutate;if(!t)throw Error("geojson required");if("number"!=typeof e||0===e)throw Error("invalid factor");var i=Array.isArray(r)||"object"==typeof r;return(!0!==o&&(t=h.default(t)),"FeatureCollection"!==t.type||i)?_(t,e,r):(l.featureEach(t,function(n,o){t.features[o]=_(n,e,r)}),t)}function _(t,e,n){var r="Point"===p.getType(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return p.getCoord(e);var n=t.bbox?t.bbox:v.default(t),r=n[0],o=n[1],i=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return f.point([r,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return f.point([i,o]);case"nw":case"northwest":case"westnorth":case"topleft":return f.point([r,a]);case"ne":case"northeast":case"eastnorth":case"topright":return f.point([i,a]);case"center":return y.default(t);case void 0:case null:case"centroid":return g.default(t);default:throw Error("invalid origin")}}(t,n),1===e||r||l.coordEach(t,function(t){var r=b.default(n,t),o=m.default(n,t),i=p.getCoords(E.default(n,r*e,o));t[0]=i[0],t[1]=i[1],3===t.length&&(t[2]*=e)}),t}t.exports=P,t.exports.default=P},92418:function(t,e,n){"use strict";var r=n(31540),o=n(84102),i=n(10611),a=n(76565),u=n(62054);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c=s(a),l=s(u);function f(t,e,n,a){if(a=a||{},!o.isObject(a))throw Error("options is invalid");var u=a.units,s=a.zTranslation,f=a.mutate;if(!t)throw Error("geojson is required");if(null==e||isNaN(e))throw Error("distance is required");if(s&&"number"!=typeof s&&isNaN(s))throw Error("zTranslation is not a number");if(s=void 0!==s?s:0,0===e&&0===s)return t;if(null==n||isNaN(n))throw Error("direction is required");return e<0&&(e=-e,n+=180),(!1===f||void 0===f)&&(t=c.default(t)),r.coordEach(t,function(t){var r=i.getCoords(l.default(t,e,n,{units:u}));t[0]=r[0],t[1]=r[1],s&&3===t.length&&(t[2]+=s)}),t}t.exports=f,t.exports.default=f},71959:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(32676)),i=n(10611),a=n(84102);e.default=function(t,e,n){void 0===n&&(n={});var r=i.getGeom(t),u=i.getGeom(e),s=o.default.union(r.coordinates,u.coordinates);return 0===s.length?null:1===s.length?a.polygon(s[0],n.properties):a.multiPolygon(s,n.properties)}},2167:function(t,e,n){"use strict";function r(){return new o}function o(){this.reset()}n.r(e),n.d(e,{geoAlbers:function(){return nq},geoAlbersUsa:function(){return nZ},geoArea:function(){return Z},geoAzimuthalEqualArea:function(){return nJ},geoAzimuthalEqualAreaRaw:function(){return nW},geoAzimuthalEquidistant:function(){return nK},geoAzimuthalEquidistantRaw:function(){return n$},geoBounds:function(){return t_},geoCentroid:function(){return tI},geoCircle:function(){return tq},geoClipExtent:function(){return t3},geoConicConformal:function(){return n6},geoConicConformalRaw:function(){return n3},geoConicEqualArea:function(){return nU},geoConicEqualAreaRaw:function(){return nB},geoConicEquidistant:function(){return n9},geoConicEquidistantRaw:function(){return n8},geoContains:function(){return eR},geoDistance:function(){return ew},geoEquirectangular:function(){return n5},geoEquirectangularRaw:function(){return n4},geoGnomonic:function(){return rt},geoGnomonicRaw:function(){return n7},geoGraticule:function(){return eN},geoGraticule10:function(){return eF},geoIdentity:function(){return rn},geoInterpolate:function(){return eL},geoLength:function(){return e_},geoMercator:function(){return n0},geoMercatorRaw:function(){return nQ},geoNaturalEarth1:function(){return ro},geoNaturalEarth1Raw:function(){return rr},geoOrthographic:function(){return ra},geoOrthographicRaw:function(){return ri},geoPath:function(){return nx},geoProjection:function(){return nG},geoProjectionMutator:function(){return nz},geoRotation:function(){return tY},geoStereographic:function(){return rs},geoStereographicRaw:function(){return ru},geoStream:function(){return R},geoTransform:function(){return nD},geoTransverseMercator:function(){return rl},geoTransverseMercatorRaw:function(){return rc}}),o.prototype={constructor:o,reset:function(){this.s=this.t=0},add:function(t){a(i,t,this.t),a(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new o;function a(t,e,n){var r=t.s=e+n,o=r-e;t.t=e-(r-o)+(n-o)}var u=Math.PI,s=u/2,c=u/4,l=2*u,f=180/u,p=u/180,d=Math.abs,h=Math.atan,y=Math.atan2,g=Math.cos,v=Math.ceil,m=Math.exp,b=Math.log,E=Math.pow,P=Math.sin,_=Math.sign||function(t){return t>0?1:t<0?-1:0},O=Math.sqrt,S=Math.tan;function w(t){return t>1?0:t<-1?u:Math.acos(t)}function M(t){return t>1?s:t<-1?-s:Math.asin(t)}function x(){}function j(t,e){t&&k.hasOwnProperty(t.type)&&k[t.type](t,e)}var T={Feature:function(t,e){j(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)j(n[r].geometry,e)}},k={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){C(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)C(n[r],e,0)},Polygon:function(t,e){D(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)D(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)j(n[r],e)}};function C(t,e,n){var r,o=-1,i=t.length-n;for(e.lineStart();++o<i;)r=t[o],e.point(r[0],r[1],r[2]);e.lineEnd()}function D(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)C(t[n],e,1);e.polygonEnd()}function R(t,e){t&&T.hasOwnProperty(t.type)?T[t.type](t,e):j(t,e)}var I,A,N,F,L,H=r(),G=r(),z={point:x,lineStart:x,lineEnd:x,polygonStart:function(){H.reset(),z.lineStart=Y,z.lineEnd=B},polygonEnd:function(){var t=+H;G.add(t<0?l+t:t),this.lineStart=this.lineEnd=this.point=x},sphere:function(){G.add(l)}};function Y(){z.point=U}function B(){q(I,A)}function U(t,e){z.point=q,I=t,A=e,t*=p,e*=p,N=t,F=g(e=e/2+c),L=P(e)}function q(t,e){t*=p,e*=p;var n=t-N,r=n>=0?1:-1,o=r*n,i=g(e=e/2+c),a=P(e),u=L*a,s=F*i+u*g(o),l=u*r*P(o);H.add(y(l,s)),N=t,F=i,L=a}function Z(t){return G.reset(),R(t,z),2*G}function V(t){return[y(t[1],t[0]),M(t[2])]}function X(t){var e=t[0],n=t[1],r=g(n);return[r*g(e),r*P(e),P(n)]}function W(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function J(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function K(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Q(t){var e=O(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var tt,te,tn,tr,to,ti,ta,tu,ts,tc,tl=r(),tf={point:tp,lineStart:th,lineEnd:ty,polygonStart:function(){tf.point=tg,tf.lineStart=tv,tf.lineEnd=tm,tl.reset(),z.polygonStart()},polygonEnd:function(){z.polygonEnd(),tf.point=tp,tf.lineStart=th,tf.lineEnd=ty,H<0?(tt=-(tn=180),te=-(tr=90)):tl>1e-6?tr=90:tl<-.000001&&(te=-90),tc[0]=tt,tc[1]=tn}};function tp(t,e){ts.push(tc=[tt=t,tn=t]),e<te&&(te=e),e>tr&&(tr=e)}function td(t,e){var n=X([t*p,e*p]);if(tu){var r=J(tu,n),o=J([r[1],-r[0],0],r);Q(o);var i,a=t-to,u=a>0?1:-1,s=(o=V(o))[0]*f*u,c=d(a)>180;c^(u*to<s&&s<u*t)?(i=o[1]*f)>tr&&(tr=i):c^(u*to<(s=(s+360)%360-180)&&s<u*t)?(i=-o[1]*f)<te&&(te=i):(e<te&&(te=e),e>tr&&(tr=e)),c?t<to?tb(tt,t)>tb(tt,tn)&&(tn=t):tb(t,tn)>tb(tt,tn)&&(tt=t):tn>=tt?(t<tt&&(tt=t),t>tn&&(tn=t)):t>to?tb(tt,t)>tb(tt,tn)&&(tn=t):tb(t,tn)>tb(tt,tn)&&(tt=t)}else ts.push(tc=[tt=t,tn=t]);e<te&&(te=e),e>tr&&(tr=e),tu=n,to=t}function th(){tf.point=td}function ty(){tc[0]=tt,tc[1]=tn,tf.point=tp,tu=null}function tg(t,e){if(tu){var n=t-to;tl.add(d(n)>180?n+(n>0?360:-360):n)}else ti=t,ta=e;z.point(t,e),td(t,e)}function tv(){z.lineStart()}function tm(){tg(ti,ta),z.lineEnd(),d(tl)>1e-6&&(tt=-(tn=180)),tc[0]=tt,tc[1]=tn,tu=null}function tb(t,e){return(e-=t)<0?e+360:e}function tE(t,e){return t[0]-e[0]}function tP(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function t_(t){var e,n,r,o,i,a,u;if(tr=tn=-(tt=te=1/0),ts=[],R(t,tf),n=ts.length){for(ts.sort(tE),e=1,i=[r=ts[0]];e<n;++e)tP(r,(o=ts[e])[0])||tP(r,o[1])?(tb(r[0],o[1])>tb(r[0],r[1])&&(r[1]=o[1]),tb(o[0],r[1])>tb(r[0],r[1])&&(r[0]=o[0])):i.push(r=o);for(a=-1/0,n=i.length-1,e=0,r=i[n];e<=n;r=o,++e)o=i[e],(u=tb(r[1],o[0]))>a&&(a=u,tt=o[0],tn=r[1])}return ts=tc=null,tt===1/0||te===1/0?[[NaN,NaN],[NaN,NaN]]:[[tt,te],[tn,tr]]}var tO={sphere:x,point:tS,lineStart:tM,lineEnd:tT,polygonStart:function(){tO.lineStart=tk,tO.lineEnd=tC},polygonEnd:function(){tO.lineStart=tM,tO.lineEnd=tT}};function tS(t,e){t*=p;var n=g(e*=p);tw(n*g(t),n*P(t),P(e))}function tw(t,e,n){++t9,et+=(t-et)/t9,ee+=(e-ee)/t9,en+=(n-en)/t9}function tM(){tO.point=tx}function tx(t,e){t*=p;var n=g(e*=p);ef=n*g(t),ep=n*P(t),ed=P(e),tO.point=tj,tw(ef,ep,ed)}function tj(t,e){t*=p;var n=g(e*=p),r=n*g(t),o=n*P(t),i=P(e),a=y(O((a=ep*i-ed*o)*a+(a=ed*r-ef*i)*a+(a=ef*o-ep*r)*a),ef*r+ep*o+ed*i);t7+=a,er+=a*(ef+(ef=r)),eo+=a*(ep+(ep=o)),ei+=a*(ed+(ed=i)),tw(ef,ep,ed)}function tT(){tO.point=tS}function tk(){tO.point=tD}function tC(){tR(ec,el),tO.point=tS}function tD(t,e){ec=t,el=e,t*=p,e*=p,tO.point=tR;var n=g(e);tw(ef=n*g(t),ep=n*P(t),ed=P(e))}function tR(t,e){t*=p;var n=g(e*=p),r=n*g(t),o=n*P(t),i=P(e),a=ep*i-ed*o,u=ed*r-ef*i,s=ef*o-ep*r,c=O(a*a+u*u+s*s),l=M(c),f=c&&-l/c;ea+=f*a,eu+=f*u,es+=f*s,t7+=l,er+=l*(ef+(ef=r)),eo+=l*(ep+(ep=o)),ei+=l*(ed+(ed=i)),tw(ef,ep,ed)}function tI(t){t9=t7=et=ee=en=er=eo=ei=ea=eu=es=0,R(t,tO);var e=ea,n=eu,r=es,o=e*e+n*n+r*r;return o<1e-12&&(e=er,n=eo,r=ei,t7<1e-6&&(e=et,n=ee,r=en),(o=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[y(n,e)*f,M(r/O(o))*f]}function tA(t){return function(){return t}}function tN(t,e){function n(n,r){return e((n=t(n,r))[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function tF(t,e){return[t>u?t-l:t<-u?t+l:t,e]}function tL(t,e,n){return(t%=l)?e||n?tN(tG(t),tz(e,n)):tG(t):e||n?tz(e,n):tF}function tH(t){return function(e,n){return[(e+=t)>u?e-l:e<-u?e+l:e,n]}}function tG(t){var e=tH(t);return e.invert=tH(-t),e}function tz(t,e){var n=g(t),r=P(t),o=g(e),i=P(e);function a(t,e){var a=g(e),u=g(t)*a,s=P(t)*a,c=P(e),l=c*n+u*r;return[y(s*o-l*i,u*n-c*r),M(l*o+s*i)]}return a.invert=function(t,e){var a=g(e),u=g(t)*a,s=P(t)*a,c=P(e),l=c*o-s*i;return[y(s*o+c*i,u*n+l*r),M(l*n-u*r)]},a}function tY(t){function e(e){return e=t(e[0]*p,e[1]*p),e[0]*=f,e[1]*=f,e}return t=tL(t[0]*p,t[1]*p,t.length>2?t[2]*p:0),e.invert=function(e){return e=t.invert(e[0]*p,e[1]*p),e[0]*=f,e[1]*=f,e},e}function tB(t,e,n,r,o,i){if(n){var a=g(e),u=P(e),s=r*n;null==o?(o=e+r*l,i=e-s/2):(o=tU(a,o),i=tU(a,i),(r>0?o<i:o>i)&&(o+=r*l));for(var c,f=o;r>0?f>i:f<i;f-=s)c=V([a,-u*g(f),-u*P(f)]),t.point(c[0],c[1])}}function tU(t,e){e=X(e),e[0]-=t,Q(e);var n=w(-e[1]);return((0>-e[2]?-n:n)+l-1e-6)%l}function tq(){var t,e,n=tA([0,0]),r=tA(90),o=tA(6),i={point:function(n,r){t.push(n=e(n,r)),n[0]*=f,n[1]*=f}};function a(){var a=n.apply(this,arguments),u=r.apply(this,arguments)*p,s=o.apply(this,arguments)*p;return t=[],e=tL(-a[0]*p,-a[1]*p,0).invert,tB(i,u,s,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:tA([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:tA(+t),a):r},a.precision=function(t){return arguments.length?(o="function"==typeof t?t:tA(+t),a):o},a}function tZ(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:x,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function tV(t,e){return 1e-6>d(t[0]-e[0])&&1e-6>d(t[1]-e[1])}function tX(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function tW(t,e,n,r,o){var i,a,u=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(tV(r,a)){for(o.lineStart(),i=0;i<e;++i)o.point((r=t[i])[0],r[1]);o.lineEnd();return}u.push(n=new tX(r,t,null,!0)),s.push(n.o=new tX(r,null,n,!1)),u.push(n=new tX(a,t,null,!1)),s.push(n.o=new tX(a,null,n,!0))}}),u.length){for(s.sort(e),tJ(u),tJ(s),i=0,a=s.length;i<a;++i)s[i].e=n=!n;for(var c,l,f=u[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;c=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(i=0,a=c.length;i<a;++i)o.point((l=c[i])[0],l[1]);else r(p.x,p.n.x,1,o);p=p.n}else{if(d)for(i=(c=p.p.z).length-1;i>=0;--i)o.point((l=c[i])[0],l[1]);else r(p.x,p.p.x,-1,o);p=p.p}c=(p=p.o).z,d=!d}while(!p.v);o.lineEnd()}}}function tJ(t){if(e=t.length){for(var e,n,r=0,o=t[0];++r<e;)o.n=n=t[r],n.p=o,o=n;o.n=n=t[0],n.p=o}}function t$(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}tF.invert=tF;var tK=(1===(t8=t$).length&&(t5=t8,t8=function(t,e){return t$(t5(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var o=n+r>>>1;0>t8(t[o],e)?n=o+1:r=o}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var o=n+r>>>1;t8(t[o],e)>0?r=o:n=o+1}return n}});tK.right,tK.left;var tQ=Array.prototype;function t0(t){for(var e,n,r,o=t.length,i=-1,a=0;++i<o;)a+=t[i].length;for(n=Array(a);--o>=0;)for(e=(r=t[o]).length;--e>=0;)n[--a]=r[e];return n}function t1(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var r=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),i=Array(o);++r<o;)i[r]=t+r*n;return i}function t2(t,e,n,r){function o(o,i){return t<=o&&o<=n&&e<=i&&i<=r}function i(o,i,u,c){var l=0,f=0;if(null==o||(l=a(o,u))!==(f=a(i,u))||0>s(o,i)^u>0)do c.point(0===l||3===l?t:n,l>1?r:e);while((l=(l+u+4)%4)!==f);else c.point(i[0],i[1])}function a(r,o){return 1e-6>d(r[0]-t)?o>0?0:3:1e-6>d(r[0]-n)?o>0?2:1:1e-6>d(r[1]-e)?o>0?1:0:o>0?3:2}function u(t,e){return s(t.x,e.x)}function s(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var s,c,l,f,p,d,h,y,g,v,m,b=a,E=tZ(),P={point:_,lineStart:function(){P.point=O,c&&c.push(l=[]),v=!0,g=!1,h=y=NaN},lineEnd:function(){s&&(O(f,p),d&&g&&E.rejoin(),s.push(E.result())),P.point=_,g&&b.lineEnd()},polygonStart:function(){b=E,s=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,o=c.length;n<o;++n)for(var i,a,u=c[n],s=1,l=u.length,f=u[0],p=f[0],d=f[1];s<l;++s)i=p,a=d,p=(f=u[s])[0],d=f[1],a<=r?d>r&&(p-i)*(r-a)>(d-a)*(t-i)&&++e:d<=r&&(p-i)*(r-a)<(d-a)*(t-i)&&--e;return e}(),n=m&&e,o=(s=t0(s)).length;(n||o)&&(a.polygonStart(),n&&(a.lineStart(),i(null,null,1,a),a.lineEnd()),o&&tW(s,u,e,i,a),a.polygonEnd()),b=a,s=c=l=null}};function _(t,e){o(t,e)&&b.point(t,e)}function O(i,a){var u=o(i,a);if(c&&l.push([i,a]),v)f=i,p=a,d=u,v=!1,u&&(b.lineStart(),b.point(i,a));else if(u&&g)b.point(i,a);else{var s=[h=Math.max(-1e9,Math.min(1e9,h)),y=Math.max(-1e9,Math.min(1e9,y))],E=[i=Math.max(-1e9,Math.min(1e9,i)),a=Math.max(-1e9,Math.min(1e9,a))];!function(t,e,n,r,o,i){var a,u=t[0],s=t[1],c=e[0],l=e[1],f=0,p=1,d=c-u,h=l-s;if(a=n-u,d||!(a>0)){if(a/=d,d<0){if(a<f)return;a<p&&(p=a)}else if(d>0){if(a>p)return;a>f&&(f=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>p)return;a>f&&(f=a)}else if(d>0){if(a<f)return;a<p&&(p=a)}if(a=r-s,h||!(a>0)){if(a/=h,h<0){if(a<f)return;a<p&&(p=a)}else if(h>0){if(a>p)return;a>f&&(f=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>p)return;a>f&&(f=a)}else if(h>0){if(a<f)return;a<p&&(p=a)}return f>0&&(t[0]=u+f*d,t[1]=s+f*h),p<1&&(e[0]=u+p*d,e[1]=s+p*h),!0}}}}}(s,E,t,e,n,r)?u&&(b.lineStart(),b.point(i,a),m=!1):(g||(b.lineStart(),b.point(s[0],s[1])),b.point(E[0],E[1]),u||b.lineEnd(),m=!1)}h=i,y=a,g=u}return P}}function t3(){var t,e,n,r=0,o=0,i=960,a=500;return n={stream:function(n){return t&&e===n?t:t=t2(r,o,i,a)(e=n)},extent:function(u){return arguments.length?(r=+u[0][0],o=+u[0][1],i=+u[1][0],a=+u[1][1],t=e=null,n):[[r,o],[i,a]]}}}tQ.slice,tQ.map;var t6=r();function t4(t,e){var n=e[0],r=e[1],o=[P(n),-g(n),0],i=0,a=0;t6.reset();for(var s=0,f=t.length;s<f;++s)if(d=(p=t[s]).length)for(var p,d,h=p[d-1],v=h[0],m=h[1]/2+c,b=P(m),E=g(m),_=0;_<d;++_,v=S,b=x,E=j,h=O){var O=p[_],S=O[0],w=O[1]/2+c,x=P(w),j=g(w),T=S-v,k=T>=0?1:-1,C=k*T,D=C>u,R=b*x;if(t6.add(y(R*k*P(C),E*j+R*g(C))),i+=D?T+k*l:T,D^v>=n^S>=n){var I=J(X(h),X(O));Q(I);var A=J(o,I);Q(A);var N=(D^T>=0?-1:1)*M(A[2]);(r>N||r===N&&(I[0]||I[1]))&&(a+=D^T>=0?1:-1)}}return(i<-.000001||i<1e-6&&t6<-.000001)^1&a}var t5,t8,t9,t7,et,ee,en,er,eo,ei,ea,eu,es,ec,el,ef,ep,ed,eh,ey,eg,ev=r(),em={sphere:x,point:x,lineStart:function(){em.point=eE,em.lineEnd=eb},lineEnd:x,polygonStart:x,polygonEnd:x};function eb(){em.point=em.lineEnd=x}function eE(t,e){t*=p,e*=p,eh=t,ey=P(e),eg=g(e),em.point=eP}function eP(t,e){t*=p;var n=P(e*=p),r=g(e),o=d(t-eh),i=g(o),a=r*P(o),u=eg*n-ey*r*i,s=ey*n+eg*r*i;ev.add(y(O(a*a+u*u),s)),eh=t,ey=n,eg=r}function e_(t){return ev.reset(),R(t,em),+ev}var eO=[null,null],eS={type:"LineString",coordinates:eO};function ew(t,e){return eO[0]=t,eO[1]=e,e_(eS)}var eM={Feature:function(t,e){return ej(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)if(ej(n[r].geometry,e))return!0;return!1}},ex={Sphere:function(){return!0},Point:function(t,e){return 0===ew(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)if(0===ew(n[r],e))return!0;return!1},LineString:function(t,e){return eT(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)if(eT(n[r],e))return!0;return!1},Polygon:function(t,e){return ek(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,o=n.length;++r<o;)if(ek(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)if(ej(n[r],e))return!0;return!1}};function ej(t,e){return!!(t&&ex.hasOwnProperty(t.type))&&ex[t.type](t,e)}function eT(t,e){var n=ew(t[0],t[1]);return ew(t[0],e)+ew(e,t[1])<=n+1e-6}function ek(t,e){return!!t4(t.map(eC),eD(e))}function eC(t){return(t=t.map(eD)).pop(),t}function eD(t){return[t[0]*p,t[1]*p]}function eR(t,e){return(t&&eM.hasOwnProperty(t.type)?eM[t.type]:ej)(t,e)}function eI(t,e,n){var r=t1(t,e-1e-6,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function eA(t,e,n){var r=t1(t,e-1e-6,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function eN(){var t,e,n,r,o,i,a,u,s,c,l,f,p=10,h=10,y=90,g=360,m=2.5;function b(){return{type:"MultiLineString",coordinates:E()}}function E(){return t1(v(r/y)*y,n,y).map(l).concat(t1(v(u/g)*g,a,g).map(f)).concat(t1(v(e/p)*p,t,p).filter(function(t){return d(t%y)>1e-6}).map(s)).concat(t1(v(i/h)*h,o,h).filter(function(t){return d(t%g)>1e-6}).map(c))}return b.lines=function(){return E().map(function(t){return{type:"LineString",coordinates:t}})},b.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(a).slice(1),l(n).reverse().slice(1),f(u).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.extentMajor(t).extentMinor(t):b.extentMinor()},b.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),u>a&&(t=u,u=a,a=t),b.precision(m)):[[r,u],[n,a]]},b.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],i=+n[0][1],o=+n[1][1],e>t&&(n=e,e=t,t=n),i>o&&(n=i,i=o,o=n),b.precision(m)):[[e,i],[t,o]]},b.step=function(t){return arguments.length?b.stepMajor(t).stepMinor(t):b.stepMinor()},b.stepMajor=function(t){return arguments.length?(y=+t[0],g=+t[1],b):[y,g]},b.stepMinor=function(t){return arguments.length?(p=+t[0],h=+t[1],b):[p,h]},b.precision=function(p){return arguments.length?(m=+p,s=eI(i,o,90),c=eA(e,t,m),l=eI(u,a,90),f=eA(r,n,m),b):m},b.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function eF(){return eN()()}function eL(t,e){var n,r,o=t[0]*p,i=t[1]*p,a=e[0]*p,u=e[1]*p,s=g(i),c=P(i),l=g(u),d=P(u),h=s*g(o),v=s*P(o),m=l*g(a),b=l*P(a),E=2*M(O((n=P((n=u-i)/2))*n+s*l*((r=P((r=a-o)/2))*r))),_=P(E),S=E?function(t){var e=P(t*=E)/_,n=P(E-t)/_,r=n*h+e*m,o=n*v+e*b;return[y(o,r)*f,y(n*c+e*d,O(r*r+o*o))*f]}:function(){return[o*f,i*f]};return S.distance=E,S}function eH(t){return t}var eG,ez,eY,eB,eU=r(),eq=r(),eZ={point:x,lineStart:x,lineEnd:x,polygonStart:function(){eZ.lineStart=eV,eZ.lineEnd=eJ},polygonEnd:function(){eZ.lineStart=eZ.lineEnd=eZ.point=x,eU.add(d(eq)),eq.reset()},result:function(){return eU.reset(),eU/2}};function eV(){eZ.point=eX}function eX(t,e){eZ.point=eW,eG=eY=t,ez=eB=e}function eW(t,e){eq.add(eB*t-eY*e),eY=t,eB=e}function eJ(){eW(eG,ez)}var e$,eK,eQ,e0,e1=1/0,e2=1/0,e3=-1/0,e6=e3,e4={point:function(t,e){t<e1&&(e1=t),t>e3&&(e3=t),e<e2&&(e2=e),e>e6&&(e6=e)},lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x,result:function(){var t=[[e1,e2],[e3,e6]];return e3=e6=-(e2=e1=1/0),t}},e5=0,e8=0,e9=0,e7=0,nt=0,ne=0,nn=0,nr=0,no=0,ni={point:na,lineStart:nu,lineEnd:nl,polygonStart:function(){ni.lineStart=nf,ni.lineEnd=np},polygonEnd:function(){ni.point=na,ni.lineStart=nu,ni.lineEnd=nl},result:function(){var t=no?[nn/no,nr/no]:ne?[e7/ne,nt/ne]:e9?[e5/e9,e8/e9]:[NaN,NaN];return e5=e8=e9=e7=nt=ne=nn=nr=no=0,t}};function na(t,e){e5+=t,e8+=e,++e9}function nu(){ni.point=ns}function ns(t,e){ni.point=nc,na(eQ=t,e0=e)}function nc(t,e){var n=t-eQ,r=e-e0,o=O(n*n+r*r);e7+=o*(eQ+t)/2,nt+=o*(e0+e)/2,ne+=o,na(eQ=t,e0=e)}function nl(){ni.point=na}function nf(){ni.point=nd}function np(){nh(e$,eK)}function nd(t,e){ni.point=nh,na(e$=eQ=t,eK=e0=e)}function nh(t,e){var n=t-eQ,r=e-e0,o=O(n*n+r*r);e7+=o*(eQ+t)/2,nt+=o*(e0+e)/2,ne+=o,nn+=(o=e0*t-eQ*e)*(eQ+t),nr+=o*(e0+e),no+=3*o,na(eQ=t,e0=e)}function ny(t){this._context=t}ny.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,l)}},result:x};var ng,nv,nm,nb,nE,nP=r(),n_={point:x,lineStart:function(){n_.point=nO},lineEnd:function(){ng&&nS(nv,nm),n_.point=x},polygonStart:function(){ng=!0},polygonEnd:function(){ng=null},result:function(){return nP.reset(),+nP}};function nO(t,e){n_.point=nS,nv=nb=t,nm=nE=e}function nS(t,e){nb-=t,nE-=e,nP.add(O(nb*nb+nE*nE)),nb=t,nE=e}function nw(){this._string=[]}function nM(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function nx(t,e){var n,r,o=4.5;function i(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),R(t,n(r))),r.result()}return i.area=function(t){return R(t,n(eZ)),eZ.result()},i.measure=function(t){return R(t,n(n_)),n_.result()},i.bounds=function(t){return R(t,n(e4)),e4.result()},i.centroid=function(t){return R(t,n(ni)),ni.result()},i.projection=function(e){return arguments.length?(n=null==e?(t=null,eH):(t=e).stream,i):t},i.context=function(t){return arguments.length?(r=null==t?(e=null,new nw):new ny(e=t),"function"!=typeof o&&r.pointRadius(o),i):e},i.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),i):o},i.projection(t).context(e)}function nj(t,e,n,r){return function(o,i){var a,u,s,c=e(i),l=o.invert(r[0],r[1]),f=tZ(),p=e(f),d=!1,h={point:y,lineStart:v,lineEnd:m,polygonStart:function(){h.point=b,h.lineStart=E,h.lineEnd=P,u=[],a=[]},polygonEnd:function(){h.point=y,h.lineStart=v,h.lineEnd=m,u=t0(u);var t=t4(a,l);u.length?(d||(i.polygonStart(),d=!0),tW(u,nk,t,n,i)):t&&(d||(i.polygonStart(),d=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),d&&(i.polygonEnd(),d=!1),u=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function y(e,n){var r=o(e,n);t(e=r[0],n=r[1])&&i.point(e,n)}function g(t,e){var n=o(t,e);c.point(n[0],n[1])}function v(){h.point=g,c.lineStart()}function m(){h.point=y,c.lineEnd()}function b(t,e){s.push([t,e]);var n=o(t,e);p.point(n[0],n[1])}function E(){p.lineStart(),s=[]}function P(){b(s[0][0],s[0][1]),p.lineEnd();var t,e,n,r,o=p.clean(),c=f.result(),l=c.length;if(s.pop(),a.push(s),s=null,l){if(1&o){if((e=(n=c[0]).length-1)>0){for(d||(i.polygonStart(),d=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}return}l>1&&2&o&&c.push(c.pop().concat(c.shift())),u.push(c.filter(nT))}}return h}}function nT(t){return t.length>1}function nk(t,e){return((t=t.x)[0]<0?t[1]-s-1e-6:s-t[1])-((e=e.x)[0]<0?e[1]-s-1e-6:s-e[1])}nw.prototype={_radius:4.5,_circle:nM(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=nM(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(!this._string.length)return null;var t=this._string.join("");return this._string=[],t}};var nC=nj(function(){return!0},function(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,a){var c,l,f,p,y,v,m=i>0?u:-u,b=d(i-n);1e-6>d(b-u)?(t.point(n,r=(r+a)/2>0?s:-s),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(m,r),t.point(i,r),e=0):o!==m&&b>=u&&(1e-6>d(n-o)&&(n-=1e-6*o),1e-6>d(i-m)&&(i-=1e-6*m),c=n,l=r,r=d(v=P(c-(f=i)))>1e-6?h((P(l)*(y=g(a))*P(f)-P(a)*(p=g(l))*P(c))/(p*y*v)):(l+a)/2,t.point(o,r),t.lineEnd(),t.lineStart(),t.point(m,r),e=0),t.point(n=i,r=a),o=m},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var o;if(null==t)o=n*s,r.point(-u,o),r.point(0,o),r.point(u,o),r.point(u,0),r.point(u,-o),r.point(0,-o),r.point(-u,-o),r.point(-u,0),r.point(-u,o);else if(d(t[0]-e[0])>1e-6){var i=t[0]<e[0]?u:-u;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(e[0],e[1])},[-u,-s]);function nD(t){return{stream:nR(t)}}function nR(t){return function(e){var n=new nI;for(var r in t)n[r]=t[r];return n.stream=e,n}}function nI(){}function nA(t,e,n){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],i=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),R(n,t.stream(e4));var a=e4.result(),u=Math.min(r/(a[1][0]-a[0][0]),o/(a[1][1]-a[0][1])),s=+e[0][0]+(r-u*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(o-u*(a[1][1]+a[0][1]))/2;return null!=i&&t.clipExtent(i),t.scale(150*u).translate([s,c])}function nN(t,e,n){return nA(t,[[0,0],e],n)}nI.prototype={constructor:nI,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var nF=g(30*p);function nL(t,e){return+e?function(t,e){function n(r,o,i,a,u,s,c,l,f,p,h,g,v,m){var b=c-r,E=l-o,P=b*b+E*E;if(P>4*e&&v--){var _=a+p,S=u+h,w=s+g,x=O(_*_+S*S+w*w),j=M(w/=x),T=1e-6>d(d(w)-1)||1e-6>d(i-f)?(i+f)/2:y(S,_),k=t(T,j),C=k[0],D=k[1],R=C-r,I=D-o,A=E*R-b*I;(A*A/P>e||d((b*R+E*I)/P-.5)>.3||a*p+u*h+s*g<nF)&&(n(r,o,i,a,u,s,C,D,T,_/=x,S/=x,w,v,m),m.point(C,D),n(C,D,T,_,S,w,c,l,f,p,h,g,v,m))}}return function(e){var r,o,i,a,u,s,c,l,f,p,d,h,y={point:g,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),y.lineStart=E},polygonEnd:function(){e.polygonEnd(),y.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){l=NaN,y.point=m,e.lineStart()}function m(r,o){var i=X([r,o]),a=t(r,o);n(l,f,c,p,d,h,l=a[0],f=a[1],c=r,p=i[0],d=i[1],h=i[2],16,e),e.point(l,f)}function b(){y.point=g,e.lineEnd()}function E(){v(),y.point=P,y.lineEnd=_}function P(t,e){m(r=t,e),o=l,i=f,a=p,u=d,s=h,y.point=m}function _(){n(l,f,c,p,d,h,o,i,r,a,u,s,16,e),y.lineEnd=b,b()}return y}}(t,e):nR({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}var nH=nR({point:function(t,e){this.stream.point(t*p,e*p)}});function nG(t){return nz(function(){return t})()}function nz(t){var e,n,r,o,i,a,s,c,l,h,y=150,v=480,m=250,b=0,E=0,P=0,_=0,S=0,w=null,M=nC,x=null,j=eH,T=.5,k=nL(R,.5);function C(t){return[(t=i(t[0]*p,t[1]*p))[0]*y+n,r-t[1]*y]}function D(t){return(t=i.invert((t[0]-n)/y,(r-t[1])/y))&&[t[0]*f,t[1]*f]}function R(t,o){return[(t=e(t,o))[0]*y+n,r-t[1]*y]}function I(){i=tN(o=tL(P,_,S),e);var t=e(b,E);return n=v-t[0]*y,r=m+t[1]*y,A()}function A(){return l=h=null,C}return C.stream=function(t){return l&&h===t?l:l=nH(M(o,k(j(h=t))))},C.clipAngle=function(t){return arguments.length?(M=+t?function(t,e){var n=g(t),r=n>0,o=d(n)>1e-6;function i(t,e){return g(t)*g(e)>n}function a(t,e,r){var o=X(t),i=X(e),a=[1,0,0],s=J(o,i),c=W(s,s),l=s[0],f=c-l*l;if(!f)return!r&&t;var p=n*c/f,h=-n*l/f,y=J(a,s),g=K(a,p);$(g,K(s,h));var v=W(g,y),m=W(y,y),b=v*v-m*(W(g,g)-1);if(!(b<0)){var E=O(b),P=K(y,(-v-E)/m);if($(P,g),P=V(P),!r)return P;var _,S=t[0],w=e[0],M=t[1],x=e[1];w<S&&(_=S,S=w,w=_);var j=w-S,T=1e-6>d(j-u),k=T||j<1e-6;if(!T&&x<M&&(_=M,M=x,x=_),k?T?M+x>0^P[1]<(1e-6>d(P[0]-S)?M:x):M<=P[1]&&P[1]<=x:j>u^(S<=P[0]&&P[0]<=w)){var C=K(y,(-v+E)/m);return $(C,g),[P,V(C)]}}}function s(e,n){var o=r?t:u-t,i=0;return e<-o?i|=1:e>o&&(i|=2),n<-o?i|=4:n>o&&(i|=8),i}return nj(i,function(t){var e,n,c,l,f;return{lineStart:function(){l=c=!1,f=1},point:function(p,d){var h,y,g=[p,d],v=i(p,d),m=r?v?0:s(p,d):v?s(p+(p<0?u:-u),d):0;!e&&(l=c=v)&&t.lineStart(),v!==c&&(!(y=a(e,g))||tV(e,y)||tV(g,y))&&(g[0]+=1e-6,g[1]+=1e-6,v=i(g[0],g[1])),v!==c?(f=0,v?(t.lineStart(),y=a(g,e),t.point(y[0],y[1])):(y=a(e,g),t.point(y[0],y[1]),t.lineEnd()),e=y):o&&e&&r^v&&!(m&n)&&(h=a(g,e,!0))&&(f=0,r?(t.lineStart(),t.point(h[0][0],h[0][1]),t.point(h[1][0],h[1][1]),t.lineEnd()):(t.point(h[1][0],h[1][1]),t.lineEnd(),t.lineStart(),t.point(h[0][0],h[0][1]))),!v||e&&tV(e,g)||t.point(g[0],g[1]),e=g,c=v,n=m},lineEnd:function(){c&&t.lineEnd(),e=null},clean:function(){return f|(l&&c)<<1}}},function(n,r,o,i){tB(i,t,e,o,n,r)},r?[0,-t]:[-u,t-u])}(w=t*p,6*p):(w=null,nC),A()):w*f},C.clipExtent=function(t){return arguments.length?(j=null==t?(x=a=s=c=null,eH):t2(x=+t[0][0],a=+t[0][1],s=+t[1][0],c=+t[1][1]),A()):null==x?null:[[x,a],[s,c]]},C.scale=function(t){return arguments.length?(y=+t,I()):y},C.translate=function(t){return arguments.length?(v=+t[0],m=+t[1],I()):[v,m]},C.center=function(t){return arguments.length?(b=t[0]%360*p,E=t[1]%360*p,I()):[b*f,E*f]},C.rotate=function(t){return arguments.length?(P=t[0]%360*p,_=t[1]%360*p,S=t.length>2?t[2]%360*p:0,I()):[P*f,_*f,S*f]},C.precision=function(t){return arguments.length?(k=nL(R,T=t*t),A()):O(T)},C.fitExtent=function(t,e){return nA(C,t,e)},C.fitSize=function(t,e){return nN(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&D,I()}}function nY(t){var e=0,n=u/3,r=nz(t),o=r(e,n);return o.parallels=function(t){return arguments.length?r(e=t[0]*p,n=t[1]*p):[e*f,n*f]},o}function nB(t,e){var n=P(t),r=(n+P(e))/2;if(1e-6>d(r))return function(t){var e=g(t);function n(t,n){return[t*e,P(n)/e]}return n.invert=function(t,n){return[t/e,M(n*e)]},n}(t);var o=1+n*(2*r-n),i=O(o)/r;function a(t,e){var n=O(o-2*r*P(e))/r;return[n*P(t*=r),i-n*g(t)]}return a.invert=function(t,e){var n=i-e;return[y(t,d(n))/r*_(n),M((o-(t*t+n*n)*r*r)/(2*r))]},a}function nU(){return nY(nB).scale(155.424).center([0,33.6442])}function nq(){return nU().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function nZ(){var t,e,n,r,o,i,a=nq(),u=nU().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=nU().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){i=[t,e]}};function l(t){var e=t[0],a=t[1];return i=null,n.point(e,a),i||(r.point(e,a),i)||(o.point(e,a),i)}function f(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&r>=-.425&&r<-.214?u:o>=.166&&o<.234&&r>=-.214&&r<-.115?s:a).invert(t)},l.stream=function(n){var r,o;return t&&e===n?t:(o=(r=[a.stream(e=n),u.stream(n),s.stream(n)]).length,t={point:function(t,e){for(var n=-1;++n<o;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)r[t].polygonEnd()}})},l.precision=function(t){return arguments.length?(a.precision(t),u.precision(t),s.precision(t),f()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),u.scale(.35*t),s.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),i=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[i-.455*e,l-.238*e],[i+.455*e,l+.238*e]]).stream(c),r=u.translate([i-.307*e,l+.201*e]).clipExtent([[i-.425*e+1e-6,l+.12*e+1e-6],[i-.214*e-1e-6,l+.234*e-1e-6]]).stream(c),o=s.translate([i-.205*e,l+.212*e]).clipExtent([[i-.214*e+1e-6,l+.166*e+1e-6],[i-.115*e-1e-6,l+.234*e-1e-6]]).stream(c),f()},l.fitExtent=function(t,e){return nA(l,t,e)},l.fitSize=function(t,e){return nN(l,t,e)},l.scale(1070)}function nV(t){return function(e,n){var r=g(e),o=g(n),i=t(r*o);return[i*o*P(e),i*P(n)]}}function nX(t){return function(e,n){var r=O(e*e+n*n),o=t(r),i=P(o),a=g(o);return[y(e*i,r*a),M(r&&n*i/r)]}}var nW=nV(function(t){return O(2/(1+t))});function nJ(){return nG(nW).scale(124.75).clipAngle(179.999)}nW.invert=nX(function(t){return 2*M(t/2)});var n$=nV(function(t){return(t=w(t))&&t/P(t)});function nK(){return nG(n$).scale(79.4188).clipAngle(179.999)}function nQ(t,e){return[t,b(S((s+e)/2))]}function n0(){return n1(nQ).scale(961/l)}function n1(t){var e,n,r,o=nG(t),i=o.center,a=o.scale,s=o.translate,c=o.clipExtent,l=null;function f(){var i=u*a(),s=o(tY(o.rotate()).invert([0,0]));return c(null==l?[[s[0]-i,s[1]-i],[s[0]+i,s[1]+i]]:t===nQ?[[Math.max(s[0]-i,l),e],[Math.min(s[0]+i,n),r]]:[[l,Math.max(s[1]-i,e)],[n,Math.min(s[1]+i,r)]])}return o.scale=function(t){return arguments.length?(a(t),f()):a()},o.translate=function(t){return arguments.length?(s(t),f()):s()},o.center=function(t){return arguments.length?(i(t),f()):i()},o.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),f()):null==l?null:[[l,e],[n,r]]},f()}function n2(t){return S((s+t)/2)}function n3(t,e){var n=g(t),r=t===e?P(t):b(n/g(e))/b(n2(e)/n2(t)),o=n*E(n2(t),r)/r;if(!r)return nQ;function i(t,e){o>0?e<-s+1e-6&&(e=-s+1e-6):e>s-1e-6&&(e=s-1e-6);var n=o/E(n2(e),r);return[n*P(r*t),o-n*g(r*t)]}return i.invert=function(t,e){var n=o-e,i=_(r)*O(t*t+n*n);return[y(t,d(n))/r*_(n),2*h(E(o/i,1/r))-s]},i}function n6(){return nY(n3).scale(109.5).parallels([30,30])}function n4(t,e){return[t,e]}function n5(){return nG(n4).scale(152.63)}function n8(t,e){var n=g(t),r=t===e?P(t):(n-g(e))/(e-t),o=n/r+t;if(1e-6>d(r))return n4;function i(t,e){var n=o-e,i=r*t;return[n*P(i),o-n*g(i)]}return i.invert=function(t,e){var n=o-e;return[y(t,d(n))/r*_(n),o-_(r)*O(t*t+n*n)]},i}function n9(){return nY(n8).scale(131.154).center([0,13.9389])}function n7(t,e){var n=g(e),r=g(t)*n;return[n*P(t)/r,P(e)/r]}function rt(){return nG(n7).scale(144.049).clipAngle(60)}function re(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?eH:nR({point:function(o,i){this.stream.point(o*t+n,i*e+r)}})}function rn(){var t,e,n,r,o,i,a=1,u=0,s=0,c=1,l=1,f=eH,p=null,d=eH;function h(){return r=o=null,i}return i={stream:function(t){return r&&o===t?r:r=f(d(o=t))},clipExtent:function(r){return arguments.length?(d=null==r?(p=t=e=n=null,eH):t2(p=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),h()):null==p?null:[[p,t],[e,n]]},scale:function(t){return arguments.length?(f=re((a=+t)*c,a*l,u,s),h()):a},translate:function(t){return arguments.length?(f=re(a*c,a*l,u=+t[0],s=+t[1]),h()):[u,s]},reflectX:function(t){return arguments.length?(f=re(a*(c=t?-1:1),a*l,u,s),h()):c<0},reflectY:function(t){return arguments.length?(f=re(a*c,a*(l=t?-1:1),u,s),h()):l<0},fitExtent:function(t,e){return nA(i,t,e)},fitSize:function(t,e){return nN(i,t,e)}}}function rr(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}function ro(){return nG(rr).scale(175.295)}function ri(t,e){return[g(e)*P(t),P(e)]}function ra(){return nG(ri).scale(249.5).clipAngle(90.000001)}function ru(t,e){var n=g(e),r=1+g(t)*n;return[n*P(t)/r,P(e)/r]}function rs(){return nG(ru).scale(250).clipAngle(142)}function rc(t,e){return[b(S((s+e)/2)),-t]}function rl(){var t=n1(rc),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}n$.invert=nX(function(t){return t}),nQ.invert=function(t,e){return[t,2*h(m(e))-s]},n4.invert=n4,n7.invert=nX(h),rr.invert=function(t,e){var n,r=e,o=25;do{var i=r*r,a=i*i;r-=n=(r*(1.007226+i*(.015085+a*(-.044475+.028874*i-.005916*a)))-e)/(1.007226+i*(.045255+a*(-.311325+.259866*i-.005916*11*a)))}while(d(n)>1e-6&&--o>0);return[t/(.8707+(i=r*r)*(-.131979+i*(-.013791+i*i*i*(.003971-.001529*i)))),r]},ri.invert=nX(M),ru.invert=nX(function(t){return 2*h(t)}),rc.invert=function(t,e){return[-e,2*h(m(t))-s]}},51787:function(t,e,n){var r=n(82582),o=n(84102),i=n(31540),a=n(9705).default,u=i.featureEach;i.coordEach,o.polygon;var s=o.featureCollection;function c(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)}):u(t,function(t){if("Feature"!==t.type)throw Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)}),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){return s(r.prototype.search.call(this,this.toBBox(t)))},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return s(r.prototype.all.call(this))},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else if("FeatureCollection"===t.type)e=a(t);else throw Error("invalid geojson");return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},50840:function(t,e,n){var r;/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(o,i,a,u){"use strict";var s,c=["","webkit","Moz","MS","ms","o"],l=i.createElement("div"),f=Math.round,p=Math.abs,d=Date.now;function h(t,e,n){return setTimeout(P(t,n),e)}function y(t,e,n){return!!Array.isArray(t)&&(g(t,n[e],n),!0)}function g(t,e,n){var r;if(t){if(t.forEach)t.forEach(e,n);else if(u!==t.length)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}}function v(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=o.console&&(o.console.warn||o.console.log);return i&&i.call(o.console,r,n),t.apply(this,arguments)}}s="function"!=typeof Object.assign?function(t){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}return e}:Object.assign;var m=v(function(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;)(!n||n&&u===t[r[o]])&&(t[r[o]]=e[r[o]]),o++;return t},"extend","Use `assign`."),b=v(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function E(t,e,n){var r,o=e.prototype;(r=t.prototype=Object.create(o)).constructor=t,r._super=o,n&&s(r,n)}function P(t,e){return function(){return t.apply(e,arguments)}}function _(t,e){return"function"==typeof t?t.apply(e&&e[0]||u,e):t}function O(t,e,n){g(x(e),function(e){t.addEventListener(e,n,!1)})}function S(t,e,n){g(x(e),function(e){t.removeEventListener(e,n,!1)})}function w(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function M(t,e){return t.indexOf(e)>-1}function x(t){return t.trim().split(/\s+/g)}function j(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return -1}function T(t){return Array.prototype.slice.call(t,0)}function k(t,e,n){for(var r=[],o=[],i=0;i<t.length;){var a=e?t[i][e]:t[i];0>j(o,a)&&r.push(t[i]),o[i]=a,i++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function C(t,e){for(var n,r,o=e[0].toUpperCase()+e.slice(1),i=0;i<c.length;){if((r=(n=c[i])?n+o:e)in t)return r;i++}}var D=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}var I="ontouchstart"in o,A=u!==C(o,"PointerEvent"),N=I&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F="touch",L="mouse",H=["x","y"],G=["clientX","clientY"];function z(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){_(t.options.enable,[t])&&n.handler(e)},this.init()}function Y(t,e,n){var r,o,i,a,s,c,l,f,h,y,g,v,m,b,E,P=n.pointers.length,_=n.changedPointers.length,O=1&e&&P-_==0,S=12&e&&P-_==0;n.isFirst=!!O,n.isFinal=!!S,O&&(t.session={}),n.eventType=e,r=t.session,i=(o=n.pointers).length,r.firstInput||(r.firstInput=B(n)),i>1&&!r.firstMultiple?r.firstMultiple=B(n):1===i&&(r.firstMultiple=!1),a=r.firstInput,c=(s=r.firstMultiple)?s.center:a.center,l=n.center=U(o),n.timeStamp=d(),n.deltaTime=n.timeStamp-a.timeStamp,n.angle=X(c,l),n.distance=V(c,l),f=n.center,h=r.offsetDelta||{},y=r.prevDelta||{},g=r.prevInput||{},(1===n.eventType||4===g.eventType)&&(y=r.prevDelta={x:g.deltaX||0,y:g.deltaY||0},h=r.offsetDelta={x:f.x,y:f.y}),n.deltaX=y.x+(f.x-h.x),n.deltaY=y.y+(f.y-h.y),n.offsetDirection=Z(n.deltaX,n.deltaY),v=q(n.deltaTime,n.deltaX,n.deltaY),n.overallVelocityX=v.x,n.overallVelocityY=v.y,n.overallVelocity=p(v.x)>p(v.y)?v.x:v.y,n.scale=s?(m=s.pointers,V(o[0],o[1],G)/V(m[0],m[1],G)):1,n.rotation=s?(b=s.pointers,X(o[1],o[0],G)+X(b[1],b[0],G)):0,n.maxPointers=r.prevInput?n.pointers.length>r.prevInput.maxPointers?n.pointers.length:r.prevInput.maxPointers:n.pointers.length,function(t,e){var n,r,o,i,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(s>25||u===a.velocity)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,f=q(s,c,l);r=f.x,o=f.y,n=p(f.x)>p(f.y)?f.x:f.y,i=Z(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,o=a.velocityY,i=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=o,e.direction=i}(r,n),E=t.element,w(n.srcEvent.target,E)&&(E=n.srcEvent.target),n.target=E,t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function B(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:f(t.pointers[n].clientX),clientY:f(t.pointers[n].clientY)},n++;return{timeStamp:d(),pointers:e,center:U(e),deltaX:t.deltaX,deltaY:t.deltaY}}function U(t){var e=t.length;if(1===e)return{x:f(t[0].clientX),y:f(t[0].clientY)};for(var n=0,r=0,o=0;o<e;)n+=t[o].clientX,r+=t[o].clientY,o++;return{x:f(n/e),y:f(r/e)}}function q(t,e,n){return{x:e/t||0,y:n/t||0}}function Z(t,e){return t===e?1:p(t)>=p(e)?t<0?2:4:e<0?8:16}function V(t,e,n){n||(n=H);var r=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(r*r+o*o)}function X(t,e,n){n||(n=H);var r=e[n[0]]-t[n[0]];return 180*Math.atan2(e[n[1]]-t[n[1]],r)/Math.PI}z.prototype={handler:function(){},init:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(R(this.element),this.evWin,this.domHandler)}};var W={mousedown:1,mousemove:2,mouseup:4};function J(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,z.apply(this,arguments)}E(J,z,{handler:function(t){var e=W[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:L,srcEvent:t}))}});var $={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},K={2:F,3:"pen",4:L,5:"kinect"},Q="pointerdown",tt="pointermove pointerup pointercancel";function te(){this.evEl=Q,this.evWin=tt,z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(Q="MSPointerDown",tt="MSPointerMove MSPointerUp MSPointerCancel"),E(te,z,{handler:function(t){var e=this.store,n=!1,r=$[t.type.toLowerCase().replace("ms","")],o=K[t.pointerType]||t.pointerType,i=j(e,t.pointerId,"pointerId");1&r&&(0===t.button||o==F)?i<0&&(e.push(t),i=e.length-1):12&r&&(n=!0),!(i<0)&&(e[i]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(i,1))}});var tn={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function tr(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,z.apply(this,arguments)}function to(t,e){var n=T(t.touches),r=T(t.changedTouches);return 12&e&&(n=k(n.concat(r),"identifier",!0)),[n,r]}E(tr,z,{handler:function(t){var e=tn[t.type];if(1===e&&(this.started=!0),this.started){var n=to.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}}});var ti={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ta(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},z.apply(this,arguments)}function tu(t,e){var n=T(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,i,a=T(t.changedTouches),u=[],s=this.target;if(i=n.filter(function(t){return w(t.target,s)}),1===e)for(o=0;o<i.length;)r[i[o].identifier]=!0,o++;for(o=0;o<a.length;)r[a[o].identifier]&&u.push(a[o]),12&e&&delete r[a[o].identifier],o++;if(u.length)return[k(i.concat(u),"identifier",!0),u]}function ts(){z.apply(this,arguments);var t=P(this.handler,this);this.touch=new ta(this.manager,t),this.mouse=new J(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function tc(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,tl.call(this,e)):12&t&&tl.call(this,e)}function tl(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},2500)}}function tf(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],i=Math.abs(e-o.x),a=Math.abs(n-o.y);if(i<=25&&a<=25)return!0}return!1}E(ta,z,{handler:function(t){var e=ti[t.type],n=tu.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:F,srcEvent:t})}}),E(ts,z,{handler:function(t,e,n){var r=n.pointerType==F,o=n.pointerType==L;if(!o||!n.sourceCapabilities||!n.sourceCapabilities.firesTouchEvents){if(r)tc.call(this,e,n);else if(o&&tf.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var tp=C(l.style,"touchAction"),td=u!==tp,th="compute",ty="auto",tg="manipulation",tv="none",tm="pan-x",tb="pan-y",tE=function(){if(!td)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||o.CSS.supports("touch-action",n)}),t}();function tP(t,e){this.manager=t,this.set(e)}function t_(t){var e;this.options=s({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=u===(e=this.options.enable)||e,this.state=1,this.simultaneous={},this.requireFail=[]}function tO(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function tS(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function tw(t,e){var n=e.manager;return n?n.get(t):t}function tM(){t_.apply(this,arguments)}function tx(){tM.apply(this,arguments),this.pX=null,this.pY=null}function tj(){tM.apply(this,arguments)}function tT(){t_.apply(this,arguments),this._timer=null,this._input=null}function tk(){tM.apply(this,arguments)}function tC(){tM.apply(this,arguments)}function tD(){t_.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function tR(t,e){var n,r;return(e=e||{}).recognizers=(n=e.recognizers,r=tR.defaults.preset,u===n?r:n),new tI(t,e)}function tI(t,e){var n;this.options=s({},tR.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(A?te:N?ta:I?ts:J))(this,Y),this.touchAction=new tP(this,this.options.touchAction),tA(this,!0),g(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function tA(t,e){var n,r=t.element;r.style&&(g(t.options.cssProps,function(o,i){n=C(r.style,i),e?(t.oldCssProps[n]=r.style[n],r.style[n]=o):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}tP.prototype={set:function(t){t==th&&(t=this.compute()),td&&this.manager.element.style&&tE[t]&&(this.manager.element.style[tp]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return g(this.manager.recognizers,function(e){_(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(M(t,tv))return tv;var e=M(t,tm),n=M(t,tb);return e&&n?tv:e||n?e?tm:tb:M(t,tg)?tg:ty}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented){e.preventDefault();return}var r=this.actions,o=M(r,tv)&&!tE[tv],i=M(r,tb)&&!tE[tb],a=M(r,tm)&&!tE[tm];if(o){var u=1===t.pointers.length,s=t.distance<2,c=t.deltaTime<250;if(u&&s&&c)return}if((!a||!i)&&(o||i&&6&n||a&&24&n))return this.preventSrc(e)},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}},t_.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(y(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=tw(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return y(t,"dropRecognizeWith",this)||(t=tw(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(y(t,"requireFailure",this))return this;var e=this.requireFail;return -1===j(e,t=tw(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(y(t,"dropRequireFailure",this))return this;t=tw(t,this);var e=j(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+tO(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+tO(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=s({},t);if(!_(this.options.enable,[this,e])){this.reset(),this.state=32;return}56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},E(tM,t_,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,o=this.attrTest(t);return r&&(8&n||!o)?16|e:r||o?4&n?8|e:2&e?4|e:2:32}}),E(tx,tM,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(tb),24&t&&e.push(tm),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,o=t.direction,i=t.deltaX,a=t.deltaY;return o&e.direction||(6&e.direction?(o=0===i?1:i<0?2:4,n=i!=this.pX,r=Math.abs(t.deltaX)):(o=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=o,n&&r>e.threshold&&o&e.direction},attrTest:function(t){return tM.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=tS(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),E(tj,tM,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tv]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),E(tT,t_,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ty]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,r&&n&&(!(12&t.eventType)||o)){if(1&t.eventType)this.reset(),this._timer=h(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8}else this.reset();return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),E(tk,tM,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tv]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),E(tC,tM,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return tx.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=tS(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),E(tD,t_,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[tg]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!=t.eventType)return this.failTimeout();var i=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||V(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&i?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=h(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),tR.VERSION="2.0.7",tR.defaults={domEvents:!1,touchAction:th,enable:!0,inputTarget:null,inputClass:null,preset:[[tk,{enable:!1}],[tj,{enable:!1},["rotate"]],[tC,{direction:6}],[tx,{direction:6},["swipe"]],[tD],[tD,{event:"doubletap",taps:2},["tap"]],[tT]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},tI.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e,n=this.session;if(!n.stopped){this.touchAction.preventDefaults(t);var r=this.recognizers,o=n.curRecognizer;(!o||o&&8&o.state)&&(o=n.curRecognizer=null);for(var i=0;i<r.length;)e=r[i],2!==n.stopped&&(!o||e==o||e.canRecognizeWith(o))?e.recognize(t):e.reset(),!o&&14&e.state&&(o=n.curRecognizer=e),i++}},get:function(t){if(t instanceof t_)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(y(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(y(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=j(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(u!==t&&u!==e){var n=this.handlers;return g(x(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(u!==t){var n=this.handlers;return g(x(t),function(t){e?n[t]&&n[t].splice(j(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&((n=i.createEvent("Event")).initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n));var n,r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<r.length;)r[o](e),o++}},destroy:function(){this.element&&tA(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(tR,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:tI,Input:z,TouchAction:tP,TouchInput:ta,MouseInput:J,PointerEventInput:te,TouchMouseInput:ts,SingleTouchInput:tr,Recognizer:t_,AttrRecognizer:tM,Tap:tD,Pan:tx,Swipe:tC,Pinch:tj,Rotate:tk,Press:tT,on:O,off:S,each:g,merge:b,extend:m,assign:s,inherit:E,bindFn:P,prefixed:C}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=tR,u!==(r=(function(){return tR}).call(e,n,e,t))&&(t.exports=r)}(window,document,0)},93096:function(t,e,n){var r="Expected a function",o=0/0,i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,f="object"==typeof self&&self&&self.Object===Object&&self,p=l||f||Function("return this")(),d=Object.prototype.toString,h=Math.max,y=Math.min,g=function(){return p.Date.now()};function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||e&&"object"==typeof e&&"[object Symbol]"==d.call(e))return o;if(v(t)){var e,n="function"==typeof t.valueOf?t.valueOf():t;t=v(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||s.test(t)?c(t.slice(2),r?2:8):a.test(t)?o:+t}t.exports=function(t,e,n){var o=!0,i=!0;if("function"!=typeof t)throw TypeError(r);return v(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),function(t,e,n){var o,i,a,u,s,c,l=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw TypeError(r);function b(e){var n=o,r=i;return o=i=void 0,l=e,u=t.apply(r,n)}function E(t){var n=t-c,r=t-l;return void 0===c||n>=e||n<0||p&&r>=a}function P(){var t,n,r,o=g();if(E(o))return _(o);s=setTimeout(P,(t=o-c,n=o-l,r=e-t,p?y(r,a-n):r))}function _(t){return(s=void 0,d&&o)?b(t):(o=i=void 0,u)}function O(){var t,n=g(),r=E(n);if(o=arguments,i=this,c=n,r){if(void 0===s)return l=t=c,s=setTimeout(P,e),f?b(t):u;if(p)return s=setTimeout(P,e),b(c)}return void 0===s&&(s=setTimeout(P,e)),u}return e=m(e)||0,v(n)&&(f=!!n.leading,a=(p="maxWait"in n)?h(m(n.maxWait)||0,e):a,d="trailing"in n?!!n.trailing:d),O.cancel=function(){void 0!==s&&clearTimeout(s),l=0,o=c=i=s=void 0},O.flush=function(){return void 0===s?u:_(g())},O}(t,e,{leading:o,maxWait:e,trailing:i})}},32676:function(t,e,n){var r=n(34155);t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}/**
   * splaytree v3.1.0
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   */var o=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function i(t,e){return t>e?1:t<e?-1:0}function a(t,e,n){for(var r=new o(null,null),i=r,a=r;;){var u=n(t,e.key);if(u<0){if(null===e.left)break;if(0>n(t,e.left.key)){var s=e.left;if(e.left=s.right,s.right=e,null===(e=s).left)break}a.left=e,a=e,e=e.left}else if(u>0){if(null===e.right)break;if(n(t,e.right.key)>0){var s=e.right;if(e.right=s.left,s.left=e,null===(e=s).right)break}i.right=e,i=e,e=e.right}else break}return i.right=e.left,a.left=e.right,e.left=r.right,e.right=r.left,e}function u(t,e,n,r){var i=new o(t,e);if(null===n)return i.left=i.right=null,i;n=a(t,n,r);var u=r(t,n.key);return u<0?(i.left=n.left,i.right=n,n.left=null):u>=0&&(i.right=n.right,i.left=n,n.right=null),i}function s(t,e,n){var r=null,o=null;if(e){e=a(t,e,n);var i=n(e.key,t);0===i?(r=e.left,o=e.right):i<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}var c=function(){function t(t){void 0===t&&(t=i),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=u(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new o(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=a(t,this._root,r),u=r(t,i.key);return 0===u?this._root=i:(u<0?(n.left=i.left,n.right=i,i.left=null):u>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:(e=a(t,e,n),0===n(t,e.key))?(null===e.left?r=e.right:(r=a(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=a(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=a(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],o=!1;!o;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):o=!0;return this},t.prototype.range=function(t,e,n,r){for(var o=[],i=this._comparator,a=this._root;0!==o.length||a;)if(a)o.push(a),a=a.left;else{if(i((a=o.pop()).key,e)>0)break;if(i(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var n=e.key;return t.push(n)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var n=e.data;return t.push(n)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,o=[];!n;)if(e)o.push(e),e=e.left;else if(o.length>0){if(e=o.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var o=r(t.key,e.key);if(0===o)break;o<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var o=r(t.key,e.key);if(0===o)break;o<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new o(null,null),a=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=a=a.next=n.pop()).right:r=!0;return a.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&function t(e,n,r,o,i){if(!(r>=o)){for(var a=e[r+o>>1],u=r-1,s=o+1;;){do u++;while(0>i(e[u],a));do s--;while(i(e[s],a)>0);if(u>=s)break;var c=e[u];e[u]=e[s],e[s]=c,c=n[u],n[u]=n[s],n[s]=c}t(e,n,r,s,i),t(e,n,s+1,o,i)}}(t,e,0,r-1,i),null===this._root)this._root=function t(e,n,r,i){var a=i-r;if(a>0){var u=r+Math.floor(a/2),s=e[u],c=n[u],l=new o(s,c);return l.left=t(e,n,r,u),l.right=t(e,n,u+1,i),l}return null}(t,e,0,r),this._size=r;else{var a=function(t,e,n){for(var r=new o(null,null),i=r,a=t,u=e;null!==a&&null!==u;)0>n(a.key,u.key)?(i.next=a,a=a.next):(i.next=u,u=u.next),i=i.next;return null!==a?i.next=a:null!==u&&(i.next=u),r.next}(this.toList(),function(t,e){for(var n=new o(null,null),r=n,i=0;i<t.length;i++)r=r.next=new o(t[i],e[i]);return r.next=null,n.next}(t,e),i);r=this._size+r,this._root=function t(e,n,r){var o=r-n;if(o>0){var i=n+Math.floor(o/2),a=t(e,n,i),u=e.head;return u.left=a,e.head=e.head.next,u.right=t(e,i+1,r),u}return null}({head:a},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return function t(e,n,r,o,i){if(e){o(""+n+(r?"└── ":"├── ")+i(e)+"\n");var a=n+(r?"    ":"│   ");e.left&&t(e.left,a,!1,o,i),e.right&&t(e.right,a,!0,o,i)}}(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,n){var r,o,i=this._comparator,c=s(t,this._root,i),l=c.left,f=c.right;0>i(t,e)?f=u(e,n,f,i):l=u(e,n,l,i),this._root=(r=l,null===(o=f)?r:(null===r||((o=a(r.key,o,i)).left=r),o))},t.prototype.split=function(t){return s(t,this._root,this._comparator)},t}(),l=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},f=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},p=Number.EPSILON;void 0===p&&(p=2220446049250313e-31);var d=p*p,h=function(t,e){if(-p<t&&t<p&&-p<e&&e<p)return 0;var n=t-e;return n*n<d*t*e?0:t<e?-1:1},y=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new g,this.yRounder=new g}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),g=function(){function e(){t(this,e),this.tree=new c,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===h(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===h(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),v=new y,m=function(t,e){return t.x*e.y-t.y*e.x},b=function(t,e){return t.x*e.x+t.y*e.y},E=function(t,e,n){return h(m({x:e.x-t.x,y:e.y-t.y},{x:n.x-t.x,y:n.y-t.y}),0)},P=function(t){return Math.sqrt(b(t,t))},_=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return m(o,r)/P(o)/P(r)},O=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return b(o,r)/P(o)/P(r)},S=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},w=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},M=function(t,e,n,r){if(0===e.x)return w(n,r,t.x);if(0===r.x)return w(t,e,n.x);if(0===e.y)return S(n,r,t.y);if(0===r.y)return S(t,e,n.y);var o=m(e,r);if(0==o)return null;var i={x:n.x-t.x,y:n.y-t.y},a=m(i,e)/o,u=m(i,r)/o;return{x:(t.x+u*e.x+(n.x+a*r.x))/2,y:(t.y+u*e.y+(n.y+a*r.y))/2}},x=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft)?t.isLeft?1:-1:T.compare(t.segment,n.segment)}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var o=e[n];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var o=this.point.events[r];void 0===o.consumedBy&&n.otherSE.point.events===o.otherSE.point.events&&n.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var o=r.otherSE;n.set(r,{sine:_(e.point,t.point,o.point),cosine:O(e.point,t.point,o.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var o=n.get(t),i=o.sine,a=o.cosine,u=n.get(e),s=u.sine,c=u.cosine;return i>=0&&s>=0?a<c?1:a>c?-1:0:i<0&&s<0?a<c?-1:a>c?1:0:s<i?-1:s>i?1:0}}}]),e}(),j=0,T=function(){function e(n,r,o,i){t(this,e),this.id=++j,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=o,this.windings=i}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,o=t.rightSE.point.x,i=e.rightSE.point.x;if(i<n)return 1;if(o<r)return -1;var a=t.leftSE.point.y,u=e.leftSE.point.y,s=t.rightSE.point.y,c=e.rightSE.point.y;if(n<r){if(u<a&&u<s)return 1;if(u>a&&u>s)return -1;var l=t.comparePoint(e.leftSE.point);if(l<0)return 1;if(l>0)return -1;var f=e.comparePoint(t.rightSE.point);return 0!==f?f:-1}if(n>r){if(a<u&&a<c)return -1;if(a>u&&a>c)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(a<u)return -1;if(a>u)return 1;if(o<i){var h=e.comparePoint(t.rightSE.point);if(0!==h)return h}if(o>i){var y=t.comparePoint(e.rightSE.point);if(y<0)return 1;if(y>0)return -1}if(o!==i){var g=s-a,v=o-n,m=c-u,b=i-r;if(g>v&&m<b)return 1;if(g<v&&m>b)return -1}return o>i?1:o<i||s<c?-1:s>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var o=(t.y-e.y)/r.y,i=e.x+o*r.x;if(t.x===i)return 0;var a=(t.x-e.x)/r.x,u=e.y+a*r.y;return t.y===u?0:t.y<u?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=f(e,n);if(null===r)return null;var o=this.leftSE.point,i=this.rightSE.point,a=t.leftSE.point,u=t.rightSE.point,s=l(e,a)&&0===this.comparePoint(a),c=l(n,o)&&0===t.comparePoint(o),p=l(e,u)&&0===this.comparePoint(u),d=l(n,i)&&0===t.comparePoint(i);if(c&&s)return d&&!p?i:!d&&p?u:null;if(c)return p&&o.x===u.x&&o.y===u.y?null:o;if(s)return d&&i.x===a.x&&i.y===a.y?null:a;if(d&&p)return null;if(d)return i;if(p)return u;var h=M(o,this.vector(),a,t.vector());return null!==h&&l(r,h)?v.round(h.x,h.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,o=new x(t,!0),i=new x(t,!1),a=this.rightSE;this.replaceRightSE(i),n.push(i),n.push(o);var u=new e(o,a,this.rings.slice(),this.windings.slice());return x.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),x.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(o.checkForConsuming(),i.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var o=e.compare(n,r);if(0!==o){if(o>0){var i=n;n=r,r=i}if(n.prev===r){var a=n;n=r,r=a}for(var u=0,s=r.rings.length;u<s;u++){var c=r.rings[u],l=r.windings[u],f=n.rings.indexOf(c);-1===f?(n.rings.push(c),n.windings.push(l)):n.windings[f]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,o=0,i=this.rings.length;o<i;o++){var a=this.rings[o],u=this.windings[o],s=e.indexOf(a);-1===s?(e.push(a),n.push(u)):n[s]+=u}for(var c=[],l=[],f=0,p=e.length;f<p;f++)if(0!==n[f]){var d=e[f],h=d.poly;if(-1===l.indexOf(h)){if(d.isExterior)c.push(h);else{-1===l.indexOf(h)&&l.push(h);var y=c.indexOf(d.poly);-1!==y&&c.splice(y,1)}}}for(var g=0,v=c.length;g<v;g++){var m=c[g].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t,e,n=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(H.type){case"union":var o=0===n.length,i=0===r.length;this._isInResult=o!==i;break;case"intersection":n.length<r.length?(t=n.length,e=r.length):(t=r.length,e=n.length),this._isInResult=e===H.numMultiPolys&&t<e;break;case"xor":var a=Math.abs(n.length-r.length);this._isInResult=a%2==1;break;case"difference":var u=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=u(n)!==u(r);break;default:throw Error("Unrecognized operation type found ".concat(H.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var o,i,a,u=x.comparePoints(t,n);if(u<0)o=t,i=n,a=1;else if(u>0)o=n,i=t,a=-1;else throw Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var s=new x(o,!0),c=new x(i,!1);return new e(s,c,[r],[a])}}]),e}(),k=function(){function e(n,r,o){if(t(this,e),!Array.isArray(n)||0===n.length||(this.poly=r,this.isExterior=o,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1]))throw Error("Input geometry is not a valid Polygon or MultiPolygon");var i=v.round(n[0][0],n[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var a=i,u=1,s=n.length;u<s;u++){if("number"!=typeof n[u][0]||"number"!=typeof n[u][1])throw Error("Input geometry is not a valid Polygon or MultiPolygon");var c=v.round(n[u][0],n[u][1]);(c.x!==a.x||c.y!==a.y)&&(this.segments.push(T.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}(i.x!==a.x||i.y!==a.y)&&this.segments.push(T.fromRing(a,i,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),C=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new k(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var o=1,i=n.length;o<i;o++){var a=new k(n[o],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),o=0,i=r.length;o<i;o++)t.push(r[o]);return t}}]),e}(),D=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var o=0,i=n.length;o<i;o++){var a=new C(n[o],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),o=0,i=r.length;o<i;o++)t.push(r[o]);return t}}]),e}(),R=function(){function e(n){t(this,e),this.events=n;for(var r=0,o=n.length;r<o;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,o=t.length;r<o;r++){var i=t[r];if(i.isInResult()&&!i.ringOut){for(var a=null,u=i.leftSE,s=i.rightSE,c=[u],l=u.point,f=[];a=u,u=s,c.push(u),u.point!==l;)for(;;){var p=u.getAvailableLinkedEvents();if(0===p.length){var d=c[0].point,h=c[c.length-1].point;throw Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(h.x,", ").concat(h.y,"]."))}if(1===p.length){s=p[0].otherSE;break}for(var y=null,g=0,v=f.length;g<v;g++)if(f[g].point===u.point){y=g;break}if(null!==y){var m=f.splice(y)[0],b=c.splice(m.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()));continue}f.push({index:c.length,point:u.point});var E=u.getLeftmostComparator(a);s=p.sort(E)[0].otherSE;break}n.push(new e(c))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var o=this.events[n].point;0!==E(o,t,this.events[n+1].point)&&(e.push(o),t=o)}if(1===e.length)return null;var i=e[0],a=e[1];0===E(i,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,s=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,l=[],f=s;f!=c;f+=u)l.push([e[f].x,e[f].y]);return l}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];x.compare(t,r)>0&&(t=r)}for(var o=t.segment.prevInResult(),i=o?o.prevInResult():null;;){if(!o)return null;if(!i)return o.ringOut;if(i.ringOut!==o.ringOut){if(i.ringOut.enclosingRing()!==o.ringOut)return o.ringOut;return o.ringOut.enclosingRing()}i=(o=i.prevInResult())?o.prevInResult():null}}}]),e}(),I=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),A=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];if(!o.poly){if(o.isExteriorRing())e.push(new I(o));else{var i=o.enclosingRing();i.poly||e.push(new I(i)),i.poly.addInterior(o)}}}return e}}]),e}(),N=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.compare;t(this,e),this.queue=n,this.tree=new c(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=r,i=r,a=void 0,u=void 0;void 0===a;)null===(o=this.tree.prev(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);for(;void 0===u;)null===(i=this.tree.next(i))?u=null:void 0===i.key.consumedBy&&(u=i.key);if(t.isLeft){var s=null;if(a){var c=a.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(s=c),!a.isAnEndpoint(c)))for(var l=this._splitSafely(a,c),f=0,p=l.length;f<p;f++)n.push(l[f])}var d=null;if(u){var h=u.getIntersection(e);if(null!==h&&(e.isAnEndpoint(h)||(d=h),!u.isAnEndpoint(h)))for(var y=this._splitSafely(u,h),g=0,v=y.length;g<v;g++)n.push(y[g])}if(null!==s||null!==d){var m=null;m=null===s?d:null===d?s:0>=x.comparePoints(s,d)?s:d,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var b=e.split(m),E=0,P=b.length;E<P;E++)n.push(b[E])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&u){var _=a.getIntersection(u);if(null!==_){if(!a.isAnEndpoint(_))for(var O=this._splitSafely(a,_),S=0,w=O.length;S<w;S++)n.push(O[S]);if(!u.isAnEndpoint(_))for(var M=this._splitSafely(u,_),j=0,T=M.length;j<T;j++)n.push(M[j])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),F=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,L=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,H=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){H.type=t,v.reset();for(var r=[new D(e,!0)],o=0,i=n.length;o<i;o++)r.push(new D(n[o],!1));if(H.numMultiPolys=r.length,"difference"===H.type)for(var a=r[0],u=1;u<r.length;)null!==f(r[u].bbox,a.bbox)?u++:r.splice(u,1);if("intersection"===H.type){for(var s=0,l=r.length;s<l;s++)for(var p=r[s],d=s+1,h=r.length;d<h;d++)if(null===f(p.bbox,r[d].bbox))return[]}for(var y=new c(x.compare),g=0,m=r.length;g<m;g++)for(var b=r[g].getSweepEvents(),E=0,P=b.length;E<P;E++)if(y.insert(b[E]),y.size>F)throw Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new N(y),O=y.size,S=y.pop();S;){var w=S.key;if(y.size===O){var M=w.segment;throw Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(M.id," ")+"[".concat(M.leftSE.point.x,", ").concat(M.leftSE.point.y,"] -> ")+"[".concat(M.rightSE.point.x,", ").concat(M.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(y.size>F)throw Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>L)throw Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var j=_.process(w),T=0,k=j.length;T<k;T++){var C=j[T];void 0===C.consumedBy&&y.insert(C)}O=y.size,S=y.pop()}v.reset();var I=R.factory(_.segments);return new A(I).getGeom()}}]),e}());return{union:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return H.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return H.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return H.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return H.run("difference",t,n)}}}()},92703:function(t,e,n){"use strict";var r=n(50414);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,a){if(a!==r){var u=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},45697:function(t,e,n){t.exports=n(92703)()},50414:function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},82582:function(t){t.exports=function(){"use strict";function t(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function e(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e){o(t,0,t.children.length,e,t)}function o(t,e,n,r,o){o||(o=p(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var a=e;a<n;a++){var u=t.children[a];i(o,t.leaf?r(u):u)}return o}function i(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function a(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function s(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function l(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(n,r,o,i,a){for(var u=[r,o];u.length;)if(!((o=u.pop())-(r=u.pop())<=i)){var s=r+Math.ceil((o-r)/i/2)*i;(function e(n,r,o,i,a){for(;i>o;){if(i-o>600){var u=i-o+1,s=r-o+1,c=Math.log(u),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(u-l)/u)*(s-u/2<0?-1:1),p=Math.max(o,Math.floor(r-s*l/u+f)),d=Math.min(i,Math.floor(r+(u-s)*l/u+f));e(n,r,p,d,a)}var h=n[r],y=o,g=i;for(t(n,o,r),a(n[i],h)>0&&t(n,o,i);y<g;){for(t(n,y,g),y++,g--;0>a(n[y],h);)y++;for(;a(n[g],h)>0;)g--}0===a(n[o],h)?t(n,o,g):t(n,++g,i),g<=r&&(o=g+1),r<=g&&(i=g-1)}})(n,s,r||0,o||n.length-1,a||e),u.push(r,s,s,o)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,o=[];e;){for(var i=0;i<e.children.length;i++){var a=e.children[i],u=e.leaf?r(a):a;f(t,u)&&(e.leaf?n.push(a):l(t,u)?this._all(a,n):o.push(a))}e=o.pop()}return n},n.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var o=e.children[r],i=e.leaf?this.toBBox(o):o;if(f(t,i)){if(e.leaf||l(t,i))return!0;n.push(o)}}e=n.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}}else this.data=n;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=p([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,i=this.data,a=this.toBBox(t),u=[],s=[];i||u.length;){if(i||(i=u.pop(),r=u[u.length-1],n=s.pop(),o=!0),i.leaf){var c=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return -1}(t,i.children,e);if(-1!==c)return i.children.splice(c,1),u.push(i),this._condense(u),this}o||i.leaf||!l(i,a)?r?(n++,i=r.children[n],o=!1):i=null:(u.push(i),s.push(n),n=0,r=i,i=i.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},n.prototype._build=function(t,e,n,o){var i,a=n-e+1,u=this._maxEntries;if(a<=u)return r(i=p(t.slice(e,n+1)),this.toBBox),i;o||(o=Math.ceil(Math.log(a)/Math.log(u)),u=Math.ceil(a/Math.pow(u,o-1))),(i=p([])).leaf=!1,i.height=o;var s=Math.ceil(a/u),c=s*Math.ceil(Math.sqrt(u));d(t,e,n,c,this.compareMinX);for(var l=e;l<=n;l+=c){var f=Math.min(l+c-1,n);d(t,l,f,s,this.compareMinY);for(var h=l;h<=f;h+=s){var y=Math.min(h+s-1,f);i.children.push(this._build(t,h,y,o-1))}}return r(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var o=1/0,i=1/0,a=void 0,u=0;u<e.children.length;u++){var c=e.children[u],l=s(c),f=(Math.max(c.maxX,t.maxX)-Math.min(c.minX,t.minX))*(Math.max(c.maxY,t.maxY)-Math.min(c.minY,t.minY))-l;f<i?(i=f,o=l<o?l:o,a=c):f===i&&l<o&&(o=l,a=c)}e=a||e.children[0]}return e},n.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),i(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},n.prototype._split=function(t,e){var n=t[e],o=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,o);var a=this._chooseSplitIndex(n,i,o),u=p(n.children.splice(a,n.children.length-a));u.height=n.height,u.leaf=n.leaf,r(n,this.toBBox),r(u,this.toBBox),e?t[e-1].children.push(u):this._splitRoot(n,u)},n.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,a,u,c=1/0,l=1/0,f=e;f<=n-e;f++){var p=o(t,0,f,this.toBBox),d=o(t,f,n,this.toBBox),h=(i=void 0,a=void 0,i=Math.max(p.minX,d.minX),a=Math.max(p.minY,d.minY),Math.max(0,Math.min(p.maxX,d.maxX)-i)*Math.max(0,Math.min(p.maxY,d.maxY)-a)),y=s(p)+s(d);h<c?(c=h,r=f,l=y<l?y:l):h===c&&y<l&&(l=y,r=f)}return r||n-e},n.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:a,o=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,o)&&t.children.sort(r)},n.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var a=this.toBBox,u=o(t,0,e,a),s=o(t,n-e,n,a),l=c(u)+c(s),f=e;f<n-e;f++){var p=t.children[f];i(u,t.leaf?a(p):p),l+=c(u)}for(var d=n-e-1;d>=e;d--){var h=t.children[d];i(s,t.leaf?a(h):h),l+=c(s)}return l},n.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)i(e[r],t)},n.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():r(t[e],this.toBBox)},n}()},10663:function(t,e){"use strict";var n,r,o,i,a,u,s,c,l,f,p,d,h,y;Object.defineProperty(e,"__esModule",{value:!0}),e.EDIT_TYPE=e.ELEMENT_TYPE=e.GUIDE_TYPE=e.RENDER_STATE=e.RENDER_TYPE=e.SHAPE=e.GEOJSON_TYPE=void 0,e.GEOJSON_TYPE=n,(c=n||(e.GEOJSON_TYPE=n={})).POINT="Point",c.LINE_STRING="LineString",c.POLYGON="Polygon",e.SHAPE=r,(l=r||(e.SHAPE=r={})).POINT="Point",l.LINE_STRING="LineString",l.POLYGON="Polygon",l.RECTANGLE="Rectangle",l.CIRCLE="Circle",e.RENDER_TYPE=o,(f=o||(e.RENDER_TYPE=o={})).POINT="Point",f.LINE_STRING="LineString",f.POLYGON="Polygon",f.RECTANGLE="Rectangle",e.RENDER_STATE=i,(p=i||(e.RENDER_STATE=i={})).INACTIVE="INACTIVE",p.UNCOMMITTED="UNCOMMITTED",p.SELECTED="SELECTED",p.HOVERED="HOVERED",p.CLOSING="CLOSING",e.GUIDE_TYPE=a,(d=a||(e.GUIDE_TYPE=a={})).TENTATIVE="tentative",d.EDIT_HANDLE="editHandle",d.CURSOR_EDIT_HANDLE="cursorEditHandle",e.ELEMENT_TYPE=u,(h=u||(e.ELEMENT_TYPE=u={})).FEATURE="feature",h.FILL="fill",h.SEGMENT="segment",h.EDIT_HANDLE="editHandle",h.TOOLTIP="tooltip",e.EDIT_TYPE=s,(y=s||(e.EDIT_TYPE=s={})).ADD_FEATURE="addFeature",y.ADD_POSITION="addPosition",y.REMOVE_POSITION="removePosition",y.ADD_TENTATIVE_POSITION="addTentativePosition",y.MOVE_POSITION="movePosition",y.FINISH_MOVE_POSITION="finishMovePosition"},76191:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(10663),o=n(71103);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){var t,e;function n(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),a(this,"_tentativeFeature",void 0),a(this,"_editHandles",void 0),this._tentativeFeature=null,this._editHandles=null}return t=[{key:"handlePan",value:function(t,e){}},{key:"handleClick",value:function(t,e){}},{key:"handleDblClick",value:function(t,e){}},{key:"handlePointerMove",value:function(t,e){}},{key:"handleStartDragging",value:function(t,e){}},{key:"handleStopDragging",value:function(t,e){}},{key:"handleKeyUp",value:function(t,e){}},{key:"getGuides",value:function(t){return null}},{key:"getTooltips",value:function(t){return[]}},{key:"handleDragging",value:function(t,e){}},{key:"getTentativeFeature",value:function(){return this._tentativeFeature}},{key:"getEditHandles",value:function(){return this._editHandles}},{key:"setTentativeFeature",value:function(t){this._tentativeFeature=t}},{key:"getEditHandlesFromFeature",value:function(t,e){var n=(0,o.getFeatureCoordinates)(t);return n?n.map(function(n,o){return{type:"Feature",properties:{renderType:t.properties.renderType,guideType:r.GUIDE_TYPE.EDIT_HANDLE,editHandleType:"existing",featureIndex:e,positionIndexes:[o]},geometry:{type:r.GEOJSON_TYPE.POINT,coordinates:n}}}):null}},{key:"getSelectedFeature",value:function(t,e){var n=t.data,r=t.selectedIndexes,i=n&&n.features,a=(0,o.isNumeric)(e)?Number(e):r&&r[0];return i&&i[a]}}],i(n.prototype,t),e&&i(n,e),n}();e.default=u},95848:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=n(87359),i=n(10663),a=(r=n(76191))&&r.__esModule?r:{default:r},u=n(71103);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(a,t);var e,n,r=function(){var t,e,n=f(a);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=f(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===s(t)||"function"==typeof t)?t:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(this)};function a(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=[{key:"handleClick",value:function(t,e){var n=t.picks&&t.picks[0],r=e.selectedIndexes&&e.selectedIndexes[0];if(n&&n.object&&n.featureIndex===r){var a=n.type,s=n.featureIndex,c=n.index,l=this.getSelectedFeature(e,s);if(l&&(l.geometry.type===i.GEOJSON_TYPE.POLYGON||l.geometry.type===i.GEOJSON_TYPE.LINE_STRING)&&a===i.ELEMENT_TYPE.SEGMENT){var f=(0,u.getFeatureCoordinates)(l);if(!f)return;var p=(c+1)%f.length,d=l.geometry.type===i.SHAPE.POLYGON?[0,p]:[p],h=this._getPointOnSegment(l,n,t.mapCoords),y=new o.ImmutableFeatureCollection(e.data).addPosition(s,d,h).getObject();e.onEdit({editType:i.EDIT_TYPE.ADD_POSITION,updatedData:y,editContext:[{featureIndex:s,editHandleIndex:p,screenCoords:e.viewport&&e.viewport.project(h),mapCoords:h}]})}}}},{key:"handleStopDragging",value:function(t,e){var n=t.picks&&t.picks[0];if(n&&n.Object&&(0,u.isNumeric)(n.featureIndex))switch(n.object.type){case i.ELEMENT_TYPE.FEATURE:case i.ELEMENT_TYPE.FILL:case i.ELEMENT_TYPE.EDIT_HANDLE:this._handleDragging(t,e)}}},{key:"_handleDragging",value:function(t,e){var n=e.onEdit,r=this.getSelectedFeature(e),o=t.isDragging,a=t.pointerDownPicks,s=t.screenCoords,c=e.lastPointerMoveEvent,l=a&&a[0];if(l&&l.object&&(0,u.isNumeric)(l.featureIndex)){var f=l.type,p=l.index,d=o?i.EDIT_TYPE.MOVE_POSITION:i.EDIT_TYPE.FINISH_MOVE_POSITION;switch(f){case i.ELEMENT_TYPE.FEATURE:case i.ELEMENT_TYPE.FILL:case i.ELEMENT_TYPE.SEGMENT:if(!e.featuresDraggable)break;var h=s[0]-c.screenCoords[0],y=s[1]-c.screenCoords[1];n({editType:d,updatedData:this._updateFeature(e,"feature",{dx:h,dy:y}),editContext:null});break;case i.ELEMENT_TYPE.EDIT_HANDLE:var g=r.properties.shape===i.SHAPE.RECTANGLE?"rectangle":"editHandle";n({editType:d,updatedData:this._updateFeature(e,g,{editHandleIndex:p,mapCoords:t.mapCoords}),editContext:null})}}}},{key:"handlePointerMove",value:function(t,e){this.getSelectedFeature(e)&&t.isDragging&&this._handleDragging(t,e)}},{key:"_updateFeature",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.data,a=t.selectedIndexes,s=t.viewport,l=a&&a[0],f=this.getSelectedFeature(t,l),p=null,d=(0,u.getFeatureCoordinates)(f);if(!d)return null;var h=function(t){if(Array.isArray(t))return c(t)}(d)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(d)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}}(d)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();switch(e){case"editHandle":var y=f.geometry.type===i.GEOJSON_TYPE.POLYGON?[0,n.editHandleIndex]:[n.editHandleIndex];return new o.ImmutableFeatureCollection(r).replacePosition(l,y,n.mapCoords).getObject();case"feature":var g=n.dx,v=n.dy;return h=h.map(function(t){var e=s&&s.project(t);return e?(e[0]+=g,e[1]+=v,s&&s.unproject(e)):null}).filter(Boolean),p={type:f.geometry.type,coordinates:f.geometry.type===i.GEOJSON_TYPE.POLYGON?[h]:f.geometry.type===i.GEOJSON_TYPE.POINT?h[0]:h},new o.ImmutableFeatureCollection(r).replaceGeometry(l,p).getObject();case"rectangle":return h=(0,u.updateRectanglePosition)(f,n.editHandleIndex,n.mapCoords),p={type:i.GEOJSON_TYPE.POLYGON,coordinates:h},new o.ImmutableFeatureCollection(r).replaceGeometry(l,p).getObject();default:return r&&new o.ImmutableFeatureCollection(r).getObject()}}},{key:"_getPointOnSegment",value:function(t,e,n){var r=(0,u.getFeatureCoordinates)(t);if(!r)return null;var o=e.index,i=e.index+1;return(0,u.findClosestPointOnLineSegment)(r[o],r[i],n)}},{key:"_getCursorEditHandle",value:function(t,e){if(!t)return null;var n=t.isDragging,r=t.picks,o=r&&r[0];if(!o||!(0,u.isNumeric)(o.featureIndex)||o.type!==i.ELEMENT_TYPE.SEGMENT||n||e.geometry.type!==i.GEOJSON_TYPE.POLYGON&&e.geometry.type!==i.GEOJSON_TYPE.LINE_STRING)return null;var a=this._getPointOnSegment(e,o,t.mapCoords);return a?{type:"Feature",properties:{guideType:i.GUIDE_TYPE.CURSOR_EDIT_HANDLE,shape:e.properties.shape,positionIndexes:[-1],editHandleType:"intermediate"},geometry:{type:i.GEOJSON_TYPE.POINT,coordinates:a}}:null}},{key:"getGuides",value:function(t){var e=this.getSelectedFeature(t),n=t.selectedIndexes&&t.selectedIndexes[0];if(!e||e.geometry.type===i.GEOJSON_TYPE.POINT)return null;var r=t.lastPointerMoveEvent,o=this.getEditHandlesFromFeature(e,n)||[],a=this._getCursorEditHandle(r,e);return a&&o.push(a),{type:"FeatureCollection",features:o.length?o:null}}}],l(a.prototype,e),n&&l(a,n),a}(a.default);e.default=d},69993:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"EditingMode",{enumerable:!0,get:function(){return o.default}});var r,o=(r=n(95848))&&r.__esModule?r:{default:r}},71103:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNumeric=i,e.parseEventElement=function(t,e,n){var o=t.target;if(!o||!o.dataset||!o.dataset.type)return null;var a=o.dataset.featureIndex;a=i(a)?Number(a):-1;var u=o.dataset.index;u=i(u)?Number(u):void 0;var s=o.dataset.type,c=n&&n.find(function(t){return t.properties.guideType===r.GUIDE_TYPE.TENTATIVE}),l=null,f=!1;switch(s){case r.ELEMENT_TYPE.EDIT_HANDLE:l=n.find(function(t){var e=t.properties.positionIndexes;return!!e&&e[e.length-1]===u}),f=!0;break;case r.ELEMENT_TYPE.SEGMENT:case r.ELEMENT_TYPE.FEATURE:case r.ELEMENT_TYPE.FILL:l=e[a]||c}return{object:l,isGuide:f,type:s,index:u,featureIndex:a}},e.getScreenCoords=function(t){var e=t.offsetCenter,n=e.x,r=e.y;return[Number(n),Number(r)]},e.findClosestPointOnLineSegment=function(t,e,n){var r=(e[1]-t[1])/(e[0]-t[0]),o=t[1]-r*t[0];if(!isFinite(r)){var i=[t[0],n[1]];return u(t,e,i)?i:null}if(n[0]*r+o-n[1]==0)return u(t,e,n)?n:null;var a=(r*n[1]+n[0]-r*o)/(r*r+1),s=r*a+o;return u(t,e,[a,s])?[a,s]:null},e.getFeatureCoordinates=a,e.updateRectanglePosition=function(t,e,n){var i=a(t);if(!i)return null;var u=i.slice(0,4);u[e%4]=n;var s=u[(e+2)%4],c=u[e%4];return u[(e+1)%4]=[c[0],s[1]],u[(e+3)%4]=[s[0],c[1]],t.geometry.type===r.GEOJSON_TYPE.POLYGON?[[].concat(function(t){if(Array.isArray(t))return o(t)}(u)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(u)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}}(u)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[u[0]])]:u};var r=n(10663);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return!Array.isArray(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function a(t){var e=t&&t.geometry&&t.geometry.coordinates;if(!e)return null;var n=t.geometry.type===r.GEOJSON_TYPE.POLYGON,o=t.geometry.type===r.GEOJSON_TYPE.POINT;return n?e[0]:o?[e]:e}function u(t,e,n){var r=[Math.min(t[0],e[0]),Math.max(t[0],e[0]),Math.min(t[1],e[1]),Math.max(t[1],e[1])];return n[0]>=r[0]&&n[0]<=r[1]&&n[1]>=r[2]&&n[1]<=r[3]}},35210:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==l(t)&&"function"!=typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(n(67294)),i=n(10663),a=(r=n(34861))&&r.__esModule?r:{default:r},u=n(71103),s=n(53723);function c(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach(function(e){m(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=v({},a.default.defaultProps,{clickRadius:0,featureShape:"circle",editHandleShape:"rect",editHandleStyle:s.editHandleStyle,featureStyle:s.featureStyle,tooltipStyle:s.tooltipStyle,featuresDraggable:!0}),E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(a,t);var e,n,r=function(){var t,e,n=h(a);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=h(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===l(t)||"function"==typeof t)?t:d(this)};function a(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=Array(e),s=0;s<e;s++)n[s]=arguments[s];return m(d(t=r.call.apply(r,[this].concat(n))),"_getEditHandleState",function(e,n){var r=t.state,o=r.pointerDownPicks,a=r.hovered;if(n)return n;var u=e.properties.positionIndexes[0],s=null,c=o&&o[0]&&o[0].object;if(c&&c.guideType===i.GUIDE_TYPE.EDIT_HANDLE&&(s=c.index),u===s||t.state.selectedEditHandleIndexes.includes(u))return i.RENDER_STATE.SELECTED;if(a&&a.type===i.ELEMENT_TYPE.EDIT_HANDLE){if(a.index===u)return i.RENDER_STATE.HOVERED;if(0===a.index&&e.properties.guideType===i.GUIDE_TYPE.CURSOR_EDIT_HANDLE)return i.RENDER_STATE.CLOSING}return i.RENDER_STATE.INACTIVE}),m(d(t),"_getFeatureRenderState",function(e,n){var r=t.state.hovered,o=t._getSelectedFeatureIndex();return n||(e===o?i.RENDER_STATE.SELECTED:r&&r.type===i.ELEMENT_TYPE.FEATURE&&r.featureIndex===e?i.RENDER_STATE.HOVERED:i.RENDER_STATE.INACTIVE)}),m(d(t),"_getStyleProp",function(t,e){return"function"==typeof t?t(e):t}),m(d(t),"_renderEditHandle",function(e,n){var r=(0,u.getFeatureCoordinates)(e),a=t.project(r&&r[0]);if(!a)return null;var s=e.properties,c=s.featureIndex,l=s.positionIndexes,f=s.editHandleType,p=t.props,d=p.clickRadius,h=p.editHandleShape,y=p.editHandleStyle,g=l.length>1?l[1]:l[0],m=t._getStyleProp(h,{feature:n||e,index:g,featureIndex:c,state:t._getEditHandleState(e)}),b=t._getStyleProp(y,{feature:n||e,index:g,featureIndex:c,shape:m,state:t._getEditHandleState(e)});e.properties.guideType===i.GUIDE_TYPE.CURSOR_EDIT_HANDLE&&(b=v({},b,{pointerEvents:"none"}));var E="".concat(i.ELEMENT_TYPE.EDIT_HANDLE,".").concat(c,".").concat(g,".").concat(f);switch(m){case"circle":return o.createElement("g",{key:E,transform:"translate(".concat(a[0],", ").concat(a[1],")")},o.createElement("circle",{"data-type":i.ELEMENT_TYPE.EDIT_HANDLE,"data-index":g,"data-feature-index":c,key:"".concat(E,".hidden"),style:v({},b,{stroke:"none",fill:"#000",fillOpacity:0}),cx:0,cy:0,r:d}),o.createElement("circle",{"data-type":i.ELEMENT_TYPE.EDIT_HANDLE,"data-index":g,"data-feature-index":c,key:E,style:b,cx:0,cy:0}));case"rect":return o.createElement("g",{key:E,transform:"translate(".concat(a[0],", ").concat(a[1],")")},o.createElement("rect",{"data-type":i.ELEMENT_TYPE.EDIT_HANDLE,"data-index":g,"data-feature-index":c,key:"".concat(E,".hidden"),style:v({},b,{height:d,width:d,fill:"#000",fillOpacity:0}),r:d}),o.createElement("rect",{"data-type":i.ELEMENT_TYPE.EDIT_HANDLE,"data-index":g,"data-feature-index":c,key:"".concat(E),style:b}));default:return null}}),m(d(t),"_renderSegment",function(e,n,r,a){var u=t._getPathInScreenCoords(r,i.GEOJSON_TYPE.LINE_STRING),s=a.radius,c=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(a,["radius"]),l=t.props.clickRadius,f="".concat(i.ELEMENT_TYPE.SEGMENT,".").concat(e,".").concat(n);return o.createElement("g",{key:f},o.createElement("path",{key:"".concat(f,".hidden"),"data-type":i.ELEMENT_TYPE.SEGMENT,"data-index":n,"data-feature-index":e,style:v({},c,{stroke:"rgba(0,0,0,0)",strokeWidth:l||s,opacity:0}),d:u}),o.createElement("path",{key:f,"data-type":i.ELEMENT_TYPE.SEGMENT,"data-index":n,"data-feature-index":e,style:c,d:u}))}),m(d(t),"_renderSegments",function(e,n,r){for(var o=[],i=0;i<n.length-1;i++)o.push(t._renderSegment(e,i,[n[i],n[i+1]],r));return o}),m(d(t),"_renderFill",function(e,n,r){var a=t._getPathInScreenCoords(n,i.GEOJSON_TYPE.POLYGON);return o.createElement("path",{key:"".concat(i.ELEMENT_TYPE.FILL,".").concat(e),"data-type":i.ELEMENT_TYPE.FILL,"data-feature-index":e,style:v({},r,{stroke:"none"}),d:a})}),m(d(t),"_renderTentativeFeature",function(e,n){var r,o,a,s=t.props.featureStyle,c=e.geometry.type,l=e.properties,p=null==l?void 0:l.shape,d=(0,u.getFeatureCoordinates)(e);if(!d||!Array.isArray(d)||d.length<2)return null;var h=d[0],y=d[d.length-1],g=t._getStyleProp(s,{feature:e,index:null,state:i.RENDER_STATE.UNCOMMITTED}),v=t._renderFill("tentative",d,g);switch(p||c){case i.SHAPE.LINE_STRING:case i.SHAPE.POLYGON:var m=t._getStyleProp(s,{feature:e,state:i.RENDER_STATE.SELECTED});if(n){var b=d[d.length-2];r=t._renderSegments("tentative",d.slice(0,d.length-1),m),o=t._renderSegment("tentative-uncommitted",d.length-2,[b,y],g)}else r=t._renderSegments("tentative",d,m);if(p===i.SHAPE.POLYGON){var E=t._getStyleProp(s,{feature:e,index:null,state:i.RENDER_STATE.CLOSING});a=t._renderSegment("tentative-closing",d.length-1,[y,h],E)}break;case i.SHAPE.RECTANGLE:o=t._renderSegments("tentative",[].concat(function(t){if(Array.isArray(t))return f(t)}(d)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(d)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}}(d)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[h]),g)}return[v,r,o,a].filter(Boolean)}),m(d(t),"_renderTooltips",function(e){var n=t._getStyleProp(t.props.tooltipStyle,null);return o.createElement("g",{key:"feature-tooltips"},e.map(function(e,r){var a="".concat(i.ELEMENT_TYPE.TOOLTIP,".").concat(r),u=t.project([e.position[0],e.position[1]]);return o.createElement("text",{key:a,x:u[0],y:u[1],style:n},e.text)}))}),m(d(t),"_renderGuides",function(e){var n=t.getFeatures(),r=e&&e.find(function(t){return t.properties.guideType===i.GUIDE_TYPE.CURSOR_EDIT_HANDLE}),a=n.find(function(t){return t.properties.guideType===i.GUIDE_TYPE.TENTATIVE});return o.createElement("g",{key:"feature-guides"},e.map(function(e){switch(e.properties.guideType){case i.GUIDE_TYPE.TENTATIVE:return t._renderTentativeFeature(e,r);case i.GUIDE_TYPE.EDIT_HANDLE:case i.GUIDE_TYPE.CURSOR_EDIT_HANDLE:if((e.properties.shape||e.geometry.type)===i.SHAPE.RECTANGLE&&"intermediate"===e.properties.editHandleType)return null;var o=n&&n[e.properties.featureIndex]||a;return t._renderEditHandle(e,o);default:return null}}))}),m(d(t),"_renderPoint",function(e,n,r){var a=t._getFeatureRenderState(n),u=t.props,s=u.featureStyle,c=u.featureShape,l=u.clickRadius,f=t._getStyleProp(c,{feature:e,index:n,state:a}),p=t._getStyleProp(s,{feature:e,index:n,state:a}),d="feature.".concat(n);return"rect"===f?o.createElement("g",{key:d,transform:"translate(".concat(r[0][0],", ").concat(r[0][1],")")},o.createElement("rect",{"data-type":i.ELEMENT_TYPE.FEATURE,"data-feature-index":n,key:"".concat(d,".hidden"),style:v({},p,{width:l,height:l,fill:"#000",fillOpacity:0})}),o.createElement("rect",{"data-type":i.ELEMENT_TYPE.FEATURE,"data-feature-index":n,key:d,style:p})):o.createElement("g",{key:"feature.".concat(n),transform:"translate(".concat(r[0][0],", ").concat(r[0][1],")")},o.createElement("circle",{"data-type":i.ELEMENT_TYPE.FEATURE,"data-feature-index":n,key:"".concat(d,".hidden"),style:v({},p,{opacity:0}),cx:0,cy:0,r:l}),o.createElement("circle",{"data-type":i.ELEMENT_TYPE.FEATURE,"data-feature-index":n,key:d,style:p,cx:0,cy:0}))}),m(d(t),"_renderPath",function(e,n,r){var a=t.props,u=a.featureStyle,s=a.clickRadius,c=n===t._getSelectedFeatureIndex(),l=t._getFeatureRenderState(n),f=t._getStyleProp(u,{feature:e,index:n,state:l}),p="feature.".concat(n);return c?o.createElement("g",{key:p},t._renderSegments(n,e.geometry.coordinates,f)):o.createElement("g",{key:p},o.createElement("path",{"data-type":i.ELEMENT_TYPE.FEATURE,"data-feature-index":n,key:"".concat(p,".hidden"),style:v({},f,{stroke:"rgba(0,0,0,0)",strokeWidth:s,opacity:0}),d:r}),o.createElement("path",{"data-type":i.ELEMENT_TYPE.FEATURE,"data-feature-index":n,key:p,style:f,d:r}))}),m(d(t),"_renderPolygon",function(e,n,r){var a=t.props.featureStyle,s=n===t._getSelectedFeatureIndex(),c=t._getFeatureRenderState(n),l=t._getStyleProp(a,{feature:e,index:n,state:c}),f="feature.".concat(n);if(s){var p=(0,u.getFeatureCoordinates)(e);return p?o.createElement("g",{key:f},t._renderFill(n,p,l),t._renderSegments(n,p,l)):null}return o.createElement("path",{"data-type":i.ELEMENT_TYPE.FEATURE,"data-feature-index":n,key:f,style:l,d:r})}),m(d(t),"_renderFeature",function(e,n){var r=(0,u.getFeatureCoordinates)(e);if(!r||!r.length)return null;var o=e.properties,a=e.geometry.type,s=null==o?void 0:o.shape,c=t._getPathInScreenCoords(r,a);if(!c)return null;switch(s||a){case i.SHAPE.POINT:return t._renderPoint(e,n,c);case i.SHAPE.LINE_STRING:return t._renderPath(e,n,c);case i.SHAPE.CIRCLE:case i.SHAPE.POLYGON:case i.SHAPE.RECTANGLE:return t._renderPolygon(e,n,c);default:return null}}),m(d(t),"_renderCanvas",function(){var e=t.getFeatures(),n=t._modeHandler&&t._modeHandler.getGuides(t.getModeProps()),r=n&&n.features,i=t._modeHandler&&t._modeHandler.getTooltips(t.getModeProps());return o.createElement("svg",{key:"draw-canvas",width:"100%",height:"100%"},e&&e.length>0&&o.createElement("g",{key:"feature-group"},e.map(t._renderFeature)),r&&r.length>0&&o.createElement("g",{key:"feature-guides"},t._renderGuides(r)),i&&t._renderTooltips(i))}),m(d(t),"_render",function(){var e=t._context&&t._context.viewport||{},n=t.props.style,r=e.width,i=e.height;return o.createElement("div",{id:"editor",style:v({width:void 0===r?0:r,height:void 0===i?0:i},n),ref:function(e){t._containerRef=e}},t._renderCanvas())}),t}return e=[{key:"_getPathInScreenCoords",value:function(t,e){var n=this;if(0===t.length)return"";var r=t.map(function(t){return n.project(t)}),o="";switch(e){case i.GEOJSON_TYPE.POINT:return r;case i.GEOJSON_TYPE.LINE_STRING:return o=r.map(function(t){return"".concat(t[0],",").concat(t[1])}).join("L"),"M ".concat(o);case i.GEOJSON_TYPE.POLYGON:return o=r.map(function(t){return"".concat(t[0],",").concat(t[1])}).join("L"),"M ".concat(o," z");default:return null}}}],p(a.prototype,e),n&&p(a,n),a}(a.default);e.default=E,m(E,"defaultProps",b)},73772:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o={Editor:!0,GEOJSON_TYPE:!0,SHAPE:!0,RENDER_STATE:!0,ELEMENT_TYPE:!0,EDIT_TYPE:!0,DrawCircleFromCenterMode:!0,DrawCircleByDiameterMode:!0,DrawPointMode:!0,DrawLineStringMode:!0,DrawPolygonMode:!0,DrawRectangleMode:!0,DrawPolygonByDraggingMode:!0,MeasureDistanceMode:!0,MeasureAreaMode:!0,MeasureAngleMode:!0};Object.defineProperty(e,"Editor",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"GEOJSON_TYPE",{enumerable:!0,get:function(){return a.GEOJSON_TYPE}}),Object.defineProperty(e,"SHAPE",{enumerable:!0,get:function(){return a.SHAPE}}),Object.defineProperty(e,"RENDER_STATE",{enumerable:!0,get:function(){return a.RENDER_STATE}}),Object.defineProperty(e,"ELEMENT_TYPE",{enumerable:!0,get:function(){return a.ELEMENT_TYPE}}),Object.defineProperty(e,"EDIT_TYPE",{enumerable:!0,get:function(){return a.EDIT_TYPE}}),Object.defineProperty(e,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return c.DrawCircleFromCenterMode}}),Object.defineProperty(e,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return c.DrawCircleByDiameterMode}}),Object.defineProperty(e,"DrawPointMode",{enumerable:!0,get:function(){return c.DrawPointMode}}),Object.defineProperty(e,"DrawLineStringMode",{enumerable:!0,get:function(){return c.DrawLineStringMode}}),Object.defineProperty(e,"DrawPolygonMode",{enumerable:!0,get:function(){return c.DrawPolygonMode}}),Object.defineProperty(e,"DrawRectangleMode",{enumerable:!0,get:function(){return c.DrawRectangleMode}}),Object.defineProperty(e,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return c.DrawPolygonByDraggingMode}}),Object.defineProperty(e,"MeasureDistanceMode",{enumerable:!0,get:function(){return c.MeasureDistanceMode}}),Object.defineProperty(e,"MeasureAreaMode",{enumerable:!0,get:function(){return c.MeasureAreaMode}}),Object.defineProperty(e,"MeasureAngleMode",{enumerable:!0,get:function(){return c.MeasureAngleMode}});var i=(r=n(35210))&&r.__esModule?r:{default:r},a=n(10663),u=n(69993);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))});var s=n(7132);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}}))});var c=n(87359)},34861:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=n(85198),i=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==f(t)&&"function"!=typeof t)return{default:t};var e=l();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=r?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(n(67294)),a=n(87359),u=(r=n(95848))&&r.__esModule?r:{default:r},s=n(71103),c=n(10663);function l(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return l=function(){return t},t}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach(function(e){b(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E={featureCollection:new a.ImmutableFeatureCollection({type:"FeatureCollection",features:[]}),selectedFeatureIndex:null,selectedEditHandleIndexes:[],hovered:null,isDragging:!1,didDrag:!1,lastPointerMoveEvent:null,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null},P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(l,t);var e,n,r=function(){var t,e,n=v(l);if(function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()){var r=v(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(t=e)&&("object"===f(t)||"function"==typeof t)?t:g(this)};function l(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,l),b(g(e=r.call(this,t)),"_events",void 0),b(g(e),"_eventsRegistered",void 0),b(g(e),"_modeHandler",void 0),b(g(e),"_context",void 0),b(g(e),"_containerRef",void 0),b(g(e),"getFeatures",function(){var t=e._getFeatureCollection();return(t=t&&t.getObject())&&t.features}),b(g(e),"addFeatures",function(t){var n=e._getFeatureCollection();n&&(Array.isArray(t)||(t=[t]),n=n.addFeatures(t),e.setState({featureCollection:n}))}),b(g(e),"deleteFeatures",function(t){var n=e._getFeatureCollection(),r=e._getSelectedFeatureIndex();if(n){Array.isArray(t)||(t=[t]);var o={featureCollection:n=n.deleteFeatures(t)};t.findIndex(function(t){return r===t})>=0&&(o.selectedFeatureIndex=null,o.selectedEditHandleIndexes=[]),e.setState(o)}}),b(g(e),"deleteHandles",function(t,n){var r=e._getFeatureCollection();if(t||(t=e._getSelectedFeatureIndex()),!n){if(!e.state.selectedEditHandleIndexes.length)return r;n=e.state.selectedEditHandleIndexes}var o=r.getObject().features,i=[c.GEOJSON_TYPE.LINE_STRING,c.GEOJSON_TYPE.POLYGON];if(null!==t&&o[t]&&i.includes(o[t].geometry.type)){n.sort(function(t,e){return e-t}),(o[t].geometry.type===c.GEOJSON_TYPE.LINE_STRING?n.map(function(t){return[t]}):n.map(function(t){return[0,t]})).forEach(function(e){r=r.removePosition(t,e)});var a=e.state.selectedEditHandleIndexes.filter(function(t){return!n.includes(t)});e.setState({featureCollection:r,selectedEditHandleIndexes:a})}return r}),b(g(e),"_getMemorizedFeatureCollection",(0,a._memoize)(function(t){var e=t.propsFeatures,n=t.stateFeatures,r=e||n;return r instanceof a.ImmutableFeatureCollection?r:new a.ImmutableFeatureCollection(r&&"FeatureCollection"===r.type?{type:"FeatureCollection",features:r.features}:{type:"FeatureCollection",features:r||[]})})),b(g(e),"_getFeatureCollection",function(){return e._getMemorizedFeatureCollection({propsFeatures:e.props.features,stateFeatures:e.state.featureCollection})}),b(g(e),"_setupModeHandler",function(){var t=e.props.mode;if(e._modeHandler=t,!t){e._degregisterEvents();return}e._registerEvents()}),b(g(e),"_clearEditingState",function(){e.setState({selectedFeatureIndex:null,selectedEditHandleIndexes:[],hovered:null,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,isDragging:!1,didDrag:!1})}),b(g(e),"_getSelectedFeatureIndex",function(){return"selectedFeatureIndex"in e.props?e.props.selectedFeatureIndex:e.state.selectedFeatureIndex}),b(g(e),"_onSelect",function(t){var n=t.selectedFeatureIndex,r={selectedFeatureIndex:n,selectedEditHandleIndexes:e.state.selectedEditHandleIndexes};e.state.selectedFeatureIndex!==n&&(r.selectedEditHandleIndexes=[]),e.setState(r),e.props.onSelect&&e.props.onSelect(t)}),b(g(e),"_onEdit",function(t){var n=t.editType,r=t.updatedData,o=t.editContext,i={featureCollection:new a.ImmutableFeatureCollection(r)};n===c.EDIT_TYPE.ADD_POSITION&&(i.selectedEditHandleIndexes=[]),e.setState(i),n===c.EDIT_TYPE.ADD_FEATURE&&e._onSelect({selectedFeature:null,selectedFeatureIndex:null,selectedEditHandleIndex:null,selectedEditHandleIndexes:[],screenCoords:o&&o.screenCoords,mapCoords:o&&o.mapCoords}),e.props.onUpdate&&e.props.onUpdate({data:r&&r.features,editType:n,editContext:o})}),b(g(e),"_degregisterEvents",function(){var t=e._context&&e._context.eventManager;e._events&&t&&e._eventsRegistered&&(t.off(e._events),e._eventsRegistered=!1)}),b(g(e),"_registerEvents",function(){var t=e._containerRef,n=e._context&&e._context.eventManager;e._events&&t&&n&&!e._eventsRegistered&&(n.on(e._events,t),e._eventsRegistered=!0)}),b(g(e),"_onEvent",function(t,n,r){t(e._getEvent(n)),r&&n.stopImmediatePropagation()}),b(g(e),"_onClick",function(t){var n=e.getModeProps();if(e._modeHandler instanceof u.default||e.props.selectable){var r,o=t.mapCoords,i=t.screenCoords,a=t.picks&&t.picks[0],l=function(t){if(Array.isArray(t))return h(t)}(r=e.state.selectedEditHandleIndexes)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(a&&(0,s.isNumeric)(a.featureIndex)){var f=a.type===c.ELEMENT_TYPE.EDIT_HANDLE?a.index:null,p=l.indexOf(f);null!==f&&(-1!==p?l.splice(p,1):l.push(f),e.setState({selectedEditHandleIndexes:l}));var d=a.featureIndex;e._onSelect({selectedFeature:a.object,selectedFeatureIndex:d,selectedEditHandleIndex:f,selectedEditHandleIndexes:l,mapCoords:o,screenCoords:i})}else e._onSelect({selectedFeature:null,selectedFeatureIndex:null,selectedEditHandleIndex:null,selectedEditHandleIndexes:l,mapCoords:o,screenCoords:i})}e._modeHandler.handleClick(t,n)}),b(g(e),"_onDblclick",function(t){(0,s.isNumeric)(e._getSelectedFeatureIndex())&&t.sourceEvent.stopImmediatePropagation()}),b(g(e),"_onPointerMove",function(t){var n=e._getHoverState(t),r=e.state,o=r.isDragging,i=r.didDrag,a=r.pointerDownPicks,u=r.pointerDownScreenCoords,s=r.pointerDownMapCoords;if(o&&!i&&u){var c=t.screenCoords[0]-u[0],l=t.screenCoords[1]-u[1];c*c+l*l>5&&e.setState({didDrag:!0})}var f=d({},t,{isDragging:o,pointerDownPicks:a,pointerDownScreenCoords:u,pointerDownMapCoords:s,cancelPan:t.sourceEvent.stopImmediatePropagation}),p=e.getModeProps();e._modeHandler.handlePointerMove(f,p),e.state.didDrag&&e._modeHandler.handleDragging(f,p),e.setState({hovered:n,lastPointerMoveEvent:f})}),b(g(e),"_onPointerDown",function(t){var n=e.props.modeConfig&&e.props.modeConfig.dragToDraw,r=!!(t.picks&&t.picks[0])||n,o=d({},t,{isDragging:r,pointerDownScreenCoords:t.screenCoords,pointerDownMapCoords:t.mapCoords,cancelPan:t.sourceEvent.stopImmediatePropagation}),i={isDragging:r,pointerDownPicks:t.picks,pointerDownScreenCoords:t.screenCoords,pointerDownMapCoords:t.mapCoords};e.setState(i);var a=e.getModeProps();e._modeHandler.handleStartDragging(o,a)}),b(g(e),"_onPointerUp",function(t){var n=e.state,r=n.didDrag,o=n.pointerDownPicks,i=n.pointerDownScreenCoords,a=n.pointerDownMapCoords,u=d({},t,{isDragging:!1,pointerDownPicks:r?o:null,pointerDownScreenCoords:r?i:null,pointerDownMapCoords:r?a:null,cancelPan:t.sourceEvent.cancelPan});e.setState({isDragging:!1,didDrag:!1,pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null});var s=e.getModeProps();r&&e._modeHandler.handleStopDragging(u,s)}),b(g(e),"_onPan",function(t){e.state.isDragging&&t.sourceEvent.stopImmediatePropagation(),e._modeHandler.handlePan&&e._modeHandler.handlePan(t,e.getModeProps())}),b(g(e),"project",function(t){var n=e._context&&e._context.viewport;return n&&n.project(t)}),b(g(e),"unproject",function(t){var n=e._context&&e._context.viewport;return n&&n.unproject(t)}),b(g(e),"_getHoverState",function(t){var e=t.picks&&t.picks[0];return e?d({screenCoords:t.screenCoords,mapCoords:t.mapCoords},e):null}),e.state=E,e._eventsRegistered=!1,e._events={anyclick:function(t){return e._onEvent(e._onClick,t,!0)},dblclick:function(t){return e._onEvent(e._onDblclick,t,!1)},click:function(t){return t.stopImmediatePropagation()},pointermove:function(t){return e._onEvent(e._onPointerMove,t,!1)},pointerdown:function(t){return e._onEvent(e._onPointerDown,t,!0)},pointerup:function(t){return e._onEvent(e._onPointerUp,t,!0)},panmove:function(t){return e._onEvent(e._onPan,t,!1)},panstart:function(t){return e._onEvent(e._onPan,t,!1)},panend:function(t){return e._onEvent(e._onPan,t,!1)}},e}return e=[{key:"componentDidMount",value:function(){this._setupModeHandler()}},{key:"componentDidUpdate",value:function(t){t.mode!==this.props.mode&&(this._clearEditingState(),this._setupModeHandler())}},{key:"componentWillUnmount",value:function(){this._degregisterEvents()}},{key:"getModeProps",value:function(){var t=this._getFeatureCollection(),e=this.state.lastPointerMoveEvent,n=this._getSelectedFeatureIndex(),r=this.state.selectedEditHandleIndexes,o=this._context&&this._context.viewport;return{data:t&&t.featureCollection,selectedIndexes:(0,s.isNumeric)(n)?[n]:[],selectedEditHandleIndexes:r,lastPointerMoveEvent:e,viewport:o,featuresDraggable:this.props.featuresDraggable,onEdit:this._onEdit,onUpdateCursor:this.props.onUpdateCursor,modeConfig:this.props.modeConfig}}},{key:"_getEvent",value:function(t){var e=this.getFeatures(),n=this._modeHandler.getGuides(this.getModeProps()),r=(0,s.parseEventElement)(t,e,n&&n.features),o=(0,s.getScreenCoords)(t),i=this.unproject(o);return{picks:r?[r]:null,screenCoords:o,mapCoords:i,sourceEvent:t}}},{key:"_render",value:function(){return i.createElement("div",null)}},{key:"render",value:function(){var t=this;return i.createElement(o._MapContext.Consumer,null,function(e){t._context=e;var n=e&&e.viewport;return!n||n.height<=0||n.width<=0?null:t._render()})}}],y(l.prototype,e),n&&y(l,n),l}(i.PureComponent);e.default=P,b(P,"displayName","ModeHandler"),b(P,"defaultProps",{selectable:!0,mode:null,features:null,onSelect:null,onUpdate:null,onUpdateCursor:function(){}})},53723:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.featureStyle=function(t){var e=t.feature,n=t.state,o=e.properties.shape||e.geometry.type,a=null;switch(n){case r.RENDER_STATE.SELECTED:a=i({},u);break;case r.RENDER_STATE.HOVERED:a=i({},s);break;case r.RENDER_STATE.UNCOMMITTED:case r.RENDER_STATE.CLOSING:case r.RENDER_STATE.INACTIVE:a=i({},c);break;default:a=i({},l)}switch(o){case r.SHAPE.POINT:a.r=8;break;case r.SHAPE.LINE_STRING:a.fill="none";break;case r.SHAPE.POLYGON:n===r.RENDER_STATE.CLOSING&&(a.strokeDasharray="4,2");break;case r.SHAPE.RECTANGLE:n===r.RENDER_STATE.UNCOMMITTED&&(a.strokeDasharray="4,2")}return a},e.editHandleStyle=function(t){t.feature;var e=t.shape,n=(t.index,t.state),o={};switch(n){case r.RENDER_STATE.SELECTED:o=i({},u);break;case r.RENDER_STATE.HOVERED:o=i({},s);break;case r.RENDER_STATE.UNCOMMITTED:case r.RENDER_STATE.CLOSING:case r.RENDER_STATE.INACTIVE:o=i({},c);break;default:o=i({},l)}switch(e){case"circle":o.r=8;break;case"rect":o=i({},o,{},a)}return o},e.tooltipStyle=void 0;var r=n(10663);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var r;r=n[e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var a={stroke:"#7ac943",strokeWidth:2,x:-6,y:-6,height:12,width:12},u={stroke:"rgb(38, 181, 242)",strokeWidth:2,fill:"rgb(189,189,189)",fillOpacity:.3},s={stroke:"rgb(38, 181, 242)",strokeWidth:2,fill:"rgb(122,202,67)",fillOpacity:.3},c={stroke:"rgb(189,189,189)",strokeDasharray:"4,2",strokeWidth:2,fill:"rgb(189,189,189)",fillOpacity:.1},l={stroke:"#000000",strokeWidth:2,fill:"#a9a9a9",fillOpacity:.1};e.tooltipStyle={fill:"black",fontSize:14}},7132:function(){},85198:function(t,e,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}}n.r(e),n.d(e,{AttributionControl:function(){return nm},BaseControl:function(){return e2},CanvasOverlay:function(){return nZ},FlyToInterpolator:function(){return tH},FullscreenControl:function(){return nO},GeolocateControl:function(){return nT},HTMLOverlay:function(){return nJ},InteractiveMap:function(){return eH},Layer:function(){return e$},LinearInterpolator:function(){return tB},MapContext:function(){return tc},MapController:function(){return eM},Marker:function(){return nu},NavigationControl:function(){return nF},Popup:function(){return nd},SVGOverlay:function(){return n0},ScaleControl:function(){return nY},Source:function(){return eq},StaticMap:function(){return tP},TRANSITION_EVENTS:function(){return tq},TransitionInterpolator:function(){return tO},WebMercatorViewport:function(){return f.WebMercatorViewport},_MapContext:function(){return tc},_useMapControl:function(){return e0},default:function(){return eH},setRTLTextPlugin:function(){return n1}});var a,u=n(4942),s=n(67294),c=n(45697);function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||i(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=n(19319),p=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,r){return t[0]===e&&(n=r,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];t.call(e,o[1],o[0])}},e}()}(),d="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,h=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),y="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(h):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},g=["top","right","bottom","left","width","height","size","weight"],v="undefined"!=typeof MutationObserver,m=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,r=!1,o=0;function i(){n&&(n=!1,t()),r&&u()}function a(){y(i)}function u(){var t=Date.now();if(n){if(t-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,20);o=t}return u}(this.refresh.bind(this),0)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){d&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),v?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){d&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;g.some(function(t){return!!~n.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),b=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},E=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||h},P=w(0,0,0,0);function _(t){return parseFloat(t)||0}function O(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){return e+_(t["border-"+n+"-width"])},0)}var S="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof E(t).SVGGraphicsElement}:function(t){return t instanceof E(t).SVGElement&&"function"==typeof t.getBBox};function w(t,e,n,r){return{x:t,y:e,width:n,height:r}}var M=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=w(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=function(t){if(!d)return P;if(S(t)){var e;return w(0,0,(e=t.getBBox()).width,e.height)}return function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return P;var r=E(t).getComputedStyle(t),o=function(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=t["padding-"+o];e[o]=_(i)}return e}(r),i=o.left+o.right,a=o.top+o.bottom,u=_(r.width),s=_(r.height);if("border-box"===r.boxSizing&&(Math.round(u+i)!==e&&(u-=O(r,"left","right")+i),Math.round(s+a)!==n&&(s-=O(r,"top","bottom")+a)),t!==E(t).document.documentElement){var c=Math.round(u+i)-e,l=Math.round(s+a)-n;1!==Math.abs(c)&&(u-=c),1!==Math.abs(l)&&(s-=l)}return w(o.left,o.top,u,s)}(t)}(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),x=function(t,e){var n,r,o,i,a,u=(n=e.x,r=e.y,o=e.width,i=e.height,b(a=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype),{x:n,y:r,width:o,height:i,top:r,right:n+o,bottom:i+r,left:n}),a);b(this,{target:t,contentRect:u})},j=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new p,"function"!=typeof t)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof E(t).Element))throw TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new M(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof E(t).Element))throw TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new x(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),T="undefined"!=typeof WeakMap?new WeakMap:new p,k=function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var n=m.getInstance(),r=new j(e,n,this);T.set(this,r)};["observe","unobserve","disconnect"].forEach(function(t){k.prototype[t]=function(){var e;return(e=T.get(this))[t].apply(e,arguments)}});var C=void 0!==h.ResizeObserver?h.ResizeObserver:k;function D(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}var R=n(83997);function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(0,R.Z)(r.key),r)}}function A(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}"undefined"!=typeof window?window:n.g,void 0!==n.g?n.g:window;var N="undefined"!=typeof document?document:{};function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function H(t,e){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return G(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(t,e)}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,a=!0,u=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==o.return||o.return()}finally{if(u)throw i}}}}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var z=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Y(t){if(!t)return null;if("string"==typeof t)return t;t.toJS&&(t=t.toJS());var e,n={},r=H(t.layers);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o.id]=o}}catch(t){r.e(t)}finally{r.f()}var i=t.layers.map(function(t){var e=n[t.ref],r=null;if("interactive"in t&&(r=L({},t),delete r.interactive),e){r=r||L({},t),delete r.ref;var o,i=H(z);try{for(i.s();!(o=i.n()).done;){var a=o.value;a in e&&(r[a]=e[a])}}catch(t){i.e(t)}finally{i.f()}}return r||t});return L(L({},t),{},{layers:i})}var B=n(34155),U={container:c.object,gl:c.object,mapboxApiAccessToken:c.string,mapboxApiUrl:c.string,attributionControl:c.bool,preserveDrawingBuffer:c.bool,reuseMaps:c.bool,transformRequest:c.func,mapOptions:c.object,mapStyle:c.oneOfType([c.string,c.object]),preventStyleDiffing:c.bool,visible:c.bool,asyncRender:c.bool,onLoad:c.func,onError:c.func,width:c.number,height:c.number,viewState:c.object,longitude:c.number,latitude:c.number,zoom:c.number,bearing:c.number,pitch:c.number,altitude:c.number},q={container:N.body,mapboxApiAccessToken:function(){var t=null;if("undefined"!=typeof window&&window.location){var e=window.location.search.match(/access_token=([^&\/]*)/);t=e&&e[1]}return t||void 0===B||(t=t||B.env.MapboxAccessToken||B.env.REACT_APP_MAPBOX_ACCESS_TOKEN),t||"no-token"}(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",preventStyleDiffing:!1,visible:!0,asyncRender:!1,onLoad:function(){},onError:function(t){t&&console.error(t.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";t.debug&&c.checkPropTypes(U,t,"prop",e)}var V=function(){function t(e){var n=this;if(D(this,t),(0,u.Z)(this,"props",q),(0,u.Z)(this,"width",0),(0,u.Z)(this,"height",0),(0,u.Z)(this,"_fireLoadEvent",function(){n.props.onLoad({type:"load",target:n._map})}),(0,u.Z)(this,"_handleError",function(t){n.props.onError(t)}),!e.mapboxgl)throw Error("Mapbox not available");this.mapboxgl=e.mapboxgl,t.initialized||(t.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(e)}return A(t,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(t){return this._update(this.props,t),this}},{key:"redraw",value:function(){var t=this._map;t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(e){this._map=t.savedMap;var n=this._map.getContainer(),r=e.container;for(r.classList.add("mapboxgl-map");n.childNodes.length>0;)r.appendChild(n.childNodes[0]);this._map._container=r,t.savedMap=null,e.mapStyle&&this._map.setStyle(Y(e.mapStyle),{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(e){if(e.reuseMaps&&t.savedMap)this._reuse(e);else{if(e.gl){var n=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=n,e.gl}}var r={container:e.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:Y(e.mapStyle),interactive:!1,trackResize:!1,attributionControl:e.attributionControl,preserveDrawingBuffer:e.preserveDrawingBuffer};e.transformRequest&&(r.transformRequest=e.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},r,e.mapOptions)),this._map.once("load",this._fireLoadEvent),this._map.on("error",this._handleError)}return this}},{key:"_destroy",value:function(){this._map&&(this.props.reuseMaps&&!t.savedMap?(t.savedMap=this._map,this._map.off("load",this._fireLoadEvent),this._map.off("error",this._handleError),this._map.off("styledata",this._fireLoadEvent)):this._map.remove(),this._map=null)}},{key:"_initialize",value:function(t){var e=this;Z(t=Object.assign({},q,t),"Mapbox"),this.mapboxgl.accessToken=t.mapboxApiAccessToken||q.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=t.mapboxApiUrl,this._create(t);var n=t.container;Object.defineProperty(n,"offsetWidth",{configurable:!0,get:function(){return e.width}}),Object.defineProperty(n,"clientWidth",{configurable:!0,get:function(){return e.width}}),Object.defineProperty(n,"offsetHeight",{configurable:!0,get:function(){return e.height}}),Object.defineProperty(n,"clientHeight",{configurable:!0,get:function(){return e.height}});var r=this._map.getCanvas();r&&(r.style.outline="none"),this._updateMapViewport({},t),this._updateMapSize({},t),this.props=t}},{key:"_update",value:function(t,e){if(this._map){Z(e=Object.assign({},this.props,e),"Mapbox");var n=this._updateMapViewport(t,e),r=this._updateMapSize(t,e);this._updateMapStyle(t,e),!e.asyncRender&&(n||r)&&this.redraw(),this.props=e}}},{key:"_updateMapStyle",value:function(t,e){t.mapStyle!==e.mapStyle&&this._map.setStyle(Y(e.mapStyle),{diff:!e.preventStyleDiffing})}},{key:"_updateMapSize",value:function(t,e){var n=t.width!==e.width||t.height!==e.height;return n&&(this.width=e.width,this.height=e.height,this._map.resize()),n}},{key:"_updateMapViewport",value:function(t,e){var n=this._getViewState(t),r=this._getViewState(e),o=r.latitude!==n.latitude||r.longitude!==n.longitude||r.zoom!==n.zoom||r.pitch!==n.pitch||r.bearing!==n.bearing||r.altitude!==n.altitude;return o&&(this._map.jumpTo(this._viewStateToMapboxProps(r)),r.altitude!==n.altitude&&(this._map.transform.altitude=r.altitude)),o}},{key:"_getViewState",value:function(t){var e=t.viewState||t,n=e.longitude,r=e.latitude,o=e.zoom,i=e.pitch,a=e.bearing,u=e.altitude;return{longitude:n,latitude:r,zoom:o,pitch:void 0===i?0:i,bearing:void 0===a?0:a,altitude:void 0===u?1.5:u}}},{key:"_checkStyleSheet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==N)try{var e=N.createElement("div");if(e.className="mapboxgl-map",e.style.display="none",N.body.appendChild(e),!("static"!==window.getComputedStyle(e).position)){var n=N.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(t,"/mapbox-gl.css")),N.head.appendChild(n)}}catch(t){}}},{key:"_viewStateToMapboxProps",value:function(t){return{center:[t.longitude,t.latitude],zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}}}]),t}();(0,u.Z)(V,"initialized",!1),(0,u.Z)(V,"propTypes",U),(0,u.Z)(V,"defaultProps",q),(0,u.Z)(V,"savedMap",null);var X=n(6158),W=n.n(X);function J(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function $(t,e,n){return Math.max(e,Math.min(n,t))}function K(t,e,n){return J(t)?t.map(function(t,r){return K(t,e[r],n)}):n*e+(1-n)*t}function Q(t,e){if(!t)throw Error(e||"react-map-gl: assertion failed.")}function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var tn={minZoom:0,maxZoom:24,minPitch:0,maxPitch:85},tr={pitch:0,bearing:0,altitude:1.5},to=function(){function t(e){var n=e.width,r=e.height,o=e.latitude,i=e.longitude,a=e.zoom,u=e.bearing,s=void 0===u?tr.bearing:u,c=e.pitch,l=void 0===c?tr.pitch:c,f=e.altitude,p=void 0===f?tr.altitude:f,d=e.maxZoom,h=void 0===d?tn.maxZoom:d,y=e.minZoom,g=void 0===y?tn.minZoom:y,v=e.maxPitch,m=void 0===v?tn.maxPitch:v,b=e.minPitch,E=void 0===b?tn.minPitch:b,P=e.transitionDuration,_=e.transitionEasing,O=e.transitionInterpolator,S=e.transitionInterruption,w=e.startPanLngLat,M=e.startZoomLngLat,x=e.startRotatePos,j=e.startBearing,T=e.startPitch,k=e.startZoom;D(this,t),Q(Number.isFinite(n),"`width` must be supplied"),Q(Number.isFinite(r),"`height` must be supplied"),Q(Number.isFinite(i),"`longitude` must be supplied"),Q(Number.isFinite(o),"`latitude` must be supplied"),Q(Number.isFinite(a),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,latitude:o,longitude:i,zoom:a,bearing:s,pitch:l,altitude:p,maxZoom:h,minZoom:g,maxPitch:m,minPitch:E,transitionDuration:P,transitionEasing:_,transitionInterpolator:O,transitionInterruption:S}),this._state={startPanLngLat:w,startZoomLngLat:M,startRotatePos:x,startBearing:j,startPitch:T,startZoom:k}}return A(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}},{key:"panStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(e)})}},{key:"pan",value:function(t){var e=t.pos,n=t.startPos,r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;var o=l(this._calculateNewLngLat({startPanLngLat:r,pos:e}),2),i=o[0],a=o[1];return this._getUpdatedMapState({longitude:i,latitude:a})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(t){var e,n=t.pos,r=t.deltaAngleX,o=t.deltaAngleY,i=this._state,a=i.startRotatePos,u=i.startBearing,s=i.startPitch;return Number.isFinite(u)&&Number.isFinite(s)?(e=n?this._calculateNewPitchAndBearing(te(te({},this._getRotationParams(n,a)),{},{startBearing:u,startPitch:s})):{bearing:u+(void 0===r?0:r),pitch:s+(void 0===o?0:o)},this._getUpdatedMapState(e)):this}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,n=t.startPos,r=t.scale;Q(r>0,"`scale` must be a positive number");var o=this._state,i=o.startZoom,a=o.startZoomLngLat;Number.isFinite(i)||(i=this._viewportProps.zoom,a=this._unproject(n)||this._unproject(e)),Q(a,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var u=this._calculateNewZoom({scale:r,startZoom:i||0}),s=l(new f.default(Object.assign({},this._viewportProps,{zoom:u})).getMapCenterByLngLatPosition({lngLat:a,pos:e}),2),c=s[0],p=s[1];return this._getUpdatedMapState({zoom:u,longitude:c,latitude:p})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(e){return new t(Object.assign({},this._viewportProps,this._state,e))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=$(r,n,e);var o=t.maxPitch,i=t.minPitch,a=t.pitch;return t.pitch=$(a,i,o),Object.assign(t,(0,f.normalizeViewportProps)(t)),t}},{key:"_unproject",value:function(t){var e=new f.default(this._viewportProps);return t&&e.unproject(t)}},{key:"_calculateNewLngLat",value:function(t){var e=t.startPanLngLat,n=t.pos;return new f.default(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,o=r.maxZoom;return $(n+Math.log2(e),r.minZoom,o)}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,o=t.startPitch;n=$(n,-1,1);var i=this._viewportProps,a=i.minPitch,u=i.maxPitch,s=o;return n>0?s=o+n*(u-o):n<0&&(s=o-n*(a-o)),{pitch:s,bearing:r+180*e}}},{key:"_getRotationParams",value:function(t,e){var n=t[0]-e[0],r=t[1]-e[1],o=t[1],i=e[1],a=this._viewportProps,u=a.width,s=a.height,c=0;return r>0?Math.abs(s-i)>5&&(c=r/(i-s)*1.2):r<0&&i>5&&(c=1-o/i),{deltaScaleX:n/u,deltaScaleY:c=Math.min(1,Math.max(-1,c))}}}]),t}();function ti(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ti(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var tu=(0,s.createContext)({viewport:null,map:null,container:null,onViewportChange:null,onViewStateChange:null,eventManager:null}),ts=tu.Provider;tu.Provider=function(t){var e=t.value,n=t.children,r=l((0,s.useState)(null),2),o=r[0],i=r[1],a=(0,s.useContext)(tu);return e=ta(ta({setMap:i},a),{},{map:a&&a.map||o},e),s.createElement(ts,{value:e},n)};var tc=tu,tl="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;function tf(t,e){var n=e.longitude,r=e.latitude;return t&&t.queryTerrainElevation&&t.queryTerrainElevation([n,r])||0}function tp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function td(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tp(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var th="A valid API access token is required to use Mapbox data";function ty(t){var e=t.map,n=t.props,r=t.width,o=t.height,i=td(td(td({},n),n.viewState),{},{width:r,height:o});return i.position=[0,0,tf(e,i)],new f.default(i)}var tg={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},tv=Object.assign({},V.propTypes,{width:c.oneOfType([c.number,c.string]),height:c.oneOfType([c.number,c.string]),onResize:c.func,disableTokenWarning:c.bool,visible:c.bool,className:c.string,style:c.object,visibilityConstraints:c.object}),tm=Object.assign({},V.defaultProps,{disableTokenWarning:!1,visible:!0,onResize:function(){},className:"",style:null,visibilityConstraints:tn});function tb(){return s.createElement("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},s.createElement("h3",{key:"header"},th),s.createElement("div",{key:"text"},"For information on setting up your basemap, read"),s.createElement("a",{key:"link",href:"https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens"},"Note on Map Tokens"))}var tE=(0,s.forwardRef)(function(t,e){var n=l((0,s.useState)(!0),2),r=n[0],o=n[1],i=l((0,s.useState)({width:0,height:0}),2),a=i[0],u=i[1],c=(0,s.useRef)(null),f=(0,s.useRef)(null),p=(0,s.useRef)(null),d=(0,s.useRef)(null),h=(0,s.useContext)(tc);tl(function(){if(tE.supported()){var e=new V(td(td(td({},t),a),{},{mapboxgl:W(),container:f.current,onError:function(e){401===(e.error&&e.error.status||e.status)&&r&&(console.error(th),o(!1)),t.onError(e)}}));c.current=e,h&&h.setMap&&h.setMap(e.getMap());var n=new C(function(e){if(e[0].contentRect){var n=e[0].contentRect,r=n.width,o=n.height;u({width:r,height:o}),t.onResize({width:r,height:o})}});return n.observe(p.current),function(){e.finalize(),c.current=null,n.disconnect()}}},[]),tl(function(){c.current&&c.current.setProps(td(td({},t),a))});var y=c.current&&c.current.getMap();(0,s.useImperativeHandle)(e,function(){return{getMap:function(){return c.current&&c.current.getMap()},queryRenderedFeatures:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c.current&&c.current.getMap();return n&&n.queryRenderedFeatures(t,e)}}},[]);var g=(0,s.useCallback)(function(t){var e=t.target;e===d.current&&e.scrollTo(0,0)},[]),v=y&&s.createElement(ts,{value:td(td({},h),{},{viewport:h.viewport||ty(td({map:y,props:t},a)),map:y,container:h.container||p.current})},s.createElement("div",{key:"map-overlays",className:"overlays",ref:d,style:tg,onScroll:g},t.children)),m=t.className,b=t.width,E=t.height,P=t.style,_=t.visibilityConstraints,O=Object.assign({position:"relative"},P,{width:b,height:E}),S=Object.assign({},tg,{visibility:t.visible&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tn;for(var n in e){var r,o=n.slice(0,3),i=(r=n.slice(3))[0].toLowerCase()+r.slice(1);if("min"===o&&t[i]<e[n]||"max"===o&&t[i]>e[n])return!1}return!0}(t.viewState||t,_)?"inherit":"hidden"});return s.createElement("div",{key:"map-container",ref:p,style:O},s.createElement("div",{key:"map-mapbox",ref:f,style:S,className:m}),v,!r&&!t.disableTokenWarning&&s.createElement(tb,null))});tE.supported=function(){return W()&&W().supported()},tE.propTypes=tv,tE.defaultProps=tm;var tP=tE;function t_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tO=function(){function t(){D(this,t),(0,u.Z)(this,"propNames",[])}return A(t,[{key:"arePropsEqual",value:function(t,e){var n,r=function(t,e){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return t_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t_(t,e)}}(t))){o&&(t=o);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,a=!0,u=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==o.return||o.return()}finally{if(u)throw i}}}}(this.propNames||[]);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!function t(e,n){if(e===n)return!0;if(J(e)&&J(n)){if(e.length!==n.length)return!1;for(var r=0;r<e.length;++r)if(!t(e[r],n[r]))return!1;return!0}return 1e-7>=Math.abs(e-n)}(t[o],e[o]))return!1}}catch(t){r.e(t)}finally{r.f()}return!0}},{key:"initializeProps",value:function(t,e){return{start:t,end:e}}},{key:"interpolateProps",value:function(t,e,n){Q(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function(t,e){return e.transitionDuration}}]),t}();function tS(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tw(t,e){return(tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tM(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tw(t,e)}var tx=n(71002);function tj(t,e){if(e&&("object"===(0,tx.Z)(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return tS(t)}function tT(t){return(tT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tk={longitude:1,bearing:1};function tC(t){return Number.isFinite(t)||Array.isArray(t)}function tD(t,e,n){return t in tk&&Math.abs(n-e)>180&&(n=n<0?n+360:n-360),n}function tR(t,e){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return tI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tI(t,e)}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,a=!0,u=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==o.return||o.return()}finally{if(u)throw i}}}}function tI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tA=["longitude","latitude","zoom","bearing","pitch"],tN=["latitude","longitude","zoom","width","height"],tF=["bearing","pitch"],tL={speed:1.2,curve:1.414},tH=function(t){tM(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tT(r);if(e){var o=tT(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return tj(this,t)});function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(this,r),t=n.call(this),(0,u.Z)(tS(t),"propNames",tA),t.props=Object.assign({},tL,e),t}return A(r,[{key:"initializeProps",value:function(t,e){var n,r={},o={},i=tR(tN);try{for(i.s();!(n=i.n()).done;){var a=n.value,u=t[a],s=e[a];Q(tC(u)&&tC(s),"".concat(a," must be supplied for transition")),r[a]=u,o[a]=tD(a,u,s)}}catch(t){i.e(t)}finally{i.f()}var c,l=tR(tF);try{for(l.s();!(c=l.n()).done;){var f=c.value,p=t[f]||0,d=e[f]||0;r[f]=p,o[f]=tD(f,p,d)}}catch(t){l.e(t)}finally{l.f()}return{start:r,end:o}}},{key:"interpolateProps",value:function(t,e,n){var r,o=(0,f.flyToViewport)(t,e,n,this.props),i=tR(tF);try{for(i.s();!(r=i.n()).done;){var a=r.value;o[a]=K(t[a],e[a],n)}}catch(t){i.e(t)}finally{i.f()}return o}},{key:"getDuration",value:function(t,e){var n=e.transitionDuration;return"auto"===n&&(n=(0,f.getFlyToDuration)(t,e,this.props)),n}}]),r}(tO);function tG(t,e){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return tz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tz(t,e)}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,a=!0,u=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==o.return||o.return()}finally{if(u)throw i}}}}function tz(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var tY=["longitude","latitude","zoom","bearing","pitch"],tB=function(t){tM(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tT(r);if(e){var o=tT(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return tj(this,t)});function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(this,r),t=n.call(this),Array.isArray(e)&&(e={transitionProps:e}),t.propNames=e.transitionProps||tY,e.around&&(t.around=e.around),t}return A(r,[{key:"initializeProps",value:function(t,e){var n={},r={};if(this.around){n.around=this.around;var o=new f.default(t).unproject(this.around);Object.assign(r,e,{around:new f.default(e).project(o),aroundLngLat:o})}var i,a=tG(this.propNames);try{for(a.s();!(i=a.n()).done;){var u=i.value,s=t[u],c=e[u];Q(tC(s)&&tC(c),"".concat(u," must be supplied for transition")),n[u]=s,r[u]=tD(u,s,c)}}catch(t){a.e(t)}finally{a.f()}return{start:n,end:r}}},{key:"interpolateProps",value:function(t,e,n){var r,o={},i=tG(this.propNames);try{for(i.s();!(r=i.n()).done;){var a=r.value;o[a]=K(t[a],e[a],n)}}catch(t){i.e(t)}finally{i.f()}if(e.around){var u=l(new f.default(Object.assign({},e,o)).getMapCenterByLngLatPosition({lngLat:e.aroundLngLat,pos:K(t.around,e.around,n)}),2),s=u[0],c=u[1];o.longitude=s,o.latitude=c}return o}}]),r}(tO),tU=function(){},tq={BREAK:1,SNAP_TO_END:2,IGNORE:3,UPDATE:4},tZ={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new tB,transitionInterruption:tq.BREAK,onTransitionStart:tU,onTransitionInterrupt:tU,onTransitionEnd:tU},tV=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D(this,t),(0,u.Z)(this,"_animationFrame",null),(0,u.Z)(this,"_onTransitionFrame",function(){e._animationFrame=requestAnimationFrame(e._onTransitionFrame),e._updateViewport()}),this.props=null,this.onViewportChange=n.onViewportChange||tU,this.onStateChange=n.onStateChange||tU,this.time=n.getTime||Date.now}return A(t,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(t){var e=this.props;if(this.props=t,!e||this._shouldIgnoreViewportChange(e,t))return!1;if(this._isTransitionEnabled(t)){var n=Object.assign({},e),r=Object.assign({},t);if(this._isTransitionInProgress()&&(e.onTransitionInterrupt(),this.state.interruption===tq.SNAP_TO_END?Object.assign(n,this.state.endProps):Object.assign(n,this.state.propsInTransition),this.state.interruption===tq.UPDATE)){var o,i,a=this.time(),u=(a-this.state.startTime)/this.state.duration;r.transitionDuration=this.state.duration-(a-this.state.startTime),r.transitionEasing=(i=(o=this.state.easing)(u),function(t){return 1/(1-i)*(o(t*(1-u)+u)-i)}),r.transitionInterpolator=n.transitionInterpolator}return r.onTransitionStart(),this._triggerTransition(n,r),!0}return this._isTransitionInProgress()&&(e.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return!!this._animationFrame}},{key:"_isTransitionEnabled",value:function(t){var e=t.transitionDuration,n=t.transitionInterpolator;return(e>0||"auto"===e)&&!!n}},{key:"_isUpdateDueToCurrentTransition",value:function(t){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(t,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(t,e){return!t||(this._isTransitionInProgress()?this.state.interruption===tq.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e))}},{key:"_triggerTransition",value:function(t,e){Q(this._isTransitionEnabled(e)),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var n=e.transitionInterpolator,r=n.getDuration?n.getDuration(t,e):e.transitionDuration;if(0!==r){var o=e.transitionInterpolator.initializeProps(t,e),i={inTransition:!0,isZooming:t.zoom!==e.zoom,isPanning:t.longitude!==e.longitude||t.latitude!==e.latitude,isRotating:t.bearing!==e.bearing||t.pitch!==e.pitch};this.state={duration:r,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startTime:this.time(),startProps:o.start,endProps:o.end,animation:null,propsInTransition:{}},this._onTransitionFrame(),this.onStateChange(i)}}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var t=this.time(),e=this.state,n=e.startTime,r=e.duration,o=e.easing,i=e.interpolator,a=e.startProps,u=e.endProps,s=!1,c=(t-n)/r;c>=1&&(c=1,s=!0),c=o(c);var l=i.interpolateProps(a,u,c),f=new to(Object.assign({},this.props,l));this.state.propsInTransition=f.getViewportProps(),this.onViewportChange(this.state.propsInTransition,this.props),s&&(this._endTransition(),this.props.onTransitionEnd())}}]),t}();(0,u.Z)(tV,"defaultProps",tZ);var tX=n(50840);let tW={mousedown:1,mousemove:2,mouseup:4};!function(t){let e=t.prototype.handler;t.prototype.handler=function(t){let n=this.store;t.button>0&&"pointerdown"===t.type&&!function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(n,e=>e.pointerId===t.pointerId)&&n.push(t),e.call(this,t)}}(tX.PointerEventInput),tX.MouseInput.prototype.handler=function(t){let e=tW[t.type];1&e&&t.button>=0&&(this.pressed=!0),2&e&&0===t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))};let tJ=tX.Manager;class t${constructor(t,e,n){this.element=t,this.callback=e,this.options={enable:!0,...n}}}let tK=tX?[[tX.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[tX.Rotate,{enable:!1}],[tX.Pinch,{enable:!1}],[tX.Swipe,{enable:!1}],[tX.Pan,{threshold:0,enable:!1}],[tX.Press,{enable:!1}],[tX.Tap,{event:"doubletap",taps:2,enable:!1}],[tX.Tap,{event:"anytap",enable:!1}],[tX.Tap,{enable:!1}]]:null,tQ={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},t0={doubletap:["tap"]},t1={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},t2={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},t3={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},t6={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},t4="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",t5="undefined"!=typeof window?window:n.g;void 0!==n.g?n.g:window;let t8=!1;try{t5.addEventListener("test",null,{get passive(){return t8=!0,!0}}),t5.removeEventListener("test",null)}catch(t){t8=!1}let t9=-1!==t4.indexOf("firefox"),{WHEEL_EVENTS:t7}=t2,et="wheel";class ee extends t${constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{if(!this.options.enable)return;let e=t.deltaY;t5.WheelEvent&&(t9&&t.deltaMode===t5.WheelEvent.DOM_DELTA_PIXEL&&(e/=t5.devicePixelRatio),t.deltaMode===t5.WheelEvent.DOM_DELTA_LINE&&(e*=40)),0!==e&&e%4.000244140625==0&&(e=Math.floor(e/4.000244140625)),t.shiftKey&&e&&(e*=.25),this.callback({type:et,center:{x:t.clientX,y:t.clientY},delta:-e,srcEvent:t,pointerType:"mouse",target:t.target})},this.events=(this.options.events||[]).concat(t7),this.events.forEach(e=>t.addEventListener(e,this.handleEvent,!!t8&&{passive:!1}))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===et&&(this.options.enable=e)}}let{MOUSE_EVENTS:en}=t2,er="pointermove",eo="pointerover",ei="pointerout",ea="pointerenter",eu="pointerleave";class es extends t${constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.handleOverEvent(t),this.handleOutEvent(t),this.handleEnterEvent(t),this.handleLeaveEvent(t),this.handleMoveEvent(t)},this.pressed=!1;let{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(en),this.events.forEach(e=>t.addEventListener(e,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===er&&(this.enableMoveEvent=e),t===eo&&(this.enableOverEvent=e),t===ei&&(this.enableOutEvent=e),t===ea&&(this.enableEnterEvent=e),t===eu&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&"mouseover"===t.type&&this._emit(eo,t)}handleOutEvent(t){this.enableOutEvent&&"mouseout"===t.type&&this._emit(ei,t)}handleEnterEvent(t){this.enableEnterEvent&&"mouseenter"===t.type&&this._emit(ea,t)}handleLeaveEvent(t){this.enableLeaveEvent&&"mouseleave"===t.type&&this._emit(eu,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":0===t.which&&(this.pressed=!1),this.pressed||this._emit(er,t);break;case"mouseup":this.pressed=!1}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}let{KEY_EVENTS:ec}=t2,el="keydown",ef="keyup";class ep extends t${constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{let e=t.target||t.srcElement;("INPUT"!==e.tagName||"text"!==e.type)&&"TEXTAREA"!==e.tagName&&(this.enableDownEvent&&"keydown"===t.type&&this.callback({type:el,srcEvent:t,key:t.key,target:t.target}),this.enableUpEvent&&"keyup"===t.type&&this.callback({type:ef,srcEvent:t,key:t.key,target:t.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(ec),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(e=>t.addEventListener(e,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===el&&(this.enableDownEvent=e),t===ef&&(this.enableUpEvent=e)}}let ed="contextmenu";class eh extends t${constructor(t,e,n){super(t,e,n),this.handleEvent=t=>{this.options.enable&&this.callback({type:ed,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===ed&&(this.options.enable=e)}}let ey={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},eg={srcElement:"root",priority:0};class ev{constructor(t){this.handleEvent=t=>{if(this.isEmpty())return;let e=this._normalizeEvent(t),n=t.srcEvent.target;for(;n&&n!==e.rootElement;){if(this._emit(e,n),e.handled)return;n=n.parentNode}this._emit(e,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,n,r=!1,o=!1){let{handlers:i,handlersByElement:a}=this,u=eg;"string"==typeof n||n&&n.addEventListener?u={...eg,srcElement:n}:n&&(u={...eg,...n});let s=a.get(u.srcElement);s||(s=[],a.set(u.srcElement,s));let c={type:t,handler:e,srcElement:u.srcElement,priority:u.priority};r&&(c.once=!0),o&&(c.passive=!0),i.push(c),this._active=this._active||!c.passive;let l=s.length-1;for(;l>=0&&!(s[l].priority>=c.priority);)l--;s.splice(l+1,0,c)}remove(t,e){let{handlers:n,handlersByElement:r}=this;for(let o=n.length-1;o>=0;o--){let i=n[o];if(i.type===t&&i.handler===e){n.splice(o,1);let t=r.get(i.srcElement);t.splice(t.indexOf(i),1),0===t.length&&r.delete(i.srcElement)}}this._active=n.some(t=>!t.passive)}_emit(t,e){let n=this.handlersByElement.get(e);if(n){let e=!1,r=()=>{t.handled=!0},o=()=>{t.handled=!0,e=!0},i=[];for(let a=0;a<n.length;a++){let{type:u,handler:s,once:c}=n[a];if(s({...t,type:u,stopPropagation:r,stopImmediatePropagation:o}),c&&i.push(n[a]),e)break}for(let t=0;t<i.length;t++){let{type:e,handler:n}=i[t];this.remove(e,n)}}}_normalizeEvent(t){let e=this.eventManager.getElement();return{...t,...function(t){let e=ey[t.srcEvent.type];if(!e)return null;let{buttons:n,button:r,which:o}=t.srcEvent,i=!1,a=!1,u=!1;return 4!==e&&(2!==e||Number.isFinite(n))?2===e?(i=!!(1&n),a=!!(4&n),u=!!(2&n)):1===e&&(i=0===r,a=1===r,u=2===r):(i=1===o,a=2===o,u=3===o),{leftButton:i,middleButton:a,rightButton:u}}(t),...function(t,e){let n=t.center;if(!n)return null;let r=e.getBoundingClientRect(),o=r.width/e.offsetWidth||1,i=r.height/e.offsetHeight||1,a={x:(n.x-r.left-e.clientLeft)/o,y:(n.y-r.top-e.clientTop)/i};return{center:n,offsetCenter:a}}(t,e),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e}}}let em={events:null,recognizers:null,recognizerOptions:{},Manager:tJ,touchAction:"none",tabIndex:0};class eb{constructor(t=null,e){this._onBasicInput=t=>{let{srcEvent:e}=t,n=t1[e.type];n&&this.manager.emit(n,t)},this._onOtherEvent=t=>{this.manager.emit(t.type,t)},this.options={...em,...e},this.events=new Map,this.setElement(t);let{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;let{options:e}=this,n=e.Manager;for(let r in this.manager=new n(t,{touchAction:e.touchAction,recognizers:e.recognizers||tK}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(tQ).forEach(t=>{let e=this.manager.get(t);e&&tQ[t].forEach(t=>{e.recognizeWith(t)})}),e.recognizerOptions){let t=this.manager.get(r);if(t){let n=e.recognizerOptions[r];delete n.enable,t.set(n)}}for(let[n,r]of(this.wheelInput=new ee(t,this._onOtherEvent,{enable:!1}),this.moveInput=new es(t,this._onOtherEvent,{enable:!1}),this.keyInput=new ep(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new eh(t,this._onOtherEvent,{enable:!1}),this.events))r.isEmpty()||(this._toggleRecognizer(r.recognizerName,!0),this.manager.on(n,r.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,n){this._addEventHandler(t,e,n,!1)}once(t,e,n){this._addEventHandler(t,e,n,!0)}watch(t,e,n){this._addEventHandler(t,e,n,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){let{manager:n}=this;if(!n)return;let r=n.get(t);if(r&&r.options.enable!==e){r.set({enable:e});let o=t0[t];o&&!this.options.recognizers&&o.forEach(o=>{let i=n.get(o);e?(i.requireFailure(t),r.dropRequireFailure(o)):i.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,n,r,o){if("string"!=typeof t){for(let i in n=e,t)this._addEventHandler(i,t[i],n,r,o);return}let{manager:i,events:a}=this,u=t6[t]||t,s=a.get(u);!s&&(s=new ev(this),a.set(u,s),s.recognizerName=t3[u]||u,i&&i.on(u,s.handleEvent)),s.add(t,e,n,r,o),s.isEmpty()||this._toggleRecognizer(s.recognizerName,!0)}_removeEventHandler(t,e){if("string"!=typeof t){for(let e in t)this._removeEventHandler(e,t[e]);return}let{events:n}=this,r=t6[t]||t,o=n.get(r);if(o&&(o.remove(t,e),o.isEmpty())){let{recognizerName:t}=o,e=!1;for(let r of n.values())if(r.recognizerName===t&&!r.isEmpty()){e=!0;break}e||this._toggleRecognizer(t,!1)}}}function eE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function eP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?eE(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var e_={transitionDuration:0},eO={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new tB,transitionInterruption:tq.BREAK},eS=function(t){return 1-(1-t)*(1-t)},ew={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},eM=function(){function t(){var e=this;D(this,t),(0,u.Z)(this,"events",[]),(0,u.Z)(this,"scrollZoom",!0),(0,u.Z)(this,"dragPan",!0),(0,u.Z)(this,"dragRotate",!0),(0,u.Z)(this,"doubleClickZoom",!0),(0,u.Z)(this,"touchZoom",!0),(0,u.Z)(this,"touchRotate",!1),(0,u.Z)(this,"keyboard",!0),(0,u.Z)(this,"_interactionState",{isDragging:!1}),(0,u.Z)(this,"_events",{}),(0,u.Z)(this,"_setInteractionState",function(t){Object.assign(e._interactionState,t),e.onStateChange&&e.onStateChange(e._interactionState)}),(0,u.Z)(this,"_onTransition",function(t,n){e.onViewportChange(t,e._interactionState,n)}),this.handleEvent=this.handleEvent.bind(this),this._transitionManager=new tV({onViewportChange:this._onTransition,onStateChange:this._setInteractionState})}return A(t,[{key:"handleEvent",value:function(t){this.mapState=this.getMapState();var e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return!e&&this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}},{key:"getCenter",value:function(t){var e=t.offsetCenter;return[e.x,e.y]}},{key:"isFunctionKeyPressed",value:function(t){var e=t.srcEvent;return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:"blockEvents",value:function(t){var e=this,n=setTimeout(function(){e._eventStartBlocked===n&&(e._eventStartBlocked=null)},t);this._eventStartBlocked=n}},{key:"updateViewport",value:function(t,e,n){var r=this.mapState instanceof to?this.mapState.getViewportProps():this.mapState,o=eP(eP({},t.getViewportProps()),e),i=Object.keys(o).some(function(t){return r[t]!==o[t]});this._state=t.getState(),this._setInteractionState(n),i&&this.onViewportChange(o,this._interactionState,r)}},{key:"getMapState",value:function(t){return new to(eP(eP(eP({},this.mapStateProps),this._state),t))}},{key:"isDragging",value:function(){return this._interactionState.isDragging}},{key:"setOptions",value:function(t){var e=t.onViewportChange,n=t.onStateChange,r=t.eventManager,o=void 0===r?this.eventManager:r,i=t.isInteractive,a=void 0===i||i,u=t.scrollZoom,s=void 0===u?this.scrollZoom:u,c=t.dragPan,l=void 0===c?this.dragPan:c,f=t.dragRotate,p=void 0===f?this.dragRotate:f,d=t.doubleClickZoom,h=void 0===d?this.doubleClickZoom:d,y=t.touchZoom,g=void 0===y?this.touchZoom:y,v=t.touchRotate,m=void 0===v?this.touchRotate:v,b=t.keyboard,E=void 0===b?this.keyboard:b;this.onViewportChange=e,this.onStateChange=n;var P=this.mapStateProps||{},_=P.height!==t.height||P.width!==t.width;this.mapStateProps=t,_&&(this.mapState=P,this.updateViewport(new to(t))),this._transitionManager.processViewportChange(t),this.eventManager!==o&&(this.eventManager=o,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(ew.WHEEL,a&&!!s),this.toggleEvents(ew.PAN,a&&!!(l||p)),this.toggleEvents(ew.PINCH,a&&!!(g||m)),this.toggleEvents(ew.TRIPLE_PAN,a&&!!m),this.toggleEvents(ew.DOUBLE_TAP,a&&!!h),this.toggleEvents(ew.KEYBOARD,a&&!!E),this.scrollZoom=s,this.dragPan=l,this.dragRotate=p,this.doubleClickZoom=h,this.touchZoom=g,this.touchRotate=m,this.keyboard=E}},{key:"toggleEvents",value:function(t,e){var n=this;this.eventManager&&t.forEach(function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))})}},{key:"_onPanStart",value:function(t){var e=this.getCenter(t);this._panRotate=this.isFunctionKeyPressed(t)||t.rightButton;var n=this._panRotate?this.mapState.rotateStart({pos:e}):this.mapState.panStart({pos:e});return this.updateViewport(n,e_,{isDragging:!0}),!0}},{key:"_onPan",value:function(t){return!!this.isDragging()&&(this._panRotate?this._onPanRotate(t):this._onPanMove(t))}},{key:"_onPanEnd",value:function(t){return!!this.isDragging()&&(this._panRotate?this._onPanRotateEnd(t):this._onPanMoveEnd(t))}},{key:"_onPanMove",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t),n=this.mapState.pan({pos:e});return this.updateViewport(n,e_,{isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(t){if(this.dragPan){var e=this.dragPan.inertia,n=void 0===e?300:e;if(n&&t.velocity){var r=this.getCenter(t),o=[r[0]+t.velocityX*n/2,r[1]+t.velocityY*n/2],i=this.mapState.pan({pos:o}).panEnd();return this.updateViewport(i,eP(eP({},eO),{},{transitionDuration:n,transitionEasing:eS}),{isDragging:!1,isPanning:!0}),!0}}var a=this.mapState.panEnd();return this.updateViewport(a,null,{isDragging:!1,isPanning:!1}),!0}},{key:"_onPanRotate",value:function(t){if(!this.dragRotate)return!1;var e=this.getCenter(t),n=this.mapState.rotate({pos:e});return this.updateViewport(n,e_,{isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(t){if(this.dragRotate){var e=this.dragRotate.inertia,n=void 0===e?300:e;if(n&&t.velocity){var r=this.getCenter(t),o=[r[0]+t.velocityX*n/2,r[1]+t.velocityY*n/2],i=this.mapState.rotate({pos:o}).rotateEnd();return this.updateViewport(i,eP(eP({},eO),{},{transitionDuration:n,transitionEasing:eS}),{isDragging:!1,isRotating:!0}),!0}}var a=this.mapState.panEnd();return this.updateViewport(a,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onWheel",value:function(t){if(!this.scrollZoom)return!1;var e=this.scrollZoom,n=e.speed,r=e.smooth;t.preventDefault();var o=this.getCenter(t),i=t.delta,a=2/(1+Math.exp(-Math.abs(i*(void 0===n?.01:n))));i<0&&0!==a&&(a=1/a);var u=this.mapState.zoom({pos:o,scale:a});return u.getViewportProps().zoom!==this.mapStateProps.zoom&&(this.updateViewport(u,eP(eP({},eO),{},{transitionInterpolator:new tB({around:o}),transitionDuration:void 0!==r&&r?250:1}),{isPanning:!0,isZooming:!0}),!0)}},{key:"_onPinchStart",value:function(t){var e=this.getCenter(t),n=this.mapState.zoomStart({pos:e}).rotateStart({pos:e});return this._startPinchRotation=t.rotation,this._lastPinchEvent=t,this.updateViewport(n,e_,{isDragging:!0}),!0}},{key:"_onPinch",value:function(t){if(!this.isDragging()||!this.touchZoom&&!this.touchRotate)return!1;var e=this.mapState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var o=t.rotation;e=e.rotate({deltaAngleX:this._startPinchRotation-o})}return this.updateViewport(e,e_,{isDragging:!0,isPanning:!!this.touchZoom,isZooming:!!this.touchZoom,isRotating:!!this.touchRotate}),this._lastPinchEvent=t,!0}},{key:"_onPinchEnd",value:function(t){if(!this.isDragging())return!1;if(this.touchZoom){var e=this.touchZoom.inertia,n=void 0===e?300:e,r=this._lastPinchEvent;if(n&&r&&t.scale!==r.scale){var o=this.getCenter(t),i=this.mapState.rotateEnd(),a=Math.log2(t.scale),u=(a-Math.log2(r.scale))/(t.deltaTime-r.deltaTime),s=Math.pow(2,a+u*n/2);return i=i.zoom({pos:o,scale:s}).zoomEnd(),this.updateViewport(i,eP(eP({},eO),{},{transitionInterpolator:new tB({around:o}),transitionDuration:n,transitionEasing:eS}),{isDragging:!1,isPanning:!!this.touchZoom,isZooming:!!this.touchZoom,isRotating:!1}),this.blockEvents(n),!0}}var c=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(c,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),this._startPinchRotation=null,this._lastPinchEvent=null,!0}},{key:"_onTriplePanStart",value:function(t){var e=this.getCenter(t),n=this.mapState.rotateStart({pos:e});return this.updateViewport(n,e_,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(t){if(!this.isDragging()||!this.touchRotate)return!1;var e=this.getCenter(t);e[0]-=t.deltaX;var n=this.mapState.rotate({pos:e});return this.updateViewport(n,e_,{isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(t){if(!this.isDragging())return!1;if(this.touchRotate){var e=this.touchRotate.inertia,n=void 0===e?300:e;if(n&&t.velocityY){var r=this.getCenter(t),o=[r[0],r[1]+=t.velocityY*n/2],i=this.mapState.rotate({pos:o});return this.updateViewport(i,eP(eP({},eO),{},{transitionDuration:n,transitionEasing:eS}),{isDragging:!1,isRotating:!0}),this.blockEvents(n),!1}}var a=this.mapState.rotateEnd();return this.updateViewport(a,null,{isDragging:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t),n=this.isFunctionKeyPressed(t),r=this.mapState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,Object.assign({},eO,{transitionInterpolator:new tB({around:e})}),{isZooming:!0}),!0}},{key:"_onKeyDown",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.keyboard,o=r.zoomSpeed,i=void 0===o?2:o,a=r.moveSpeed,u=void 0===a?100:a,s=r.rotateSpeedX,c=void 0===s?15:s,l=r.rotateSpeedY,f=void 0===l?10:l,p=this.mapStateProps;switch(t.srcEvent.keyCode){case 189:e=n?this.getMapState({zoom:p.zoom-Math.log2(i)-1}):this.getMapState({zoom:p.zoom-Math.log2(i)});break;case 187:e=n?this.getMapState({zoom:p.zoom+Math.log2(i)+1}):this.getMapState({zoom:p.zoom+Math.log2(i)});break;case 37:e=n?this.getMapState({bearing:p.bearing-c}):this.mapState.pan({pos:[u,0],startPos:[0,0]});break;case 39:e=n?this.getMapState({bearing:p.bearing+c}):this.mapState.pan({pos:[-u,0],startPos:[0,0]});break;case 38:e=n?this.getMapState({pitch:p.pitch+f}):this.mapState.pan({pos:[0,u],startPos:[0,0]});break;case 40:e=n?this.getMapState({pitch:p.pitch-f}):this.mapState.pan({pos:[0,-u],startPos:[0,0]});break;default:return!1}return this.updateViewport(e,eO)}}]),t}();function ex(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ej(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ex(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ex(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var eT=Object.assign({},tP.propTypes,{maxZoom:c.number,minZoom:c.number,maxPitch:c.number,minPitch:c.number,onViewStateChange:c.func,onViewportChange:c.func,onInteractionStateChange:c.func,transitionDuration:c.oneOfType([c.number,c.string]),transitionInterpolator:c.object,transitionInterruption:c.number,transitionEasing:c.func,onTransitionStart:c.func,onTransitionInterrupt:c.func,onTransitionEnd:c.func,scrollZoom:c.oneOfType([c.bool,c.object]),dragPan:c.oneOfType([c.bool,c.object]),dragRotate:c.oneOfType([c.bool,c.object]),doubleClickZoom:c.bool,touchZoom:c.oneOfType([c.bool,c.object]),touchRotate:c.oneOfType([c.bool,c.object]),keyboard:c.oneOfType([c.bool,c.object]),onHover:c.func,onClick:c.func,onDblClick:c.func,onContextMenu:c.func,onMouseDown:c.func,onMouseMove:c.func,onMouseUp:c.func,onTouchStart:c.func,onTouchMove:c.func,onTouchEnd:c.func,onMouseEnter:c.func,onMouseLeave:c.func,onMouseOut:c.func,onWheel:c.func,touchAction:c.string,eventRecognizerOptions:c.object,clickRadius:c.number,interactiveLayerIds:c.array,getCursor:c.func,controller:c.instanceOf(eM)}),ek=Object.assign({},tP.defaultProps,tn,tV.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(t){return t.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",eventRecognizerOptions:{},clickRadius:0,getCursor:function(t){var e=t.isDragging,n=t.isHovering;return e?"grabbing":n?"pointer":"grab"}});function eC(t){if(t.lngLat||!t.offsetCenter)return t;var e=t.offsetCenter,n=e.x,r=e.y;if(!Number.isFinite(n)||!Number.isFinite(r))return t;var o=[n,r];if(t.point=o,this.map){var i=this.map.unproject(o);t.lngLat=[i.lng,i.lat]}return t}function eD(t){var e=this.map;if(!e||!t)return null;var n={},r=this.props.clickRadius;this.props.interactiveLayerIds&&(n.layers=this.props.interactiveLayerIds);try{return e.queryRenderedFeatures(r?[[t[0]-r,t[1]+r],[t[0]+r,t[1]-r]]:t,n)}catch(t){return null}}function eR(t,e){var n=this.props[t];n&&n(eC.call(this,e))}function eI(t){eR.call(this,"touch"===t.pointerType?"onTouchStart":"onMouseDown",t)}function eA(t){eR.call(this,"touch"===t.pointerType?"onTouchEnd":"onMouseUp",t)}function eN(t){if(eR.call(this,"touch"===t.pointerType?"onTouchMove":"onMouseMove",t),!this.state.isDragging){var e,n=this.props,r=n.onHover,o=n.interactiveLayerIds;t=eC.call(this,t),(o||r)&&(e=eD.call(this,t.point));var i=!!(o&&e&&e.length>0),a=i&&!this.state.isHovering,u=!i&&this.state.isHovering;(r||a)&&(t.features=e,r&&r(t)),a&&eR.call(this,"onMouseEnter",t),u&&eR.call(this,"onMouseLeave",t),(a||u)&&this.setState({isHovering:i})}}function eF(t){var e=this.props,n=e.onClick,r=e.onNativeClick,o=e.onDblClick,i=e.doubleClickZoom,a=[],u=o||i;switch(t.type){case"anyclick":a.push(r),u||a.push(n);break;case"click":u&&a.push(n)}(a=a.filter(Boolean)).length&&((t=eC.call(this,t)).features=eD.call(this,t.point),a.forEach(function(e){return e(t)}))}var eL=(0,s.forwardRef)(function(t,e){var n,a,u=(0,s.useContext)(tc),c=(0,s.useMemo)(function(){return t.controller||new eM},[]),l=(0,s.useMemo)(function(){return new eb(null,{touchAction:t.touchAction,recognizerOptions:t.eventRecognizerOptions})},[]),f=(0,s.useRef)(null),p=(0,s.useRef)(null),d=(0,s.useRef)({width:0,height:0,state:{isHovering:!1,isDragging:!1}}).current;d.props=t,d.map=p.current&&p.current.getMap(),d.setState=function(e){d.state=ej(ej({},d.state),e),f.current.style.cursor=t.getCursor(d.state)};var h=!0,y=function(t,e,r){if(h){n=[t,e,r];return}var o=d.props,i=o.onViewStateChange,a=o.onViewportChange;Object.defineProperty(t,"position",{get:function(){return[0,0,tf(d.map,t)]}}),i&&i({viewState:t,interactionState:e,oldViewState:r}),a&&a(t,e,r)};(0,s.useImperativeHandle)(e,function(){return{getMap:p.current&&p.current.getMap,queryRenderedFeatures:p.current&&p.current.queryRenderedFeatures}},[]);var g=(0,s.useMemo)(function(){return ej(ej({},u),{},{eventManager:l,container:u.container||f.current})},[u,f.current]);g.onViewportChange=y,g.viewport=u.viewport||ty(d),d.viewport=g.viewport;var v=function(t){var e=t.isDragging,n=void 0!==e&&e;if(n!==d.state.isDragging&&d.setState({isDragging:n}),h){a=t;return}var r=d.props.onInteractionStateChange;r&&r(t)},m=function(){d.width&&d.height&&c.setOptions(ej(ej(ej({},d.props),d.props.viewState),{},{isInteractive:!!(d.props.onViewStateChange||d.props.onViewportChange),onViewportChange:y,onStateChange:v,eventManager:l,width:d.width,height:d.height}))};(0,s.useEffect)(function(){return l.setElement(f.current),l.on({pointerdown:eI.bind(d),pointermove:eN.bind(d),pointerup:eA.bind(d),pointerleave:eR.bind(d,"onMouseOut"),click:eF.bind(d),anyclick:eF.bind(d),dblclick:eR.bind(d,"onDblClick"),wheel:eR.bind(d,"onWheel"),contextmenu:eR.bind(d,"onContextMenu")}),function(){l.destroy()}},[]),tl(function(){if(n){var t;y.apply(void 0,function(t){if(Array.isArray(t))return o(t)}(t=n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}a&&v(a)}),m();var b=t.width,E=t.height,P=t.style,_=t.getCursor,O=(0,s.useMemo)(function(){return ej(ej({position:"relative"},P),{},{width:b,height:E,cursor:_(d.state)})},[P,b,E,_,d.state]);return n&&d._child||(d._child=s.createElement(ts,{value:g},s.createElement("div",{key:"event-canvas",ref:f,style:O},s.createElement(tP,r({},t,{width:"100%",height:"100%",style:null,onResize:function(t){var e=t.width,n=t.height;d.width=e,d.height=n,m(),d.props.onResize({width:e,height:n})},ref:p}))))),h=!1,d._child});eL.supported=tP.supported,eL.propTypes=eT,eL.defaultProps=ek;var eH=eL;function eG(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!eG(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===(0,tx.Z)(t)&&"object"===(0,tx.Z)(e)){var r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++){var a=r[i];if(!e.hasOwnProperty(a)||!eG(t[a],e[a]))return!1}return!0}return!1}function ez(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var eY={type:c.string.isRequired,id:c.string},eB=0;function eU(t){var e=(0,s.useContext)(tc),n=(0,s.useRef)({id:t.id,type:t.type}),r=l((0,s.useState)(0),2)[1],o=(0,s.useMemo)(function(){return t.id||"jsx-source-".concat(eB++)},[]),i=e.map;(0,s.useEffect)(function(){if(i){var t=function(){return r(function(t){return t+1})};return i.on("styledata",t),function(){i.off("styledata",t),requestAnimationFrame(function(){i.style&&i.style._loaded&&i.getSource(o)&&i.removeSource(o)})}}},[i,o]);var a=i&&i.style&&i.getSource(o);return a?function(t,e,n){Q(e.id===n.id,"source id changed"),Q(e.type===n.type,"source type changed");var r="",o=0;for(var i in e)"children"!==i&&"id"!==i&&!eG(n[i],e[i])&&(r=i,o++);if(o){var a=e.type;if("geojson"===a)t.setData(e.data);else if("image"===a)t.updateImage({url:e.url,coordinates:e.coordinates});else if(("canvas"===a||"video"===a)&&1===o&&"coordinates"===r)t.setCoordinates(e.coordinates);else if("vector"===a&&t.setUrl)switch(r){case"url":t.setUrl(e.url);break;case"tiles":t.setTiles(e.tiles)}else console.warn("Unable to update <Source> prop: ".concat(r))}}(a,t,n.current):a=function(t,e,n){if(t&&t.style&&t.style._loaded){var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ez(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ez(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n);return delete r.id,delete r.children,t.addSource(e,r),t.getSource(e)}return null}(i,o,t),n.current=t,a&&s.Children.map(t.children,function(t){return t&&(0,s.cloneElement)(t,{source:o})})||null}eU.propTypes=eY;var eq=eU;function eZ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function eV(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?eZ(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eZ(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var eX={type:c.oneOf(["fill","line","symbol","circle","fill-extrusion","raster","background","heatmap","hillshade","sky"]).isRequired,id:c.string,source:c.string,beforeId:c.string},eW=0;function eJ(t){var e=(0,s.useContext)(tc),n=(0,s.useRef)({id:t.id,type:t.type}),r=l((0,s.useState)(0),2)[1],o=(0,s.useMemo)(function(){return t.id||"jsx-layer-".concat(eW++)},[]),i=e.map;return(0,s.useEffect)(function(){if(i){var t=function(){return r(function(t){return t+1})};return i.on("styledata",t),function(){i.off("styledata",t),i.style&&i.style._loaded&&i.removeLayer(o)}}},[i]),i&&i.style&&i.getLayer(o)?function(t,e,n,r){Q(n.id===r.id,"layer id changed"),Q(n.type===r.type,"layer type changed");try{!function(t,e,n,r){var o=n.layout,i=void 0===o?{}:o,a=n.paint,u=void 0===a?{}:a,s=n.filter,c=n.minzoom,l=n.maxzoom,f=n.beforeId,p=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(n,["layout","paint","filter","minzoom","maxzoom","beforeId"]);if(f!==r.beforeId&&t.moveLayer(e,f),i!==r.layout){var d=r.layout||{};for(var h in i)eG(i[h],d[h])||t.setLayoutProperty(e,h,i[h]);for(var y in d)i.hasOwnProperty(y)||t.setLayoutProperty(e,y,void 0)}if(u!==r.paint){var g=r.paint||{};for(var v in u)eG(u[v],g[v])||t.setPaintProperty(e,v,u[v]);for(var m in g)u.hasOwnProperty(m)||t.setPaintProperty(e,m,void 0)}for(var b in eG(s,r.filter)||t.setFilter(e,s),(c!==r.minzoom||l!==r.maxzoom)&&t.setLayerZoomRange(e,c,l),p)eG(p[b],r[b])||t.setLayerProperty(e,b,p[b])}(t,e,n,r)}catch(t){console.warn(t)}}(i,o,t,n.current):function(t,e,n){if(t.style&&t.style._loaded){var r=eV(eV({},n),{},{id:e});delete r.beforeId,t.addLayer(r,n.beforeId)}}(i,o,t),n.current=t,null}eJ.propTypes=eX;var e$=eJ,eK={captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0,capturePointerMove:!1},eQ={captureScroll:c.bool,captureDrag:c.bool,captureClick:c.bool,captureDoubleClick:c.bool,capturePointerMove:c.bool};function e0(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,s.useContext)(tc),n=(0,s.useRef)(null),r=(0,s.useRef)({props:t,state:{},context:e,containerRef:n}).current;return r.props=t,r.context=e,(0,s.useEffect)(function(){return function(t){var e=t.containerRef.current,n=t.context.eventManager;if(e&&n){var r={wheel:function(e){var n=t.props;n.captureScroll&&e.stopPropagation(),n.onScroll&&n.onScroll(e,t)},panstart:function(e){var n=t.props;n.captureDrag&&e.stopPropagation(),n.onDragStart&&n.onDragStart(e,t)},anyclick:function(e){var n=t.props;n.captureClick&&e.stopPropagation(),n.onNativeClick&&n.onNativeClick(e,t)},click:function(e){var n=t.props;n.captureClick&&e.stopPropagation(),n.onClick&&n.onClick(e,t)},dblclick:function(e){var n=t.props;n.captureDoubleClick&&e.stopPropagation(),n.onDoubleClick&&n.onDoubleClick(e,t)},pointermove:function(e){var n=t.props;n.capturePointerMove&&e.stopPropagation(),n.onPointerMove&&n.onPointerMove(e,t)}};return n.watch(r,e),function(){n.off(r)}}}(r)},[e.eventManager]),r}function e1(t){var e=t.instance,n=e0(t),r=n.context,o=n.containerRef;return e._context=r,e._containerRef=o,e._render()}var e2=function(t){tM(o,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tT(o);if(e){var r=tT(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return tj(this,t)});function o(){var t;D(this,o);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,u.Z)(tS(t),"_context",{}),(0,u.Z)(tS(t),"_containerRef",(0,s.createRef)()),(0,u.Z)(tS(t),"_onScroll",function(t){}),(0,u.Z)(tS(t),"_onDragStart",function(t){}),(0,u.Z)(tS(t),"_onDblClick",function(t){}),(0,u.Z)(tS(t),"_onClick",function(t){}),(0,u.Z)(tS(t),"_onPointerMove",function(t){}),t}return A(o,[{key:"_render",value:function(){throw Error("_render() not implemented")}},{key:"render",value:function(){return s.createElement(e1,r({instance:this},this.props,{onScroll:this._onScroll,onDragStart:this._onDragStart,onDblClick:this._onDblClick,onClick:this._onClick,onPointerMove:this._onPointerMove}))}}]),o}(s.PureComponent);function e3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function e6(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?e3(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e3(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}(0,u.Z)(e2,"propTypes",eQ),(0,u.Z)(e2,"defaultProps",eK);var e4=Object.assign({},eQ,{draggable:c.bool,onDrag:c.func,onDragEnd:c.func,onDragStart:c.func,offsetLeft:c.number,offsetTop:c.number}),e5=Object.assign({},eK,{draggable:!1,offsetLeft:0,offsetTop:0});function e8(t){var e=t.offsetCenter;return[e.x,e.y]}function e9(t,e,n,r){var o=t[0]+e[0]-n.offsetLeft,i=t[1]+e[1]-n.offsetTop;return r.viewport.unproject([o,i])}function e7(t,e){var n=e.props,r=e.callbacks,o=e.state,i=e.context,a=e.containerRef;if(n.draggable){t.stopPropagation();var u=e8(t),s=function(t,e){var n=t.center,r=n.x,o=n.y;if(e){var i=e.getBoundingClientRect();return[i.left-r,i.top-o]}return null}(t,a.current);if(o.setDragPos(u),o.setDragOffset(s),r.onDragStart&&s){var c=Object.assign({},t);c.lngLat=e9(u,s,n,i),r.onDragStart(c)}}}var nt="undefined"!=typeof window&&window.devicePixelRatio||1,ne=function(t){return Math.round(t*nt)/nt},nn=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";if(null===t)return e;var r="x"===n?t.offsetWidth:t.offsetHeight;return ne(e/100*r)/r*100};function nr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var no=Object.assign({},e4,{className:c.string,longitude:c.number.isRequired,latitude:c.number.isRequired,style:c.object}),ni=Object.assign({},e5,{className:""});function na(t){var e,n,r,o,i,a,c,f=(n=(e=l((0,s.useState)(null),2))[0],r=e[1],i=(o=l((0,s.useState)(null),2))[0],a=o[1],(c=e0(e6(e6({},t),{},{onDragStart:e7}))).callbacks=t,c.state.dragPos=n,c.state.setDragPos=r,c.state.dragOffset=i,c.state.setDragOffset=a,(0,s.useEffect)(function(){return function(t){var e=t.context.eventManager;if(e&&t.state.dragPos){var n={panmove:function(e){return function(t,e){var n=e.props,r=e.callbacks,o=e.state,i=e.context;t.stopPropagation();var a=e8(t);o.setDragPos(a);var u=o.dragOffset;if(r.onDrag&&u){var s=Object.assign({},t);s.lngLat=e9(a,u,n,i),r.onDrag(s)}}(e,t)},panend:function(e){return function(t,e){var n=e.props,r=e.callbacks,o=e.state,i=e.context;t.stopPropagation();var a=o.dragPos,u=o.dragOffset;if(o.setDragPos(null),o.setDragOffset(null),r.onDragEnd&&a&&u){var s=Object.assign({},t);s.lngLat=e9(a,u,n,i),r.onDragEnd(s)}}(e,t)},pancancel:function(e){var n;return n=t.state,void(e.stopPropagation(),n.setDragPos(null),n.setDragOffset(null))}};return e.watch(n),function(){e.off(n)}}}(c)},[c.context.eventManager,!!n]),c),p=f.state,d=f.containerRef,h=t.children,y=t.className,g=t.draggable,v=t.style,m=p.dragPos,b=function(t){var e=t.props,n=t.state,r=t.context,o=e.longitude,i=e.latitude,a=e.offsetLeft,u=e.offsetTop,s=n.dragPos,c=n.dragOffset,f=r.viewport,p=r.map;if(s&&c)return[s[0]+c[0],s[1]+c[1]];var d=tf(p,{longitude:o,latitude:i}),h=l(f.project([o,i,d]),2),y=h[0],g=h[1];return[y+=a,g+=u]}(f),E=l(b,2),P=E[0],_=E[1],O="translate(".concat(ne(P),"px, ").concat(ne(_),"px)"),S=g?m?"grabbing":"grab":"auto",w=(0,s.useMemo)(function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute",left:0,top:0,transform:O,cursor:S},v);return s.createElement("div",{className:"mapboxgl-marker ".concat(y),ref:f.containerRef,style:t},h)},[h,y]),M=d.current;return M&&(M.style.transform=O,M.style.cursor=S),w}na.defaultProps=ni,na.propTypes=no;var nu=s.memo(na),ns={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},nc=Object.keys(ns),nl=Object.assign({},eQ,{className:c.string,longitude:c.number.isRequired,latitude:c.number.isRequired,altitude:c.number,offsetLeft:c.number,offsetTop:c.number,tipSize:c.number,closeButton:c.bool,closeOnClick:c.bool,anchor:c.oneOf(Object.keys(ns)),dynamicPosition:c.bool,sortByDepth:c.bool,onClose:c.func}),nf=Object.assign({},eK,{className:"",offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}});function np(t){var e,n,r,o,i,a,u,c,f,p,d,h,y,g,v,m,b,E,P,_=(0,s.useRef)(null),O=e0(t),S=O.context,w=O.containerRef,M=l((0,s.useState)(!1),2)[1];(0,s.useEffect)(function(){M(!0)},[_.current]),(0,s.useEffect)(function(){if(S.eventManager&&t.closeOnClick){var e=function(){return O.props.onClose()};return S.eventManager.on("anyclick",e),function(){S.eventManager.off("anyclick",e)}}},[S.eventManager,t.closeOnClick]);var x=S.viewport,j=S.map,T=t.className,k=t.longitude,C=t.latitude,D=t.tipSize,R=t.closeButton,I=t.children,A=t.altitude;void 0===A&&(A=tf(j,{longitude:k,latitude:C}));var N=x.project([k,C,A]),F=(e=_.current,r=(n=l(N,2))[0],o=n[1],i=t.anchor,a=t.dynamicPosition,u=t.tipSize,e&&a?function(t){var e=t.x,n=t.y,r=t.width,o=t.height,i=t.selfWidth,a=t.selfHeight,u=t.anchor,s=t.padding,c=void 0===s?0:s,l=ns[u],f=l.x,p=l.y,d=n-p*a,h=d+a,y=Math.max(0,c-d)+Math.max(0,h-o+c);if(y>0){var g=p,v=y;for(p=0;p<=1;p+=.5)h=(d=n-p*a)+a,(y=Math.max(0,c-d)+Math.max(0,h-o+c))<v&&(v=y,g=p);p=g}var m=.5;.5===p&&(f=Math.floor(f),m=1);var b=e-f*i,E=b+i,P=Math.max(0,c-b)+Math.max(0,E-r+c);if(P>0){var _=f,O=P;for(f=0;f<=1;f+=m)E=(b=e-f*i)+i,(P=Math.max(0,c-b)+Math.max(0,E-r+c))<O&&(O=P,_=f);f=_}return nc.find(function(t){var e=ns[t];return e.x===f&&e.y===p})||u}({x:r,y:o,anchor:i,padding:u,width:x.width,height:x.height,selfWidth:e.clientWidth,selfHeight:e.clientHeight}):i),L=(c=w.current,p=(f=l(N,3))[0],d=f[1],h=f[2],y=t.offsetLeft,g=t.offsetTop,v=t.sortByDepth,b=nn(c,-(100*(m=ns[F]).x)),E=nn(c,-(100*m.y),"y"),P={position:"absolute",transform:"\n      translate(".concat(b,"%, ").concat(E,"%)\n      translate(").concat(ne(p+y),"px, ").concat(ne(d+g),"px)\n    "),display:void 0,zIndex:void 0},v&&(h>1||h<-1||p<0||p>x.width||d<0||d>x.height?P.display="none":P.zIndex=Math.floor((1-h)/2*1e5)),P),H=(0,s.useCallback)(function(t){O.props.onClose();var e=O.context.eventManager;e&&e.once("click",function(t){return t.stopPropagation()},t.target)},[]);return s.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(F," ").concat(T),style:L,ref:w},s.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:D}}),s.createElement("div",{key:"content",ref:_,className:"mapboxgl-popup-content"},R&&s.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button",onClick:H},"\xd7"),I))}np.propTypes=nl,np.defaultProps=nf;var nd=s.memo(np);function nh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var ny=Object.assign({},eQ,{toggleLabel:c.string,className:c.string,style:c.object,compact:c.bool,customAttribution:c.oneOfType([c.string,c.arrayOf(c.string)])}),ng=Object.assign({},eK,{className:"",toggleLabel:"Toggle Attribution"});function nv(t){var e=e0(t),n=e.context,r=e.containerRef,o=(0,s.useRef)(null),i=l((0,s.useState)(!1),2),a=i[0],c=i[1];(0,s.useEffect)(function(){var e,i,a,u,s,c;return n.map&&(i={customAttribution:t.customAttribution},a=n.map,u=r.current,s=o.current,(c=new(W()).AttributionControl(i))._map=a,c._container=u,c._innerContainer=s,c._updateAttributions(),c._updateEditLink(),a.on("styledata",c._updateData),a.on("sourcedata",c._updateData),e=c),function(){var t;return e&&void((t=e)._map.off("styledata",t._updateData),t._map.off("sourcedata",t._updateData))}},[n.map]);var f=void 0===t.compact?n.viewport.width<=640:t.compact;(0,s.useEffect)(function(){!f&&a&&c(!1)},[f]);var p=(0,s.useCallback)(function(){return c(function(t){return!t})},[]),d=(0,s.useMemo)(function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nh(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nh(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute"},t.style)},[t.style]);return s.createElement("div",{style:d,className:t.className},s.createElement("div",{ref:r,"aria-pressed":a,className:"mapboxgl-ctrl mapboxgl-ctrl-attrib ".concat(f?"mapboxgl-compact":""," ").concat(a?"mapboxgl-compact-show":"")},s.createElement("button",{type:"button",className:"mapboxgl-ctrl-attrib-button",title:t.toggleLabel,onClick:p}),s.createElement("div",{ref:o,className:"mapboxgl-ctrl-attrib-inner",role:"list"})))}nv.propTypes=ny,nv.defaultProps=ng;var nm=s.memo(nv);function nb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var nE=Object.assign({},eQ,{className:c.string,style:c.object,container:c.object,label:c.string}),nP=Object.assign({},eK,{className:"",container:null,label:"Toggle fullscreen"});function n_(t){var e=e0(t),n=e.context,r=e.containerRef,o=l((0,s.useState)(!1),2),i=o[0],a=o[1],c=l((0,s.useState)(!1),2),f=c[0],p=c[1],d=l((0,s.useState)(null),2),h=d[0],y=d[1];(0,s.useEffect)(function(){var t=new(W()).FullscreenControl;y(t),p(t._checkFullscreenSupport());var e=function(){var e=!t._fullscreen;t._fullscreen=e,a(e)};return N.addEventListener(t._fullscreenchange,e),function(){N.removeEventListener(t._fullscreenchange,e)}},[]);var g=(0,s.useMemo)(function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nb(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute"},t.style)},[t.style]);if(!f)return null;var v=t.className,m=t.label,b=i?"shrink":"fullscreen";return s.createElement("div",{style:g,className:v},s.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:r},s.createElement("button",{key:b,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(b),type:"button",title:m,onClick:function(){h&&(h._container=t.container||n.container,h._onClickFullscreen())}},s.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}n_.propTypes=nE,n_.defaultProps=nP;var nO=s.memo(n_);function nS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var nw=function(){},nM=Object.assign({},eQ,{className:c.string,style:c.object,label:c.string,disabledLabel:c.string,auto:c.bool,positionOptions:c.object,fitBoundsOptions:c.object,trackUserLocation:c.bool,showUserLocation:c.bool,showAccuracyCircle:c.bool,showUserHeading:c.bool,onViewStateChange:c.func,onViewportChange:c.func,onGeolocate:c.func}),nx=Object.assign({},eK,{className:"",label:"Find My Location",disabledLabel:"Location Not Available",auto:!1,positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0,showUserHeading:!1,showAccuracyCircle:!0,onGeolocate:function(){}});function nj(t){var e=e0(t),n=e.context,r=e.containerRef,o=(0,s.useRef)(null),i=l((0,s.useState)(null),2),c=i[0],f=i[1],p=l((0,s.useState)(!1),2),d=p[0],h=p[1];(0,s.useEffect)(function(){var r;return n.map&&(void 0!==a?Promise.resolve(a):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then(function(t){return a="denied"!==t.state}):Promise.resolve(a=!!window.navigator.geolocation)).then(function(i){if(h(i),o.current){var a,u,s;a=o.current,(u=new(W()).GeolocateControl(t))._container=N.createElement("div"),u._map={on:function(){},_getUIString:function(){return""}},u._setupUI(!0),u._map=n.map,u._geolocateButton=a,s=n.eventManager,u.options.trackUserLocation&&s&&s.on("panstart",function(){"ACTIVE_LOCK"===u._watchState&&(u._watchState="BACKGROUND",a.classList.add("mapboxgl-ctrl-geolocate-background"),a.classList.remove("mapboxgl-ctrl-geolocate-active"))}),u.on("geolocate",t.onGeolocate),(r=u)._updateCamera=function(t){var n,r,o,i,a,u,s,c,l,f,p,d,h;return n=e.context,r=e.props,o=new(W()).LngLat(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,u=[[(a=o.toBounds(i))._ne.lng,a._ne.lat],[a._sw.lng,a._sw.lat]],c=(s=n.viewport.fitBounds(u,r.fitBoundsOptions)).longitude,l=s.latitude,f=s.zoom,p=Object.assign({},n.viewport,{longitude:c,latitude:l,zoom:f}),d=Object.assign({},new to(p).getViewportProps(),eO),h=r.onViewportChange||n.onViewportChange||nw,void((r.onViewStateChange||n.onViewStateChange||nw)({viewState:d}),h(d))},f(r)}}),function(){r&&r._clearWatch()}},[n.map]);var y=(0,s.useCallback)(function(){c&&(c.options=e.props,c.trigger())},[c]);(0,s.useEffect)(function(){t.auto&&y()},[c,t.auto]),(0,s.useEffect)(function(){c&&c._onZoom()},[n.viewport.zoom]);var g=t.className,v=t.label,m=t.disabledLabel,b=t.trackUserLocation,E=(0,s.useMemo)(function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nS(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nS(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute"},t.style)},[t.style]);return s.createElement("div",{style:E,className:g},s.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:r},s.createElement("button",{key:"geolocate",className:"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",ref:o,disabled:!d,"aria-pressed":!b,type:"button",title:d?v:m,"aria-label":d?v:m,onClick:y},s.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))))}nj.propTypes=nM,nj.defaultProps=nx;var nT=s.memo(nj);function nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var nC=function(){},nD=Object.assign({},eQ,{className:c.string,style:c.object,onViewStateChange:c.func,onViewportChange:c.func,showCompass:c.bool,showZoom:c.bool,zoomInLabel:c.string,zoomOutLabel:c.string,compassLabel:c.string}),nR=Object.assign({},eK,{className:"",showCompass:!0,showZoom:!0,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",compassLabel:"Reset North"});function nI(t,e,n){var r=t.viewport,o=Object.assign({},new to(Object.assign({},r,n)).getViewportProps(),eO),i=e.onViewportChange||t.onViewportChange||nC;(e.onViewStateChange||t.onViewStateChange||nC)({viewState:o}),i(o)}function nA(t,e,n,r){return s.createElement("button",{key:t,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(t),type:"button",title:e,onClick:n},r||s.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"}))}function nN(t){var e,n,r,o=e0(t),i=o.context,a=o.containerRef,c=t.className,l=t.showCompass,f=t.showZoom,p=t.zoomInLabel,d=t.zoomOutLabel,h=t.compassLabel,y=(0,s.useMemo)(function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nk(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute"},t.style)},[t.style]);return s.createElement("div",{style:y,className:c},s.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group",ref:a},f&&nA("zoom-in",p,function(){nI(i,t,{zoom:i.viewport.zoom+1})}),f&&nA("zoom-out",d,function(){nI(i,t,{zoom:i.viewport.zoom-1})}),l&&nA("compass",h,function(){nI(i,t,{bearing:0,pitch:0})},(e=(0,s.useMemo)(function(){return i.map?function(t,e){for(var n=(t||"").split(".").map(Number),r=(e||"").split(".").map(Number),o=0;o<3;o++){var i=n[o]||0,a=r[o]||0;if(i<a)return -1;if(i>a)return 1}return 0}(i.map.version,"1.6.0")>=0?2:1:2},[i.map]),n=i.viewport.bearing,r={transform:"rotate(".concat(-n,"deg)")},2===e?s.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:r}):s.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:r})))))}nN.propTypes=nD,nN.defaultProps=nR;var nF=s.memo(nN);function nL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var nH=Object.assign({},eQ,{className:c.string,style:c.object,maxWidth:c.number,unit:c.oneOf(["imperial","metric","nautical"])}),nG=Object.assign({},eK,{className:"",maxWidth:100,unit:"metric"});function nz(t){var e=e0(t),n=e.context,r=e.containerRef,o=l((0,s.useState)(null),2),i=o[0],a=o[1];(0,s.useEffect)(function(){if(n.map){var t=new(W()).ScaleControl;t._map=n.map,t._container=r.current,a(t)}},[n.map]),i&&(i.options=t,i._onMove&&i._onMove());var c=(0,s.useMemo)(function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nL(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nL(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute"},t.style)},[t.style]);return s.createElement("div",{style:c,className:t.className},s.createElement("div",{ref:r,className:"mapboxgl-ctrl mapboxgl-ctrl-scale"}))}nz.propTypes=nH,nz.defaultProps=nG;var nY=s.memo(nz),nB="undefined"!=typeof window&&window.devicePixelRatio||1,nU=Object.assign({},eQ,{redraw:c.func.isRequired});function nq(t){var e=e0(t),n=e.context,r=e.containerRef,o=l((0,s.useState)(null),2),i=o[0],a=o[1];(0,s.useEffect)(function(){a(r.current.getContext("2d"))},[]);var u=n.viewport,c=n.isDragging;return i&&(i.save(),i.scale(nB,nB),t.redraw({width:u.width,height:u.height,ctx:i,isDragging:c,project:u.project,unproject:u.unproject}),i.restore()),s.createElement("canvas",{ref:r,width:u.width*nB,height:u.height*nB,style:{width:"".concat(u.width,"px"),height:"".concat(u.height,"px"),position:"absolute",left:0,top:0}})}nq.propTypes=nU,nq.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};var nZ=nq;function nV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var nX=Object.assign({},eQ,{redraw:c.func.isRequired,style:c.object});function nW(t){var e=e0(t),n=e.context,r=e.containerRef,o=n.viewport,i=n.isDragging,a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nV(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nV(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute",left:0,top:0,width:o.width,height:o.height},t.style);return s.createElement("div",{ref:r,style:a},t.redraw({width:o.width,height:o.height,isDragging:i,project:o.project,unproject:o.unproject}))}nW.propTypes=nX,nW.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};var nJ=nW;function n$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var nK=Object.assign({},eQ,{redraw:c.func.isRequired,style:c.object});function nQ(t){var e=e0(t),n=e.context,r=e.containerRef,o=n.viewport,i=n.isDragging,a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?n$(Object(n),!0).forEach(function(e){(0,u.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n$(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({position:"absolute",left:0,top:0},t.style);return s.createElement("svg",{width:o.width,height:o.height,ref:r,style:a},t.redraw({width:o.width,height:o.height,isDragging:i,project:o.project,unproject:o.unproject}))}nQ.propTypes=nK,nQ.defaultProps={captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1,capturePointerMove:!1};var n0=nQ,n1=W()?W().setRTLTextPlugin:function(){}},19319:function(t,e,n){"use strict";n.r(e),n.d(e,{MAX_LATITUDE:function(){return w},WebMercatorViewport:function(){return q},addMetersToLngLat:function(){return R},altitudeToFovy:function(){return F},default:function(){return q},fitBounds:function(){return z},flyToViewport:function(){return W},fovyToAltitude:function(){return L},getBounds:function(){return B},getDistanceScales:function(){return D},getFlyToDuration:function(){return J},getMeterZoom:function(){return k},getProjectionMatrix:function(){return N},getProjectionParameters:function(){return A},getViewMatrix:function(){return I},lngLatToWorld:function(){return j},normalizeViewportProps:function(){return Z},pixelsToWorld:function(){return G},scaleToZoom:function(){return x},unitsPerMeter:function(){return C},worldToLngLat:function(){return T},worldToPixels:function(){return H},zoomToScale:function(){return M}});var r,o,i,a=n(4942),u="undefined"!=typeof Float32Array?Float32Array:Array;function s(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function c(t,e){var n,r,o,i,a,u;let s=(n=[],r=e[0],o=e[1],i=e[2],a=e[3],n[0]=t[0]*r+t[4]*o+t[8]*i+t[12]*a,n[1]=t[1]*r+t[5]*o+t[9]*i+t[13]*a,n[2]=t[2]*r+t[6]*o+t[10]*i+t[14]*a,n[3]=t[3]*r+t[7]*o+t[11]*i+t[15]*a,n);return u=1/s[3],s[0]=s[0]*u,s[1]=s[1]*u,s[2]=s[2]*u,s[3]=s[3]*u,s}function l(t,e){let n=t%e;return n<0?e+n:n}function f(t,e,n){return t<e?e:t>n?n:t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)}),r=new u(4),u!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0);let p=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function d(t,e,n){var r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],p=e[9],d=e[10],h=e[11],y=e[12],g=e[13],v=e[14],m=e[15],b=n[0],E=n[1],P=n[2],_=n[3];return t[0]=b*r+E*u+P*f+_*y,t[1]=b*o+E*s+P*p+_*g,t[2]=b*i+E*c+P*d+_*v,t[3]=b*a+E*l+P*h+_*m,b=n[4],E=n[5],P=n[6],_=n[7],t[4]=b*r+E*u+P*f+_*y,t[5]=b*o+E*s+P*p+_*g,t[6]=b*i+E*c+P*d+_*v,t[7]=b*a+E*l+P*h+_*m,b=n[8],E=n[9],P=n[10],_=n[11],t[8]=b*r+E*u+P*f+_*y,t[9]=b*o+E*s+P*p+_*g,t[10]=b*i+E*c+P*d+_*v,t[11]=b*a+E*l+P*h+_*m,b=n[12],E=n[13],P=n[14],_=n[15],t[12]=b*r+E*u+P*f+_*y,t[13]=b*o+E*s+P*p+_*g,t[14]=b*i+E*c+P*d+_*v,t[15]=b*a+E*l+P*h+_*m,t}function h(t,e,n){var r,o,i,a,u,s,c,l,f,p,d,h,y=n[0],g=n[1],v=n[2];return e===t?(t[12]=e[0]*y+e[4]*g+e[8]*v+e[12],t[13]=e[1]*y+e[5]*g+e[9]*v+e[13],t[14]=e[2]*y+e[6]*g+e[10]*v+e[14],t[15]=e[3]*y+e[7]*g+e[11]*v+e[15]):(r=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],p=e[9],d=e[10],h=e[11],t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=c,t[7]=l,t[8]=f,t[9]=p,t[10]=d,t[11]=h,t[12]=r*y+u*g+f*v+e[12],t[13]=o*y+s*g+p*v+e[13],t[14]=i*y+c*g+d*v+e[14],t[15]=a*y+l*g+h*v+e[15]),t}function y(t,e,n){var r=n[0],o=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}var g=function(t,e,n,r,o){var i,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(i=1/(r-o),t[10]=(o+r)*i,t[14]=2*o*r*i):(t[10]=-1,t[14]=-2*r),t};function v(t,e){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],c=t[7],l=t[8],f=t[9],p=t[10],d=t[11],h=t[12],y=t[13],g=t[14],v=t[15],m=e[0],b=e[1],E=e[2],P=e[3],_=e[4],O=e[5],S=e[6],w=e[7],M=e[8],x=e[9],j=e[10],T=e[11],k=e[12],C=e[13],D=e[14],R=e[15];return Math.abs(n-m)<=1e-6*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-b)<=1e-6*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-E)<=1e-6*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(i-P)<=1e-6*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(a-_)<=1e-6*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(u-O)<=1e-6*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(s-S)<=1e-6*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-w)<=1e-6*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(l-M)<=1e-6*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(f-x)<=1e-6*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(p-j)<=1e-6*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(d-T)<=1e-6*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(h-k)<=1e-6*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(y-C)<=1e-6*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(g-D)<=1e-6*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(v-R)<=1e-6*Math.max(1,Math.abs(v),Math.abs(R))}function m(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function b(t,e,n,r){var o=e[0],i=e[1];return t[0]=o+r*(n[0]-o),t[1]=i+r*(n[1]-i),t}function E(t,e){if(!t)throw Error(e||"@math.gl/web-mercator: assertion failed.")}o=new u(2),u!=Float32Array&&(o[0]=0,o[1]=0),i=new u(3),u!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0);let P=Math.PI,_=P/4,O=P/180,S=180/P,w=85.051129;function M(t){return Math.pow(2,t)}function x(t){return p(t)}function j(t){let[e,n]=t;E(Number.isFinite(e)),E(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");let r=n*O,o=512*(P+Math.log(Math.tan(_+.5*r)))/(2*P);return[512*(e*O+P)/(2*P),o]}function T(t){let[e,n]=t,r=2*(Math.atan(Math.exp(n/512*(2*P)-P))-_);return[(e/512*(2*P)-P)*S,r*S]}function k(t){let{latitude:e}=t;E(Number.isFinite(e));let n=Math.cos(e*O);return p(4003e4*n)-9}function C(t){let e=Math.cos(t*O);return 512/4003e4/e}function D(t){let{latitude:e,longitude:n,highPrecision:r=!1}=t;E(Number.isFinite(e)&&Number.isFinite(n));let o=Math.cos(e*O),i=512/360,a=i/o,u=512/4003e4/o,s={unitsPerMeter:[u,u,u],metersPerUnit:[1/u,1/u,1/u],unitsPerDegree:[i,a,u],degreesPerUnit:[1/i,1/a,1/u]};if(r){let t=O*Math.tan(e*O)/o,n=512/4003e4*t,r=n/a*u;s.unitsPerDegree2=[0,i*t/2,n],s.unitsPerMeter2=[r,0,r]}return s}function R(t,e){let[n,r,o]=t,[i,a,u]=e,{unitsPerMeter:s,unitsPerMeter2:c}=D({longitude:n,latitude:r,highPrecision:!0}),l=j(t);l[0]+=i*(s[0]+c[0]*a),l[1]+=a*(s[1]+c[1]*a);let f=T(l);return Number.isFinite(o)||Number.isFinite(u)?[f[0],f[1],(o||0)+(u||0)]:f}function I(t){var e,n,r,o,i,a,u,c,l,f,p,d,g,v,m,b,E,P,_,S,w,M,x;let{height:j,pitch:T,bearing:k,altitude:C,scale:D,center:R}=t,I=s();h(I,I,[0,0,-C]),n=Math.sin(e=-T*O),r=Math.cos(e),o=I[4],i=I[5],a=I[6],u=I[7],c=I[8],l=I[9],f=I[10],p=I[11],I!=I&&(I[0]=I[0],I[1]=I[1],I[2]=I[2],I[3]=I[3],I[12]=I[12],I[13]=I[13],I[14]=I[14],I[15]=I[15]),I[4]=o*r+c*n,I[5]=i*r+l*n,I[6]=a*r+f*n,I[7]=u*r+p*n,I[8]=c*r-o*n,I[9]=l*r-i*n,I[10]=f*r-a*n,I[11]=p*r-u*n,g=Math.sin(d=k*O),v=Math.cos(d),m=I[0],b=I[1],E=I[2],P=I[3],_=I[4],S=I[5],w=I[6],M=I[7],I!=I&&(I[8]=I[8],I[9]=I[9],I[10]=I[10],I[11]=I[11],I[12]=I[12],I[13]=I[13],I[14]=I[14],I[15]=I[15]),I[0]=m*v+_*g,I[1]=b*v+S*g,I[2]=E*v+w*g,I[3]=P*v+M*g,I[4]=_*v-m*g,I[5]=S*v-b*g,I[6]=w*v-E*g,I[7]=M*v-P*g;let A=D/j;return y(I,I,[A,A,A]),R&&h(I,I,((x=[])[0]=-R[0],x[1]=-R[1],x[2]=-R[2],x)),I}function A(t){let{width:e,height:n,altitude:r,pitch:o=0,offset:i,center:a,scale:u,nearZMultiplier:s=1,farZMultiplier:c=1}=t,{fovy:l=F(1.5)}=t;void 0!==r&&(l=F(r));let p=l*O,d=o*O,h=L(l),y=h;a&&(y+=a[2]*u/Math.cos(d)/n);let g=p*(.5+(i?i[1]:0)/n),v=Math.sin(g)*y/Math.sin(f(Math.PI/2-d-g,.01,Math.PI-.01)),m=Math.sin(d)*v+y,b=10*y,E=Math.min(m*c,b);return{fov:p,aspect:e/n,focalDistance:h,near:s,far:E}}function N(t){let{fov:e,aspect:n,near:r,far:o}=A(t),i=g([],e,n,r,o);return i}function F(t){return 2*Math.atan(.5/t)*S}function L(t){return .5/Math.tan(.5*t*O)}function H(t,e){let[n,r,o=0]=t;return E(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o)),c(e,[n,r,o,1])}function G(t,e,n=0){let[r,o,i]=t;if(E(Number.isFinite(r)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(i)){let t=c(e,[r,o,i,1]);return t}let a=c(e,[r,o,0,1]),u=c(e,[r,o,1,1]),s=a[2],l=u[2],f=s===l?0:((n||0)-s)/(l-s);return b([],a,u,f)}function z(t){let{width:e,height:n,bounds:r,minExtent:o=0,maxZoom:i=24,offset:a=[0,0]}=t,[[u,s],[c,l]]=r,d=function(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(E(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),h=j([u,f(l,-w,w)]),y=j([c,f(s,-w,w)]),g=[Math.max(Math.abs(y[0]-h[0]),o),Math.max(Math.abs(y[1]-h[1]),o)],v=[e-d.left-d.right-2*Math.abs(a[0]),n-d.top-d.bottom-2*Math.abs(a[1])];E(v[0]>0&&v[1]>0);let m=v[0]/g[0],b=v[1]/g[1],P=(d.right-d.left)/2/m,_=(d.top-d.bottom)/2/b,O=[(y[0]+h[0])/2+P,(y[1]+h[1])/2+_],S=T(O),M=Math.min(i,p(Math.abs(Math.min(m,b))));return E(Number.isFinite(M)),{longitude:S[0],latitude:S[1],zoom:M}}let Y=Math.PI/180;function B(t,e=0){let n,r;let{width:o,height:i,unproject:a}=t,u={targetZ:e},s=a([0,i],u),c=a([o,i],u),l=t.fovy?.5*t.fovy*Y:Math.atan(.5/t.altitude),f=(90-t.pitch)*Y;return l>f-.01?(n=U(t,0,e),r=U(t,o,e)):(n=a([0,0],u),r=a([o,0],u)),[s,c,r,n]}function U(t,e,n){let{pixelUnprojectionMatrix:r}=t,o=c(r,[e,0,1,1]),i=c(r,[e,t.height,1,1]),a=n*t.distanceScales.unitsPerMeter[2],u=(a-o[2])/(i[2]-o[2]),s=b([],o,i,u),l=T(s);return l.push(n),l}class q{constructor(t={width:1,height:1}){(0,a.Z)(this,"latitude",void 0),(0,a.Z)(this,"longitude",void 0),(0,a.Z)(this,"zoom",void 0),(0,a.Z)(this,"pitch",void 0),(0,a.Z)(this,"bearing",void 0),(0,a.Z)(this,"altitude",void 0),(0,a.Z)(this,"fovy",void 0),(0,a.Z)(this,"meterOffset",void 0),(0,a.Z)(this,"center",void 0),(0,a.Z)(this,"width",void 0),(0,a.Z)(this,"height",void 0),(0,a.Z)(this,"scale",void 0),(0,a.Z)(this,"distanceScales",void 0),(0,a.Z)(this,"viewMatrix",void 0),(0,a.Z)(this,"projectionMatrix",void 0),(0,a.Z)(this,"viewProjectionMatrix",void 0),(0,a.Z)(this,"pixelProjectionMatrix",void 0),(0,a.Z)(this,"pixelUnprojectionMatrix",void 0),(0,a.Z)(this,"equals",t=>t instanceof q&&t.width===this.width&&t.height===this.height&&v(t.projectionMatrix,this.projectionMatrix)&&v(t.viewMatrix,this.viewMatrix)),(0,a.Z)(this,"project",(t,e={})=>{let{topLeft:n=!0}=e,r=this.projectPosition(t),o=H(r,this.pixelProjectionMatrix),[i,a]=o,u=n?a:this.height-a;return 2===t.length?[i,u]:[i,u,o[2]]}),(0,a.Z)(this,"unproject",(t,e={})=>{let{topLeft:n=!0,targetZ:r}=e,[o,i,a]=t,u=n?i:this.height-i,s=r&&r*this.distanceScales.unitsPerMeter[2],c=G([o,u,a],this.pixelUnprojectionMatrix,s),[l,f,p]=this.unprojectPosition(c);return Number.isFinite(a)?[l,f,p]:Number.isFinite(r)?[l,f,r]:[l,f]}),(0,a.Z)(this,"projectPosition",t=>{let[e,n]=j(t),r=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[e,n,r]}),(0,a.Z)(this,"unprojectPosition",t=>{let[e,n]=T(t),r=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[e,n,r]});let{width:e,height:n,altitude:r=null,fovy:o=null}=t,{latitude:i=0,longitude:u=0,zoom:s=0,pitch:c=0,bearing:l=0,position:f=null,nearZMultiplier:p=.02,farZMultiplier:d=1.01}=t;e=e||1,n=n||1,null===o&&null===r?o=F(r=1.5):null===o?o=F(r):null===r&&(r=L(o));let h=M(s);r=Math.max(.75,r);let y=D({longitude:u,latitude:i}),g=j([u,i]);if(g.push(0),f){var m,b;m=[],b=y.unitsPerMeter,m[0]=f[0]*b[0],m[1]=f[1]*b[1],m[2]=f[2]*b[2],g[0]=g[0]+m[0],g[1]=g[1]+m[1],g[2]=g[2]+m[2]}this.projectionMatrix=N({width:e,height:n,scale:h,center:g,pitch:c,fovy:o,nearZMultiplier:p,farZMultiplier:d}),this.viewMatrix=I({height:n,scale:h,center:g,pitch:c,bearing:l,altitude:r}),this.width=e,this.height=n,this.scale=h,this.latitude=i,this.longitude=u,this.zoom=s,this.pitch=c,this.bearing=l,this.altitude=r,this.fovy=o,this.center=g,this.meterOffset=f||[0,0,0],this.distanceScales=y,this._initMatrices(),Object.freeze(this)}_initMatrices(){var t,e,n,r,o,i,a,u,c,l,f,p,g,v,m,b,E,P,_,O,S,w,M,x,j,T,k,C,D,R;let{width:I,height:A,projectionMatrix:N,viewMatrix:F}=this,L=s();d(L,L,N),d(L,L,F),this.viewProjectionMatrix=L;let H=s();y(H,H,[I/2,-A/2,1]),h(H,H,[1,-1,0]),d(H,H,L);let G=(t=s(),e=H[0],n=H[1],r=H[2],o=H[3],i=H[4],a=H[5],u=H[6],c=H[7],l=H[8],f=H[9],p=H[10],g=H[11],v=H[12],m=H[13],b=H[14],E=H[15],P=e*a-n*i,_=e*u-r*i,O=e*c-o*i,S=n*u-r*a,w=n*c-o*a,M=r*c-o*u,x=l*m-f*v,j=l*b-p*v,T=l*E-g*v,k=f*b-p*m,C=f*E-g*m,(R=P*(D=p*E-g*b)-_*C+O*k+S*T-w*j+M*x)?(R=1/R,t[0]=(a*D-u*C+c*k)*R,t[1]=(r*C-n*D-o*k)*R,t[2]=(m*M-b*w+E*S)*R,t[3]=(p*w-f*M-g*S)*R,t[4]=(u*T-i*D-c*j)*R,t[5]=(e*D-r*T+o*j)*R,t[6]=(b*O-v*M-E*_)*R,t[7]=(l*M-p*O+g*_)*R,t[8]=(i*C-a*T+c*x)*R,t[9]=(n*T-e*C-o*x)*R,t[10]=(v*w-m*O+E*P)*R,t[11]=(f*O-l*w-g*P)*R,t[12]=(a*j-i*k-u*x)*R,t[13]=(e*k-n*j+r*x)*R,t[14]=(m*_-v*S-b*P)*R,t[15]=(l*S-f*_+p*P)*R,t):null);if(!G)throw Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=H,this.pixelUnprojectionMatrix=G}projectFlat(t){return j(t)}unprojectFlat(t){return T(t)}getMapCenterByLngLatPosition({lngLat:t,pos:e}){var n;let r=G(e,this.pixelUnprojectionMatrix),o=j(t),i=m([],o,((n=[])[0]=-r[0],n[1]=-r[1],n)),a=m([],this.center,i);return T(a)}fitBounds(t,e={}){let{width:n,height:r}=this,{longitude:o,latitude:i,zoom:a}=z(Object.assign({width:n,height:r,bounds:t},e));return new q({width:n,height:r,longitude:o,latitude:i,zoom:a})}getBounds(t){let e=this.getBoundingRegion(t),n=Math.min(...e.map(t=>t[0])),r=Math.max(...e.map(t=>t[0])),o=Math.min(...e.map(t=>t[1])),i=Math.max(...e.map(t=>t[1]));return[[n,o],[r,i]]}getBoundingRegion(t={}){return B(this,t.z||0)}getLocationAtPoint({lngLat:t,pos:e}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:e})}}function Z(t){let{width:e,height:n,pitch:r=0}=t,{longitude:o,latitude:i,zoom:a,bearing:u=0}=t;(o<-180||o>180)&&(o=l(o+180,360)-180),(u<-180||u>180)&&(u=l(u+180,360)-180);let s=p(n/512);if(a<=s)a=s,i=0;else{let t=n/2/Math.pow(2,a),e=T([0,t])[1];if(i<e)i=e;else{let e=T([0,512-t])[1];i>e&&(i=e)}}return{width:e,height:n,longitude:o,latitude:i,zoom:a,pitch:r,bearing:u}}let V=["longitude","latitude","zoom"],X={curve:1.414,speed:1.2};function W(t,e,n,r){var o;let{startZoom:i,startCenterXY:a,uDelta:u,w0:s,u1:c,S:l,rho:f,rho2:d,r0:h}=$(t,e,r);if(c<.01){let r={};for(let o of V){let i=t[o],a=e[o];r[o]=n*a+(1-n)*i}return r}let y=n*l,g=Math.cosh(h)/Math.cosh(h+f*y),v=s*((Math.cosh(h)*Math.tanh(h+f*y)-Math.sinh(h))/d)/c,b=i+p(1/g),E=((o=[])[0]=u[0]*v,o[1]=u[1]*v,o);m(E,E,a);let P=T(E);return{longitude:P[0],latitude:P[1],zoom:b}}function J(t,e,n){let r;let o={...X,...n},{screenSpeed:i,speed:a,maxDuration:u}=o,{S:s,rho:c}=$(t,e,o),l=1e3*s;return r=Number.isFinite(i)?l/(i/c):l/a,Number.isFinite(u)&&r>u?0:r}function $(t,e,n){var r;n=Object.assign({},X,n);let o=n.curve,i=t.zoom,a=[t.longitude,t.latitude],u=M(i),s=e.zoom,c=[e.longitude,e.latitude],l=M(s-i),f=j(a),p=j(c),d=((r=[])[0]=p[0]-f[0],r[1]=p[1]-f[1],r),h=Math.max(t.width,t.height),y=h/l,g=Math.hypot(d[0],d[1])*u,v=Math.max(g,.01),m=o*o,b=(y*y-h*h+m*m*v*v)/(2*h*m*v),E=(y*y-h*h-m*m*v*v)/(2*y*m*v),P=Math.log(Math.sqrt(b*b+1)-b),_=Math.log(Math.sqrt(E*E+1)-E);return{startZoom:i,startCenterXY:f,uDelta:d,w0:h,u1:g,S:(_-P)/o,rho:o,rho2:m,r0:P,r1:_}}},4942:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(83997);function o(t,e,n){return(e=(0,r.Z)(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},83997:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(71002);function o(t){var e=function(t,e){if("object"!==(0,r.Z)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==(0,r.Z)(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===(0,r.Z)(e)?e:String(e)}},71002:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,{Z:function(){return r}})},87592:function(t,e,n){"use strict";function r(t){var e=[1/0,1/0,-1/0,-1/0];return!function t(e,n,r){if(null!==e)for(var o,i,a,u,s,c,l,f,p=0,d=0,h=e.type,y="FeatureCollection"===h,g="Feature"===h,v=y?e.features.length:1,m=0;m<v;m++){s=(f=!!(l=y?e.features[m].geometry:g?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var b=0;b<s;b++){var E=0,P=0;if(null!==(u=f?l.geometries[b]:l)){c=u.coordinates;var _=u.type;switch(p=r&&("Polygon"===_||"MultiPolygon"===_)?1:0,_){case null:break;case"Point":if(!1===n(c,d,m,E,P))return!1;d++,E++;break;case"LineString":case"MultiPoint":for(o=0;o<c.length;o++){if(!1===n(c[o],d,m,E,P))return!1;d++,"MultiPoint"===_&&E++}"LineString"===_&&E++;break;case"Polygon":case"MultiLineString":for(o=0;o<c.length;o++){for(i=0;i<c[o].length-p;i++){if(!1===n(c[o][i],d,m,E,P))return!1;d++}"MultiLineString"===_&&E++,"Polygon"===_&&P++}"Polygon"===_&&E++;break;case"MultiPolygon":for(o=0;o<c.length;o++){for(i=0,P=0;i<c[o].length;i++){for(a=0;a<c[o][i].length-p;a++){if(!1===n(c[o][i][a],d,m,E,P))return!1;d++}P++}E++}break;case"GeometryCollection":for(o=0;o<u.geometries.length;o++)if(!1===t(u.geometries[o],n,r))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}n.d(e,{Z:function(){return o}}),n(1449),r.default=r;var o=r},1449:function(t,e,n){"use strict";function r(t,e,n){var r,o;if(void 0===n&&(n={}),!t)throw Error("coordinates is required");if(!Array.isArray(t))throw Error("coordinates must be an Array");if(t.length<2)throw Error("coordinates must be at least 2 numbers long");if(!i(t[0])||!i(t[1]))throw Error("coordinates must contain numbers");return void 0===(r=n)&&(r={}),o={type:"Feature"},(0===r.id||r.id)&&(o.id=r.id),r.bbox&&(o.bbox=r.bbox),o.properties=e||{},o.geometry={type:"Point",coordinates:t},o}function o(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function i(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}n.d(e,{uf:function(){return o},xm:function(){return r}})}}]);