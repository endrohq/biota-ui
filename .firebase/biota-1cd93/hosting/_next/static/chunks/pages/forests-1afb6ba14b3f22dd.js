(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{73692:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forests",function(){return n(66794)}])},12874:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var i=n(85893);n(67294);var a=n(31248);function s(e){return(0,i.jsx)(a.J,{...e,children:(0,i.jsx)("path",{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 0 0 0 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"})})}},9599:function(e,t,n){"use strict";n.d(t,{B:function(){return x}});var i=n(85893),a=n(23125),s=n(14710),r=n(87592),l=n(1449),o=n(86010),c=n(67294),d=n(85198),u=n(73772);let f={longitude:4.4775362,latitude:51.0258761},m={"line-width":1,"line-color":"rgba(0, 255, 0, 0.75)","line-dasharray":[3,3]},p={"fill-color":"rgba(0, 255, 0, 0.05)"};function x(e){let{onChange:t,positions:n=[],height:x=375,mode:h="read-only",theme:N="dark",rounded:g=!0,zoom:v=12}=e,[j,b]=(0,c.useState)(),[y,w]=(0,c.useState)();return(0,c.useEffect)(()=>{"editable"===h&&(w(new u.DrawPolygonMode),b(f))},[]),(0,c.useEffect)(()=>{if("read-only"===h&&(0,s.i)(n)){let e=(0,l.uf)(n||[]),t=(0,r.Z)(e);(0,s.i)(t)&&b({latitude:(t[1]+t[3])/2||f.latitude,longitude:(t[0]+t[2])/2||f.longitude,maxLongitude:t[2],minLongitude:t[0],maxLatitude:t[3],minLatitude:t[1]})}},[n,h]),(0,i.jsx)("div",{style:{height:x},className:"w-full",children:j?(0,i.jsxs)(d.default,{zoom:v,height:"100%",width:"100%",className:(0,o.Z)(g&&"rounded"),...j,mapboxApiAccessToken:"pk.eyJ1IjoidWJlcmRhdGEiLCJhIjoiY2pwY3owbGFxMDVwNTNxcXdwMms2OWtzbiJ9.1PPVl0VLUQgqrosrI2nUhg",mapStyle:"mapbox://styles/mapbox/".concat(N,"-v11"),onViewportChange:b,children:["editable"===h&&(0,i.jsx)(u.Editor,{clickRadius:13,mode:y,selectable:"editable"===h,features:n||[],onUpdate:e=>{let{data:n}=e;null==t||t(n)}}),"read-only"===h&&(null==n?void 0:n.map((e,t)=>(0,i.jsxs)(d.Source,{id:"source-".concat(t),type:"geojson",data:e,children:[(0,i.jsx)(d.Layer,{paint:m,id:"line-".concat(t),type:"line"}),(0,i.jsx)(d.Layer,{paint:p,id:"polygon-".concat(t),type:"fill"})]},t)))]}):(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsx)(a._,{className:"text-gray-500"})})})}},21082:function(e,t,n){"use strict";n.d(t,{E:function(){return c}});var i=n(87866),a=n(9196),s=n(67294),r=n(86501),l=n(98518),o=n(81074);function c(e){let{client:t}=(0,l.N)(),{getJsonFile:n}=(0,o.y)(),[c,d]=(0,s.useState)([]),[u,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{p().then(()=>f(!1))},[]);let m=e=>{let t=new TextDecoder,n=t.decode(e),i=n.split("ipfs://")[1];return i.split("/")[0]};async function p(){try{let s=new i.I3().setTokenId(e),r=await s.execute(t),l=await r.totalSupply,o=[];for(let e=0;e<Number(l);e++){let s=new i.Rp(r.tokenId,e+1),l=await new i.Xq().setNftId(s).execute(t),c=await n(m(null==l?void 0:l[0].metadata),a.Y1.METADATA);o.push({...c,tokenId:s.toString()})}d(o)}catch(e){r.ZP.error("Something went wrong. Please reload the page.")}}return(0,s.useMemo)(()=>({loading:u,forests:c}),[u,c])}},98518:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var i=n(87866);let a=i._q.fromString("3030020100300706052b8104000a042204209e09fd6bf996a6a4ca7ff0e67dffb16fbf8828a21b89dfa735866999fdc4b12f"),s=i.hX.fromString("0.0.14271926");function r(){return{accountId:s,privateKey:a,client:function(){let e=i.KU.forTestnet();return e.setOperator(s,a),e}()}}},81074:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(9196),a=n(96810);function s(){function e(){return new a.xk({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDAyYWUxYTE5NzMxRDI1OWU4ZDFkOTRDMzFhNTY2NTljMzE3QzFFZTAiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2ODY2ODgyMjk5OTQsIm5hbWUiOiJoYXNoZ3JhcGgifQ.SFAL05NK16Vy75XmaclVHHy-tEPweI7AS4_AaX3ONLQ"})}async function t(t,n,a,s){let l=await e(),o=[r(JSON.stringify({name:t,creator:n,description:a,image:"https://bafybeibv3qve4co27gkgapqwftkmzcxgscbp4il7rwiyj2al4vl36hzfcu.ipfs.w3s.link/nft-placeholder.png",checksum:"ff32974d2a8cfeb8deb2437556b53296021bfe02d466f449d52b583a6e8fbcef",type:"image/png",format:"HIP412@2.0.0",properties:{location:s}}),"".concat(i.Y1.METADATA,".json"))];return l.put(o)}async function n(t){let n=await e(),{images:a,forest:s,...l}=t,o=[r(JSON.stringify(l),"".concat(i.Y1.PROPOSAL,".json")),r(JSON.stringify({title:l.title}),"".concat(i.Y1.METADATA,".json"))];return a&&o.push(...a.map(e=>new File([e],"images/".concat(e.name)))),n.put(o)}async function s(t){let n=await e();return n.put([r(JSON.stringify(t),"".concat(i.Y1.OBJECTION,".json"))])}function r(e,t){return new File([new Blob([e])],t,{type:"application/json",lastModified:new Date().getTime()})}async function l(t,n){let i=await e(),a=await (null==i?void 0:i.get(t)),s=await (null==a?void 0:a.files()),r="".concat(n,".json"),l=null==s?void 0:s.find(e=>e.name===r);if(!l)return;let c=new TextDecoder,d="";return await o(l,e=>d+=c.decode(e)),{...JSON.parse(d),cid:t}}async function o(e,t){let n=e.stream().getReader();for(;;){let{done:e,value:i}=await n.read();if(e)break;t(i)}}let c=(e,t)=>"https://dweb.link/ipfs/".concat(e,"/").concat(t);return{getJsonFile:l,uploadForest:t,getImageUrls:async function(t){let n=await e(),i=await n.get(t),a=await (null==i?void 0:i.files()),s=null==a?void 0:a.filter(e=>e.name.startsWith("images/"));return(null==s?void 0:s.map(e=>c(t,e.name)))||[]},uploadProposal:n,uploadObjection:s}}},66794:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n(85893),a=n(65037),s=n(23125),r=n(75125),l=n(9599),o=n(22784),c=n(98963),d=n(14710),u=n(44292),f=n(41664),m=n.n(f),p=n(67294),x=n(12874);function h(e){let{onClick:t}=e;return(0,i.jsxs)("div",{className:"mb-2 flex cursor-pointer items-center space-x-1 text-gray-500 transition-all duration-500 hover:text-gray-900",onClick:t,children:[(0,i.jsx)(x.X,{}),(0,i.jsx)("span",{children:"Back"})]})}var N=n(17642);function g(e){let{label:t,value:n}=e;return(0,i.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-100 py-2 text-sm last:border-0",children:[(0,i.jsx)("div",{className:"font-semibold text-gray-500",children:t}),(0,i.jsx)("div",{className:"",children:n})]})}function v(e){var t;let{forest:n,remove:a}=e,s=null==n?void 0:null===(t=n.tokenId)||void 0===t?void 0:t.split("/")[0];return(0,i.jsxs)("div",{className:"space-y-4 px-10",children:[(0,i.jsx)(h,{onClick:a}),(0,i.jsxs)("div",{className:"flex space-x-6",children:[(0,i.jsx)("div",{className:"mb-4 w-9/12",children:(0,i.jsx)("img",{src:n.image,className:"aspect-square w-full rounded-lg"})}),(0,i.jsxs)("div",{className:"w-2/12 space-y-4",children:[(0,i.jsx)("div",{className:"aspect-square rounded bg-gray-200"}),(0,i.jsx)("div",{className:"aspect-square rounded bg-gray-200"}),(0,i.jsx)("div",{className:"aspect-square rounded bg-gray-200"})]})]}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)(c.H2,{className:"mb-1 font-bold",children:null==n?void 0:n.name}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:null==n?void 0:n.description}),(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)(g,{label:"TokenId",value:(0,i.jsx)("a",{className:"text-blue-700 underline",target:"_blank",href:"https://hashscan.io/testnet/token/".concat(s),children:null==n?void 0:n.tokenId})}),(0,i.jsx)(g,{label:"IPFS",value:(0,i.jsx)("a",{className:"text-blue-700 underline",target:"_blank",href:"https://dweb.link/ipfs/".concat(null==n?void 0:n.cid,"/metadata.json"),children:(0,N.T)(null==n?void 0:n.cid)})}),(0,i.jsx)(g,{label:"Creator",value:null==n?void 0:n.creator})]})]})]})}function j(e){let{forest:t,setActive:n}=e;return(0,i.jsxs)("div",{onClick:()=>n(),className:"bg-transition flex w-full cursor-pointer items-center space-x-8 rounded bg-gray-50/75 p-4 hover:bg-green-50",children:[(0,i.jsx)("img",{src:t.image,className:"h-16 w-16 rounded-lg"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-semibold",children:null==t?void 0:t.name}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:null==t?void 0:t.description})]})]})}function b(e){let{forests:t}=e,[n,a]=(0,p.useState)(),s=(0,p.useMemo)(()=>{var e,i;return null!==(i=null==n?void 0:null===(e=n.properties)||void 0===e?void 0:e.location)&&void 0!==i?i:t.map(e=>e.properties.location).flat()},[t,n]);return(0,i.jsxs)("div",{className:"flex h-full items-center",children:[(0,i.jsx)("div",{className:"flex h-full w-4/12 flex-col space-y-3 overflow-y-scroll rounded bg-white p-10",children:n?(0,i.jsx)(v,{forest:n,remove:()=>a(void 0)}):(0,d.i)(t)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"mb-4 flex items-center justify-between border-b border-gray-100 pb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(c.H4,{className:"font-bold",children:"Forests"}),(0,i.jsx)(o.n,{className:"w-10/12 text-sm text-gray-600",children:"An active directory of existing forests around the world. Users with administrator's rights can add new forests to the directory."})]}),(0,i.jsx)(m(),{href:u.JF,children:(0,i.jsx)(r.z,{children:"Add Forest"})})]}),t.map(e=>(0,i.jsx)(j,{forest:e,setActive:()=>a(e)}))]}):(0,i.jsx)("div",{children:"No forests founds"})}),(0,i.jsx)("div",{className:"flex h-full w-8/12",children:(0,i.jsx)(l.B,{theme:"dark",positions:s,height:"100%",rounded:!1,mode:"read-only",zoom:n&&14})})]})}var y=n(21082);function w(){let{forests:e,loading:t}=(0,y.E)("0.0.14909792");return(0,i.jsx)(a.W,{withWidth:!1,withTopPadding:!1,children:t?(0,i.jsx)(s._,{}):(0,i.jsx)(b,{forests:e})})}},9196:function(e,t,n){"use strict";var i,a,s,r,l,o,c;n.d(t,{WD:function(){return a},Y1:function(){return s},dz:function(){return i}}),(l=i||(i={}))[l.FOR=0]="FOR",l[l.AGAINST=1]="AGAINST",l[l.ABSTAIN=2]="ABSTAIN",(o=a||(a={})).MOBILITY="mobility",o.SPATIAL_PLANNING="spatial-planning",o.CONFLICT_OF_INTEREST="conflict-of-interest",o.DE_PAVING="de-paving",o.PROCEDURE="procedure",o.CONSTRUCTION_PHASE="construction-phase",o.IMPACT_ON_CLIMATE="impact-on-climate",o.SAFETY="safety",o.VISUAL_IMPACT="visual-impact",o.PRIVACY="privacy",o.NUISANCE="nuisance",o.MATERIAL_USAGE="material-usage",o.FOREST_COMPENSATION="forest-compensation",o.HEALTH="health",o.ENERGY_CONSUMPTION="energy-consumption",o.PLANNING_CONTEXT="planning-context",o.ENVIRONMENTAL_IMPACT_REPORT="environmental-impact-report",o.WATER="water",o.AIR_QUALITY="air-quality",o.ECOLOGY="ecology",o.NOISE_POLLUTION="noise-pollution",o.LIGHT_POLLUTION="light-pollution",o.ODOR_NUISANCE="odor-nuisance",(c=s||(s={})).OBJECTION="objection",c.METADATA="metadata",c.PROPOSAL="proposal",(r||(r={})).PROPOSAL="proposal"},71231:function(){},89214:function(){},85568:function(){}},function(e){e.O(0,[169,714,634,715,765,866,635,810,204,37,774,888,179],function(){return e(e.s=73692)}),_N_E=e.O()}]);