"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{64759:function(f,e,t){t.r(e),t.d(e,{default:function(){return _}});var a=t(85893),s=t(23125),n=t(65670),i=t(98963),r=t(22784);function b(f){let{description:e}=f;return(0,a.jsxs)("div",{children:[(0,a.jsx)(i.H6,{className:"mb-2 text-gray-700",children:"Proposal Summary"}),(0,a.jsx)(r.n,{className:"w-9/12 text-sm text-gray-700",children:e})]})}var d=t(67294),c=t(81074);function o(f){let{cid:e}=f,[t,s]=(0,d.useState)([]),{getImageUrls:n}=(0,c.y)();return(0,d.useEffect)(()=>{let f=async()=>{if(e)try{let f=await n(e);s([...f,"","","","",""])}catch(f){console.error(f)}};f()},[e]),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 overflow-hidden rounded",children:t.slice(0,6).map((f,e)=>(0,a.jsx)("div",{className:"h-full overflow-hidden rounded",children:f.length>0?(0,a.jsx)("img",{src:f,alt:"incident image",className:"h-16 w-16 object-cover object-center"}):(0,a.jsx)("div",{className:"h-16 w-16 bg-gray-200"})},e))})}var l=t(9599);function u(f){let{positions:e}=f;return(0,a.jsx)("div",{className:"-z-10 bg-third brightness-105",children:(0,a.jsx)(l.B,{zoom:13,rounded:!1,positions:e,height:250})})}var p=t(75125),m=t(14710),x=t(784),y=t(35527),h=t(17642),j=t(68209),v=t(86237),g=t(17708),w=t(9196),N=t(86010);function T(f){let{create:e}=f,[t,s]=(0,d.useState)(),[n,i]=(0,d.useState)("");return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{children:"Create Objection"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Description"}),(0,a.jsx)(g.Z,{value:n,onChange:i,minRows:4})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-2 font-medium",children:"Categories"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.values(w.WD).map((f,e)=>(0,a.jsx)("div",{onClick:()=>s(f),className:(0,N.Z)("bg-transition mb-1 cursor-pointer rounded px-2 py-1.5 text-xs",{"text-green-700 bg-green-100":t===f,"text-gray-700 bg-gray-100 hover:bg-green-100":t!==f}),children:function(f){let e=f.split("-");for(let f=0;f<e.length;f++)e[f]=e[f][0].toUpperCase()+e[f].substr(1);return e.join(" ")}(f)},e))})]}),(0,a.jsx)("div",{className:"!mt-10 flex justify-end space-y-1 border-t border-gray-100 pt-10",children:(0,a.jsx)(p.z,{fullSize:!0,disabled:(null==n?void 0:n.length)===0||!t,onClick:()=>e({content:n,category:t}),className:"px-6 py-2",variant:"primary",children:"Create"})})]})}var S=t(55821),I=t(32802);function C(f){let{close:e,proposalId:t,onSuccess:s}=f,{signer:n}=(0,I.aF)(),{uploadObjection:i}=(0,c.y)(),[r,b]=(0,d.useState)(),[o,l]=(0,d.useState)("stale"),[u,p]=(0,d.useState)("");(0,d.useEffect)(()=>{r&&l("writeToIpfs")},[r]),(0,d.useEffect)(()=>{"writeToIpfs"===o?m():"writeToHedera"===o&&g()},[o,r]);let m=async()=>{if(r)try{let f=await i(r);p(f),l("writeToHedera")}catch(f){console.error(f)}};async function g(){try{let f=(0,h.L)(),e=new j.CH(S.F.address,S.F.abi,n),a=await e.createObjection(v.s(f),t,u);await a.wait(),s()}catch(f){console.error(f)}}return(0,a.jsx)(x.u,{open:!0,close:e,position:"right",children:r?"writeToHedera"===o||"writeToIpfs"===o?(0,a.jsx)(y.K,{writeStatus:o,title:"Uploading Objection"}):(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(T,{create:b})})}var z=t(54966);function F(f){let{objection:e}=f,[t,s]=(0,d.useState)(!0),n=t?"".concat(e.content.slice(0,100),"..."):e.content;return(0,a.jsxs)("div",{className:"space-y-4 rounded border-b border-gray-100 bg-white p-4 last:border-0",children:[(0,a.jsxs)("div",{className:" flex items-center justify-between ",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(z.s,{size:"large",address:e.author}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:(0,h.T)(e.author)}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:new Date().toDateString()})]})]}),(0,a.jsx)("div",{className:"mb-1 rounded bg-blue-50 px-2 py-1 text-xs text-blue-500",children:e.category})]}),(0,a.jsx)(r.n,{className:"text-sm leading-loose text-gray-600",children:n})]})}var O=t(86501);function P(f){let{proposalId:e}=f,{objections:t}=function(f){let{getJsonFile:e}=(0,c.y)(),[t,a]=(0,d.useState)([]),[s,n]=(0,d.useState)(!0),{signer:i}=(0,I.aF)();async function r(f){try{let t=new j.CH(S.F.address,S.F.abi,i),s=await t.getObjectionsByPage(f,0),n=[];for(let f of s){let t=function(f){if(f)return{id:v.F(f.id),cid:f.cid,author:f.author,proposalId:f.proposalId}}(f),a=await e(f.cid,w.Y1.OBJECTION),s=function(f){if(f)return{category:null==f?void 0:f.category,content:null==f?void 0:f.content}}(a);n.push({...t,...s})}a(n)}catch(f){O.ZP.error("Something went wrong. Please reload the page."),console.error(f)}finally{n(!1)}}return(0,d.useEffect)(()=>{f&&r(f)},[f]),(0,d.useMemo)(()=>({loading:s,objections:t}),[s,t])}(e),[s,n]=(0,d.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.H3,{className:"",children:"Forum"}),(0,a.jsx)(r.n,{className:"w-7/12 text-sm text-gray-600",children:"Showcase what you might think is positive or negative around the proposal. It's important to have a healthy discussion and share your knowledge & thoughts."})]}),(0,a.jsx)("div",{children:(0,a.jsx)(p.z,{onClick:()=>n(!0),children:"Create Objection"})})]}),(0,a.jsx)("div",{className:"flex justify-between space-x-6",children:(0,a.jsx)("div",{className:"w-12/12 grid grid-cols-3 gap-4",children:(0,m.i)(t)?null==t?void 0:t.map((f,e)=>(0,a.jsx)(F,{objection:f},e)):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"No objections yet"})})})]}),s&&(0,a.jsx)(C,{onSuccess:function(){n(!1)},proposalId:e,close:()=>n(!1)})]})}var A=t(48005);function k(f){let{proposalId:e,onSuccess:t,onError:s}=f,{signer:n}=(0,I.aF)(),[i,r]=(0,d.useState)(!1),[b,c]=(0,d.useState)();async function o(){try{let f=new j.CH(A.w.address,A.w.abi,n),a=await f.vote(e,b===w.dz.FOR,b===w.dz.AGAINST);await a.wait(),t()}catch(f){s(f),console.error(f)}finally{r(!1)}}return(0,d.useEffect)(()=>{i&&o()},[i]),(0,a.jsxs)("div",{className:"space-y-6 rounded border-b border-gray-100 bg-white",children:[(0,a.jsx)("div",{className:"border-b border-gray-100 py-2",children:(0,a.jsx)("div",{className:"font-medium",children:"Cast your vote"})}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-x-2",children:Object.keys(w.dz).map(f=>(0,a.jsx)(p.z,{onClick:()=>c(w.dz[f]),className:"px-10 py-1",fullSize:!0,variant:b===w.dz[f]?"black":"default",children:f},f))}),(0,a.jsx)("div",{className:"!mt-4 border-t border-gray-100 pt-4",children:(0,a.jsx)(p.z,{loading:i,disabled:!b,variant:"primary",onClick:()=>r(!0),className:"px-10 py-1",fullSize:!0,children:"Vote"})})]})}function E(f){let{vote:e,totalVotes:t,votes:s=0}=f,n=100*(s/t||0);return(0,a.jsxs)("div",{className:"w-full space-y-1.5 py-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("div",{className:" capitalize",children:e===w.dz.FOR?"For":e===w.dz.AGAINST?"Against":"Abstain"}),(0,a.jsxs)("div",{children:[n,"%"]})]}),(0,a.jsx)("div",{className:"h-1.5 w-full rounded-full bg-gray-200",children:(0,a.jsx)("div",{style:{width:"".concat(n||0,"%")},className:"h-full rounded-full bg-green-500"})})]})}function D(f){let{votes:e}=f,t=e.reduce((f,e)=>(f[e.choice]=f[e.choice]+1||1,f),{});return(0,a.jsxs)("div",{className:"rounded border border-gray-100 bg-gray-50",children:[(0,a.jsx)("div",{className:"border-b border-gray-100 px-4 py-2",children:(0,a.jsx)(i.H5,{children:"Results"})}),(0,a.jsxs)("div",{className:"flex items-center  p-6",children:[(0,a.jsx)(E,{totalVotes:e.length,votes:t[w.dz.FOR],vote:w.dz.FOR}),(0,a.jsx)(E,{totalVotes:e.length,votes:t[w.dz.AGAINST],vote:w.dz.AGAINST}),(0,a.jsx)(E,{totalVotes:e.length,votes:t[w.dz.ABSTAIN],vote:w.dz.ABSTAIN})]})]})}function H(f){let{proposalId:e,start:t,end:s}=f,[n,i]=(0,d.useState)(!1),{votes:b}=function(f){let{signer:e}=(0,I.aF)(),[t,a]=(0,d.useState)(!0),[s,n]=(0,d.useState)([]);async function i(){if(f)try{let t=new j.CH(A.w.address,A.w.abi,e),s=await t.getVotersForProposal(f);n(null==s?void 0:s.map(f=>({voter:f.voter,choice:f.choice}))),a(!1)}catch(f){console.error(f),O.ZP.error("Something went wrong. Please reload the page.")}}return(0,d.useEffect)(()=>{i()},[]),(0,d.useMemo)(()=>({loading:t,votes:s}),[s,t])}(e);return(0,a.jsxs)("div",{className:"rounded bg-white",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Share your opinion"}),(0,a.jsx)(r.n,{className:"w-5/12 text-sm text-gray-600",children:"Showcasing the opinions of local communities should be an important part on the discussion table."}),(0,a.jsxs)("div",{className:"my-4 flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{children:["Start: ",(0,a.jsx)("span",{className:"font-bold",children:t.toDateString()})]}),(0,a.jsxs)("div",{children:["End: ",(0,a.jsx)("span",{className:"font-bold",children:s.toDateString()})]})]}),(0,a.jsx)("div",{children:b&&(0,a.jsx)(D,{votes:b})}),JSON.stringify(b)]}),(0,a.jsx)(p.z,{onClick:()=>i(!0),variant:"primary",className:"px-28 py-1.5",children:"Vote"})]}),(0,a.jsx)(x.u,{open:n,close:()=>i(!1),children:(0,a.jsx)(k,{onSuccess:()=>window.location.reload(),onError:()=>"",proposalId:e})})]})}var V=t(93308),M=t(29237);function _(){var f;let{proposal:e}=(0,V.useProposalContext)(),{forest:t}=(0,M.d)(null==e?void 0:e.forestTokenId);return t?(0,a.jsxs)("div",{children:[(0,a.jsx)(u,{positions:null==t?void 0:null===(f=t.properties)||void 0===f?void 0:f.location}),(0,a.jsxs)("div",{className:"mx-auto mt-6 w-8/12 rounded bg-white px-10 py-4 pb-20",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center space-x-4 rounded-t border-b border-gray-100 py-3",children:[(0,a.jsx)("div",{className:"rounded bg-green-50 px-1.5 py-1",children:(0,a.jsx)(n.f,{className:"text-xl text-green-900"})}),(0,a.jsx)(i.H1,{className:"space-x-2 !text-base !font-medium",children:(null==t?void 0:t.name)||"-"})]}),(0,a.jsxs)("div",{className:"space-y-14 rounded py-10 pb-20",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between space-x-10 ",children:[(0,a.jsxs)("div",{className:"w-8/12 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"#1 Proposal"}),(0,a.jsx)(i.H4,{className:"capitalize",children:null==e?void 0:e.title})]}),(0,a.jsx)(b,{description:(null==e?void 0:e.description)||""})]}),(0,a.jsx)("div",{className:"w-4/12 space-y-4 px-10",children:(0,a.jsx)(o,{cid:null==e?void 0:e.cid})})]}),(0,a.jsx)(H,{start:(null==e?void 0:e.startTimestamp)||new Date,end:(null==e?void 0:e.endTimestamp)||new Date,proposalId:null==e?void 0:e.id}),(0,a.jsx)("div",{children:(0,a.jsx)(P,{proposalId:(null==e?void 0:e.id)||""})})]})]})]}):(0,a.jsx)(s._,{})}},55821:function(f,e,t){t.d(e,{F:function(){return a}});let a={abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"bytes32",name:"_objectionId",type:"bytes32"},{internalType:"bytes32",name:"_proposalId",type:"bytes32"},{internalType:"string",name:"cid",type:"string"}],name:"createObjection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_objectionId",type:"bytes32"}],name:"getObjectionById",outputs:[{components:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"string",name:"cid",type:"string"},{internalType:"bytes32",name:"proposalId",type:"bytes32"},{internalType:"address",name:"author",type:"address"}],internalType:"struct ObjectionContract.Objection",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"_proposalId",type:"bytes32"},{internalType:"uint256",name:"page",type:"uint256"}],name:"getObjectionsByPage",outputs:[{components:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"string",name:"cid",type:"string"},{internalType:"bytes32",name:"proposalId",type:"bytes32"},{internalType:"address",name:"author",type:"address"}],internalType:"struct ObjectionContract.Objection[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"objections",outputs:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"string",name:"cid",type:"string"},{internalType:"bytes32",name:"proposalId",type:"bytes32"},{internalType:"address",name:"author",type:"address"}],stateMutability:"view",type:"function"}],byteCode:"608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506111a7806100606000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c8063503943f3146100515780637972b9481461006d5780639d55c6a41461009d578063ca7b6622146100d0575b600080fd5b61006b60048036038101906100669190610876565b610100565b005b6100876004803603810190610082919061091b565b6101fd565b6040516100949190610b4f565b60405180910390f35b6100b760048036038101906100b29190610b71565b6104a1565b6040516100c79493929190610c06565b60405180910390f35b6100ea60048036038101906100e59190610b71565b610579565b6040516100f79190610cb5565b60405180910390f35b60405180608001604052808481526020018281526020018381526020013373ffffffffffffffffffffffffffffffffffffffff16815250600160008581526020019081526020016000206000820151816000015560208201518160010190816101699190610ee3565b506040820151816002015560608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555090505060026000838152602001908152602001600020839080600181540180825580915050600190039060005260206000200160009091909190915055505050565b60606000600490506000600260008681526020019081526020016000208054905090506000828561022e9190610fe4565b90506000838261023e9190611026565b9050828210610282576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610279906110a6565b60405180910390fd5b8281111561028e578290505b6000828261029c91906110c6565b67ffffffffffffffff8111156102b5576102b461074b565b5b6040519080825280602002602001820160405280156102ee57816020015b6102db6106a2565b8152602001906001900390816102d35790505b50905060005b838361030091906110c6565b811015610492576000600260008b815260200190815260200160002082866103289190611026565b81548110610339576103386110fa565b5b90600052602060002001549050600160008281526020019081526020016000206040518060800160405290816000820154815260200160018201805461037e90610d06565b80601f01602080910402602001604051908101604052809291908181526020018280546103aa90610d06565b80156103f75780601f106103cc576101008083540402835291602001916103f7565b820191906000526020600020905b8154815290600101906020018083116103da57829003601f168201915b50505050508152602001600282015481526020016003820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681525050838381518110610473576104726110fa565b5b602002602001018190525050808061048a90611129565b9150506102f4565b50809550505050505092915050565b60016020528060005260406000206000915090508060000154908060010180546104ca90610d06565b80601f01602080910402602001604051908101604052809291908181526020018280546104f690610d06565b80156105435780601f1061051857610100808354040283529160200191610543565b820191906000526020600020905b81548152906001019060200180831161052657829003601f168201915b5050505050908060020154908060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905084565b6105816106a2565b60016000838152602001908152602001600020604051806080016040529081600082015481526020016001820180546105b990610d06565b80601f01602080910402602001604051908101604052809291908181526020018280546105e590610d06565b80156106325780601f1061060757610100808354040283529160200191610632565b820191906000526020600020905b81548152906001019060200180831161061557829003601f168201915b50505050508152602001600282015481526020016003820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815250509050919050565b6040518060800160405280600080191681526020016060815260200160008019168152602001600073ffffffffffffffffffffffffffffffffffffffff1681525090565b6000604051905090565b600080fd5b600080fd5b6000819050919050565b61070d816106fa565b811461071857600080fd5b50565b60008135905061072a81610704565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6107838261073a565b810181811067ffffffffffffffff821117156107a2576107a161074b565b5b80604052505050565b60006107b56106e6565b90506107c1828261077a565b919050565b600067ffffffffffffffff8211156107e1576107e061074b565b5b6107ea8261073a565b9050602081019050919050565b82818337600083830152505050565b6000610819610814846107c6565b6107ab565b90508281526020810184848401111561083557610834610735565b5b6108408482856107f7565b509392505050565b600082601f83011261085d5761085c610730565b5b813561086d848260208601610806565b91505092915050565b60008060006060848603121561088f5761088e6106f0565b5b600061089d8682870161071b565b93505060206108ae8682870161071b565b925050604084013567ffffffffffffffff8111156108cf576108ce6106f5565b5b6108db86828701610848565b9150509250925092565b6000819050919050565b6108f8816108e5565b811461090357600080fd5b50565b600081359050610915816108ef565b92915050565b60008060408385031215610932576109316106f0565b5b60006109408582860161071b565b925050602061095185828601610906565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b610990816106fa565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b838110156109d05780820151818401526020810190506109b5565b60008484015250505050565b60006109e782610996565b6109f181856109a1565b9350610a018185602086016109b2565b610a0a8161073a565b840191505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610a4082610a15565b9050919050565b610a5081610a35565b82525050565b6000608083016000830151610a6e6000860182610987565b5060208301518482036020860152610a8682826109dc565b9150506040830151610a9b6040860182610987565b506060830151610aae6060860182610a47565b508091505092915050565b6000610ac58383610a56565b905092915050565b6000602082019050919050565b6000610ae58261095b565b610aef8185610966565b935083602082028501610b0185610977565b8060005b85811015610b3d5784840389528151610b1e8582610ab9565b9450610b2983610acd565b925060208a01995050600181019050610b05565b50829750879550505050505092915050565b60006020820190508181036000830152610b698184610ada565b905092915050565b600060208284031215610b8757610b866106f0565b5b6000610b958482850161071b565b91505092915050565b610ba7816106fa565b82525050565b600082825260208201905092915050565b6000610bc982610996565b610bd38185610bad565b9350610be38185602086016109b2565b610bec8161073a565b840191505092915050565b610c0081610a35565b82525050565b6000608082019050610c1b6000830187610b9e565b8181036020830152610c2d8186610bbe565b9050610c3c6040830185610b9e565b610c496060830184610bf7565b95945050505050565b6000608083016000830151610c6a6000860182610987565b5060208301518482036020860152610c8282826109dc565b9150506040830151610c976040860182610987565b506060830151610caa6060860182610a47565b508091505092915050565b60006020820190508181036000830152610ccf8184610c52565b905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680610d1e57607f821691505b602082108103610d3157610d30610cd7565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302610d997fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610d5c565b610da38683610d5c565b95508019841693508086168417925050509392505050565b6000819050919050565b6000610de0610ddb610dd6846108e5565b610dbb565b6108e5565b9050919050565b6000819050919050565b610dfa83610dc5565b610e0e610e0682610de7565b848454610d69565b825550505050565b600090565b610e23610e16565b610e2e818484610df1565b505050565b5b81811015610e5257610e47600082610e1b565b600181019050610e34565b5050565b601f821115610e9757610e6881610d37565b610e7184610d4c565b81016020851015610e80578190505b610e94610e8c85610d4c565b830182610e33565b50505b505050565b600082821c905092915050565b6000610eba60001984600802610e9c565b1980831691505092915050565b6000610ed38383610ea9565b9150826002028217905092915050565b610eec82610996565b67ffffffffffffffff811115610f0557610f0461074b565b5b610f0f8254610d06565b610f1a828285610e56565b600060209050601f831160018114610f4d5760008415610f3b578287015190505b610f458582610ec7565b865550610fad565b601f198416610f5b86610d37565b60005b82811015610f8357848901518255600182019150602085019450602081019050610f5e565b86831015610fa05784890151610f9c601f891682610ea9565b8355505b6001600288020188555050505b505050505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610fef826108e5565b9150610ffa836108e5565b9250828202611008816108e5565b9150828204841483151761101f5761101e610fb5565b5b5092915050565b6000611031826108e5565b915061103c836108e5565b925082820190508082111561105457611053610fb5565b5b92915050565b7f537461727420696e646578206f7574206f6620626f756e647300000000000000600082015250565b6000611090601983610bad565b915061109b8261105a565b602082019050919050565b600060208201905081810360008301526110bf81611083565b9050919050565b60006110d1826108e5565b91506110dc836108e5565b92508282039050818111156110f4576110f3610fb5565b5b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b6000611134826108e5565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361116657611165610fb5565b5b60018201905091905056fea26469706673582212208bb0282e75329880c66c7c09628bfbfc99e61035afd463a85e659edb46d0101664736f6c63430008120033",address:"0xe58AfA5866A9b78B8d970580e326255F5e7004D6"}},93308:function(f,e,t){t.r(e),t.d(e,{default:function(){return x},useProposalContext:function(){return p}});var a=t(85893),s=t(23125),n=t(67294),i=t(9196),r=t(53405),b=t(68209),d=t(86237),c=t(86501),o=t(81074),l=t(32802),u=t(48005);let p=()=>{let f=(0,n.useContext)(m);if(!f)throw Error("useProposalContext must be used within a ProposalProvider");return f},m=(0,n.createContext)({proposal:void 0});function x(f){let{proposalId:e,children:t}=f,{proposal:p,loading:x}=function(f){let{signer:e}=(0,l.aF)(),{getJsonFile:t}=(0,o.y)(),[a,s]=(0,n.useState)(!0),[p,m]=(0,n.useState)();async function x(){try{let a=new b.CH(u.w.address,u.w.abi,e),n=await a.getProposalById(d.s(f)),c=(0,r.a)(n);if(null==c?void 0:c.cid){let f=await t(c.cid,i.Y1.PROPOSAL),e=(0,r.F)(f);m({...c,...e}),s(!1)}}catch(f){console.error(f),c.ZP.error("Something went wrong. Please reload the page.")}}return(0,n.useEffect)(()=>{x()},[]),(0,n.useMemo)(()=>({loading:a,proposal:p}),[a,p])}(e);return(0,a.jsx)(m.Provider,{value:{proposal:p},children:x?(0,a.jsx)(s._,{}):t})}},29237:function(f,e,t){t.d(e,{d:function(){return d}});var a=t(87866),s=t(9196),n=t(67294),i=t(86501),r=t(98518),b=t(81074);function d(f){let{client:e}=(0,r.N)(),{getJsonFile:t}=(0,b.y)(),[d,c]=(0,n.useState)(),[o,l]=(0,n.useState)(!0);(0,n.useEffect)(()=>{f&&p().then(()=>l(!1))},[f]);let u=f=>{let e=new TextDecoder,t=e.decode(f),a=t.split("ipfs://")[1];return a.split("/")[0]};async function p(){if(f)try{let[n,i]=f.split("/"),r=new a.I3().setTokenId(n),b=await r.execute(e),d=new a.Rp(b.tokenId,Number(i)),o=await new a.Xq().setNftId(d).execute(e),l=await t(u(null==o?void 0:o[0].metadata),s.Y1.METADATA);c({...l,tokenId:d.toString()})}catch(f){console.error(f),i.ZP.error("Something went wrong. Please reload the page.")}}return(0,n.useMemo)(()=>({loading:o,forest:d}),[o,d])}},53405:function(f,e,t){function a(f){if(f)return{id:f.id,cid:f.cid,author:f.author,forestTokenId:f.forestTokenId,abstainVotes:Number(f.abstainVotes),againstVotes:Number(f.againstVotes),forVotes:Number(f.forVotes),startTimestamp:new Date(1e3*Number(f.startTimestamp)),endTimestamp:new Date(1e3*Number(f.endTimestamp))}}function s(f){if(f)return{title:null==f?void 0:f.title,description:null==f?void 0:f.description}}t.d(e,{F:function(){return s},a:function(){return a}})}}]);